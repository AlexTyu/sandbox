<!-- 
/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 *
 * LESSON 10 - Slice it!
 *
 * The rendered vessel is an arteriovenous fistula in an arm (a bypass created by joining
 * an artery and vein) acquired from a MR scanner. The data was provided by Orobix S.R.L.
 *
 *    http://www.orobix.com  
 *
 */
-->

<html>
<head>
<title>XTK LESSON 10</title>

<script type="text/javascript" src="xtk_edge.js"></script>
<!-- <script type="text/javascript" src="../../X/lib/closure-library/closure/goog/base.js"></script> -->
<!-- <script type="text/javascript" src="../../X/xtk-deps.js"></script> -->
<script type="text/javascript" src="http://get.goXTK.com/xtk_xdat.gui.js"></script>

<script type="text/javascript">

//   goog.require('X.renderer');
//   goog.require('X.volume');

  var run = function() {
    
    console.time('loading');
    
    var workers = [];
    var statuses = [];
    
    for (i=0;i<10;i++){
	    
	    workers[i] = new Worker('loaderVTK.js');
	    workers[i].onmessage = function(event) {  
	      
	      var obj = new X.object(JSON.parse(event.data));
	      obj.transform().translateX(Math.random(10)*100);
	      ren.add(obj);
	      statuses.push(true);
	      
	    };
	    
    }
    
    ren = new X.renderer('r');
    ren.init();
    
    setInterval(function() {
      
      if (statuses.length==10) {
        // loading done
        ren.render();
        console.timeEnd('loading');  
      }
      
    },50);
    
    
  };
</script>

<body onload="run()" style="margin:0px;">
  
  <!-- the container for the renderer -->
  <div id="r" style="background-color: #ffffff; width: 100%; height: 100%;"></div>
    
</body>