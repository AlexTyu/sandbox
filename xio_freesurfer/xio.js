/** @license Copyright (c) 2013 The X Toolkit Developers <dev@goXTK.com>, http://goXTK.com, MIT licensed. **/(function() {function k(){return function(){}}function aa(a){return function(){return this[a]}}var m,ba=ba||{},s=this;function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return"array"==da(a)}function ja(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}function w(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return x.apply(null,arguments)}var oa=Date.now||function(){return+new Date};
function y(a,b){var c=a.split("."),d=s;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function z(a,b){function c(){}c.prototype=b.prototype;a.s=b.prototype;a.prototype=new c};function pa(a){eval("X.DEV === undefined")||window.console.time(a)}function qa(a){eval("X.DEV === undefined")||window.console.timeEnd(a)}var ra=window.$b;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d});y("$",ra);y("Function.prototype.bind",Function.prototype.bind);y("X.io.version","0.0.1");y("X.io.uint8",!0);y("X.io.onloading",k());y("X.io.onload",k());y("X.io.onparsing",k());y("X.io.onparse",k());y("X.io.oncomplete",k());function A(){0!=sa&&(this.gc=Error().stack,ta[w(this)]=this)}var sa=0,ta={};A.prototype.Ma=!1;A.prototype.Y=function(){if(!this.Ma&&(this.Ma=!0,this.f(),0!=sa)){var a=w(this);delete ta[a]}};A.prototype.f=function(){if(this.qb)for(;this.qb.length;)this.qb.shift()()};var ua="closure_listenable_"+(1E6*Math.random()|0);function Ha(a){return!(!a||!a[ua])}var Ia=0;function Ja(a,b,c,d,e,f){this.t=a;this.sb=b;this.src=c;this.type=d;this.capture=!!e;this.R=f;this.key=++Ia;this.q=this.W=!1};function Ka(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function La(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ma="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ma.length;f++)c=Ma[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var B,Oa,Pa,Qa;function Ra(){return s.navigator?s.navigator.userAgent:null}Qa=Pa=Oa=B=!1;var Sa;if(Sa=Ra()){var Ta=s.navigator;B=0==Sa.indexOf("Opera");Oa=!B&&-1!=Sa.indexOf("MSIE");Pa=!B&&-1!=Sa.indexOf("WebKit");Qa=!B&&!Pa&&"Gecko"==Ta.product}var Ua=B,C=Oa,Va=Qa,D=Pa,Wa=s.navigator,Xa=-1!=(Wa&&Wa.platform||"").indexOf("Mac");function Ya(){var a=s.document;return a?a.documentMode:void 0}var Za;
a:{var $a="",ab;if(Ua&&s.opera)var bb=s.opera.version,$a="function"==typeof bb?bb():bb;else if(Va?ab=/rv\:([^\);]+)(\)|;)/:C?ab=/MSIE\s+([^\);]+)(\)|;)/:D&&(ab=/WebKit\/(\S+)/),ab)var cb=ab.exec(Ra()),$a=cb?cb[1]:"";if(C){var db=Ya();if(db>parseFloat($a)){Za=String(db);break a}}Za=$a}var eb={};
function E(a){var b;if(!(b=eb[a])){b=0;for(var c=String(Za).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=l.exec(g)||["","",""],q=n.exec(h)||["","",""];if(0==p[0].length&&0==q[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==p[1].length?0:parseInt(p[1],
10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==p[2].length)<(0==q[2].length)?-1:(0==p[2].length)>(0==q[2].length)?1:0)||(p[2]<q[2]?-1:p[2]>q[2]?1:0)}while(0==b)}b=eb[a]=0<=b}return b}var fb=s.document,gb=fb&&C?Ya()||("CSS1Compat"==fb.compatMode?parseInt(Za,10):5):void 0;var hb;(hb=!C)||(hb=C&&9<=gb);var ib=hb,jb=C&&!E("9");!D||E("528");Va&&E("1.9b")||C&&E("8")||Ua&&E("9.5")||D&&E("528");Va&&!E("8")||C&&E("9");var F=Array.prototype,kb=F.indexOf?function(a,b,c){return F.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(v(a))return v(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},lb=F.forEach?function(a,b,c){F.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function mb(a){var b;a:{b=nb;for(var c=a.length,d=v(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:v(a)?a.charAt(b):a[b]}function ob(a){if(!t(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function pb(a,b){var c=kb(a,b),d;(d=0<=c)&&F.splice.call(a,c,1);return d};function G(a,b){this.type=a;this.currentTarget=this.target=b}m=G.prototype;m.f=k();m.Y=k();m.T=!1;m.defaultPrevented=!1;m.vb=!0;m.preventDefault=function(){this.defaultPrevented=!0;this.vb=!1};function qb(a){qb[" "](a);return a}qb[" "]=ca;function rb(a,b){a&&sb(this,a,b)}z(rb,G);m=rb.prototype;m.target=null;m.relatedTarget=null;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=!1;m.altKey=!1;m.shiftKey=!1;m.metaKey=!1;m.Vb=!1;m.ra=null;
function sb(a,b,c){var d=a.type=b.type;G.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(Va){var e;a:{try{qb(c.nodeName);e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=D||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=D||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||0;
a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.Vb=Xa?b.metaKey:b.ctrlKey;a.state=b.state;a.ra=b;b.defaultPrevented&&a.preventDefault();delete a.T}m.preventDefault=function(){rb.s.preventDefault.call(this);var a=this.ra;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,jb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};
m.f=k();var tb={},H={},ub={},vb={};function I(a,b,c,d,e){if(t(b)){for(var f=0;f<b.length;f++)I(a,b[f],c,d,e);return null}c=wb(c);return Ha(a)?a.Sa(b,c,d,e):xb(a,b,c,!1,d,e)}
function xb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=H;b in g||(g[b]={d:0,G:0});g=g[b];e in g||(g[e]={d:0,G:0},g.d++);var g=g[e],h=w(a),l;g.G++;if(g[h]){l=g[h];for(var n=0;n<l.length;n++)if(g=l[n],g.t==c&&g.R==f){if(g.q)break;d||(l[n].W=!1);return l[n]}}else l=g[h]=[],g.d++;n=yb();g=new Ja(c,n,a,b,e,f);g.W=d;n.src=a;n.t=g;l.push(g);ub[h]||(ub[h]=[]);ub[h].push(g);a.addEventListener?a.addEventListener(b,n,e):a.attachEvent(b in vb?vb[b]:vb[b]="on"+b,n);return tb[g.key]=g}
function yb(){var a=zb,b=ib?function(c){return a.call(b.src,b.t,c)}:function(c){c=a.call(b.src,b.t,c);if(!c)return c};return b}function Ab(a,b,c,d,e){if(t(b)){for(var f=0;f<b.length;f++)Ab(a,b[f],c,d,e);return null}c=wb(c);return Ha(a)?a.Ta(b,c,d,e):xb(a,b,c,!0,d,e)}function Bb(a,b,c,d,e){if(t(b))for(var f=0;f<b.length;f++)Bb(a,b[f],c,d,e);else if(c=wb(c),Ha(a))a.ka(b,c,d,e);else if(d=!!d,a=Cb(a,b,d))for(f=0;f<a.length;f++)if(a[f].t==c&&a[f].capture==d&&a[f].R==e){Db(a[f]);break}}
function Db(a){if("number"==typeof a||!a||a.q)return!1;var b=a.src;if(Ha(b))return Eb(b,a);var c=a.type,d=a.sb,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in vb?vb[c]:vb[c]="on"+c,d);b=w(b);ub[b]&&(d=ub[b],pb(d,a),0==d.length&&delete ub[b]);a.q=!0;a.t=null;a.sb=null;a.src=null;a.R=null;if(d=H[c][e][b])d.pb=!0,Fb(c,e,b,d);delete tb[a.key];return!0}
function Fb(a,b,c,d){if(!d.xa&&d.pb){for(var e=0,f=0;e<d.length;e++)d[e].q||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.pb=!1;0==f&&(delete H[a][b][c],H[a][b].d--,0==H[a][b].d&&(delete H[a][b],H[a].d--),0==H[a].d&&delete H[a])}}function Cb(a,b,c){var d=H;return b in d&&(d=d[b],c in d&&(d=d[c],a=w(a),d[a]))?d[a]:null}
function Gb(a,b,c,d,e){var f=1;b=w(b);if(a[b]){var g=--a.G,h=a[b];h.xa?h.xa++:h.xa=1;try{for(var l=h.length,n=0;n<l;n++){var p=h[n];p&&!p.q&&(f&=!1!==Hb(p,e))}}finally{a.G=Math.max(g,a.G),h.xa--,Fb(c,d,b,h)}}return Boolean(f)}function Hb(a,b){var c=a.t,d=a.R||a.src;a.W&&Db(a);return c.call(d,b)}
function zb(a,b){if(a.q)return!0;var c=a.type,d=H;if(!(c in d))return!0;var d=d[c],e,f;if(!ib){var g;if(!(g=b))a:{g=["window","event"];for(var h=s;e=g.shift();)if(null!=h[e])h=h[e];else{g=null;break a}g=h}e=g;g=!0 in d;h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var l=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){l=!0}if(l||void 0==e.returnValue)e.returnValue=!0}}l=new rb;sb(l,e,this);e=!0;try{if(g){for(var p=[],q=l.currentTarget;q;q=q.parentNode)p.push(q);f=d[!0];f.G=
f.d;for(var r=p.length-1;!l.T&&0<=r&&f.G;r--)l.currentTarget=p[r],e&=Gb(f,p[r],c,!0,l);if(h)for(f=d[!1],f.G=f.d,r=0;!l.T&&r<p.length&&f.G;r++)l.currentTarget=p[r],e&=Gb(f,p[r],c,!1,l)}else e=Hb(a,l)}finally{p&&(p.length=0)}return e}c=new rb(b,this);return e=Hb(a,c)}var Ib="__closure_events_fn_"+(1E9*Math.random()>>>0);function wb(a){return"function"==da(a)?a:a[Ib]||(a[Ib]=function(b){return a.handleEvent(b)})};function J(){A.call(this);this.p={};this.Ab=this}z(J,A);J.prototype[ua]=!0;m=J.prototype;m.Va=null;m.addEventListener=function(a,b,c,d){I(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Bb(this,a,b,c,d)};
m.dispatchEvent=function(a){var b,c=this.Va;if(c)for(b=[];c;c=c.Va)b.push(c);var c=this.Ab,d=a.type||a;if(v(a))a=new G(a,c);else if(a instanceof G)a.target=a.target||c;else{var e=a;a=new G(d,c);Na(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.T&&0<=g;g--)f=a.currentTarget=b[g],e=Jb(f,d,!0,a)&&e;a.T||(f=a.currentTarget=c,e=Jb(f,d,!0,a)&&e,a.T||(e=Jb(f,d,!1,a)&&e));if(b)for(g=0;!a.T&&g<b.length;g++)f=a.currentTarget=b[g],e=Jb(f,d,!1,a)&&e;return e};
m.f=function(){J.s.f.call(this);var a=0,b;for(b in this.p){for(var c=this.p[b],d=0;d<c.length;d++)++a,delete tb[c[d].key],c[d].q=!0;c.length=0}this.Va=null};m.Sa=function(a,b,c,d){return Kb(this,a,b,!1,c,d)};m.Ta=function(a,b,c,d){return Kb(this,a,b,!0,c,d)};function Kb(a,b,c,d,e,f){var g=a.p[b]||(a.p[b]=[]),h=Lb(g,c,e,f);if(-1<h)return a=g[h],d||(a.W=!1),a;a=new Ja(c,null,a,b,!!e,f);a.W=d;g.push(a);return a}
m.ka=function(a,b,c,d){if(!(a in this.p))return!1;a=this.p[a];b=Lb(a,b,c,d);return-1<b?(c=a[b],delete tb[c.key],c.q=!0,1==F.splice.call(a,b,1).length):!1};function Eb(a,b){var c=b.type;if(!(c in a.p))return!1;if(c=pb(a.p[c],b))delete tb[b.key],b.q=!0;return c}
function Jb(a,b,c,d){if(!(b in a.p))return!0;var e=!0;b=a.p[b];var f=b.length;if(0<f){for(var g=Array(f),h=0;h<f;h++)g[h]=b[h];b=g}else b=[];for(f=0;f<b.length;++f)if((g=b[f])&&!g.q&&g.capture==c){var h=g.t,l=g.R||g.src;g.W&&Eb(a,g);e=!1!==h.call(l,d)&&e}return e&&!1!=d.vb}function Lb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.t==b&&f.capture==!!c&&f.R==d)return e}return-1};function Mb(){J.call(this);this.m="io.base";this.N=0;this.Za=!1}z(Mb,J);Object.defineProperty(Mb.prototype,"classname",{get:aa("m")});Object.defineProperty(Mb.prototype,"id",{get:aa("N")});Object.defineProperty(Mb.prototype,"dirty",{get:aa("Za"),set:function(a){this.Za=a}});function Nb(a){G.call(this,a);this.m="event"}z(Nb,G);function K(a,b){Nb.call(this,"a");this.zb=b;this.O=a}z(K,Nb);function Ob(a){Nb.call(this,"b");this.O=a}z(Ob,Nb);function Pb(){Mb.call(this);this.m="io.parser";this.k=null;this.ea=0;this.xb=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.$a=!0;this.cc=-Infinity;this.bc=Infinity}z(Pb,Mb);Pb.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};
function L(a,b,c){null!=c||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array;d=4;break;case "complex":e=Float64Array;d=8;break;case "double":e=Float64Array,d=8}b=new e(a.k.slice(a.ea,a.ea+=c*d));if(a.xb!=a.$a){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-
1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}function Qb(a){for(var b=a.length,c=Infinity,d=-Infinity,e=a.length,f=0,f=0;f<e;f++)var g=a[f],c=Math.min(c,g),d=Math.max(d,g);c=d;d=new Uint8Array(b);for(e=0;e<b;e++)d[e]=255*(a[e]/c);return d}function Rb(a,b,c){pa(a.m+".reslice");for(var d=b[0]*b[1],e=Array(b[2]),f=0,f=0;f<b[2];f++)e[f]=c.buffer.slice(f*d,(f+1)*d);qa(a.m+".reslice");return e};function Sb(a,b,c){var d="number"===typeof b?b:b=0,e="number"===typeof c?c:a.length;c=-1;for(d=e&7;d--;++b)c=c>>>8^M[(c^a[b])&255];for(d=e>>3;d--;b+=8)c=c>>>8^M[(c^a[b])&255],c=c>>>8^M[(c^a[b+1])&255],c=c>>>8^M[(c^a[b+2])&255],c=c>>>8^M[(c^a[b+3])&255],c=c>>>8^M[(c^a[b+4])&255],c=c>>>8^M[(c^a[b+5])&255],c=c>>>8^M[(c^a[b+6])&255],c=c>>>8^M[(c^a[b+7])&255];return(c^4294967295)>>>0}
var M=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Tb(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,l,n,p,q,r;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;f=new Uint32Array(e);g=1;h=0;for(l=2;g<=c;){for(q=0;q<b;++q)if(a[q]===g){n=0;p=h;for(r=0;r<g;++r)n=n<<1|p&1,p>>=1;for(r=n;r<e;r+=l)f[r]=g<<16|q;++h}++g;h<<=1;l<<=1}return[f,c,d]};function Ub(a,b){this.Ea=[];this.Fa=32768;this.o=this.ga=this.h=this.Xa=0;this.input=new Uint8Array(a);this.bb=!1;this.Ga=Vb;this.ub=!1;if(b||!(b={}))b.index&&(this.h=b.index),b.bufferSize&&(this.Fa=b.bufferSize),b.bufferType&&(this.Ga=b.bufferType),b.resize&&(this.ub=b.resize);switch(this.Ga){case Wb:this.c=32768;this.j=new Uint8Array(32768+this.Fa+258);break;case Vb:this.c=0;this.j=new Uint8Array(this.Fa);this.Q=this.Jb;this.fb=this.Db;this.Ja=this.Gb;break;default:throw Error("invalid inflate mode");
}}var Wb=0,Vb=1;
Ub.prototype.Ka=function(){for(;!this.bb;){var a=N(this,3);a&1&&(this.bb=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.h,c=this.j,d=this.c,e=void 0,f=void 0,g=void 0,h=c.length,e=void 0;this.o=this.ga=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");f=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");f|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");g=e;e=a[b++];
if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");g|=e<<8;if(f===~g)throw Error("invalid uncompressed block header: length verify");if(b+f>a.length)throw Error("input buffer is broken");switch(this.Ga){case Wb:for(;d+f>c.length;)e=h-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.c=d,c=this.Q(),d=this.c;break;case Vb:for(;d+f>c.length;)c=this.Q({hb:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+f),d);d+=f;this.h=b+=f;this.c=d;this.j=c;
break;case 1:this.Ja(Xb,Yb);break;case 2:Zb(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.fb()};
var ac=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),cc=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),dc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),ec=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),fc=new Uint8Array(288),
O,gc;O=0;for(gc=fc.length;O<gc;++O)fc[O]=143>=O?8:255>=O?9:279>=O?7:8;var Xb=Tb(fc),hc=new Uint8Array(30),ic,jc;ic=0;for(jc=hc.length;ic<jc;++ic)hc[ic]=5;var Yb=Tb(hc);function N(a,b){for(var c=a.ga,d=a.o,e=a.input,f=a.h,g;d<b;){g=e[f++];if(void 0===g)throw Error("input buffer is broken");c|=g<<d;d+=8}g=c&(1<<b)-1;a.ga=c>>>b;a.o=d-b;a.h=f;return g}
function kc(a,b){for(var c=a.ga,d=a.o,e=a.input,f=a.h,g=b[0],h=b[1],l;d<h;){l=e[f++];if(void 0===l)break;c|=l<<d;d+=8}e=g[c&(1<<h)-1];g=e>>>16;a.ga=c>>g;a.o=d-g;a.h=f;return e&65535}
function Zb(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=kc(this,b),d){case 16:for(d=3+N(this,2);d--;)c[f++]=e;break;case 17:for(d=3+N(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+N(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=N(a,5)+257,d=N(a,5)+1,e=N(a,4)+4,f=new Uint8Array(ac.length),g;for(g=0;g<e;++g)f[ac[g]]=N(a,3);e=Tb(f);f=new Uint8Array(c);g=new Uint8Array(d);a.Ja(Tb(b.call(a,c,e,f)),Tb(b.call(a,d,e,g)))}m=Ub.prototype;
m.Ja=function(a,b){var c=this.j,d=this.c;this.gb=a;for(var e=c.length-258,f,g,h;256!==(f=kc(this,a));)if(256>f)d>=e&&(this.c=d,c=this.Q(),d=this.c),c[d++]=f;else for(f-=257,h=bc[f],0<cc[f]&&(h+=N(this,cc[f])),f=kc(this,b),g=dc[f],0<ec[f]&&(g+=N(this,ec[f])),d>=e&&(this.c=d,c=this.Q(),d=this.c);h--;)c[d]=c[d++-g];for(;8<=this.o;)this.o-=8,this.h--;this.c=d};
m.Gb=function(a,b){var c=this.j,d=this.c;this.gb=a;for(var e=c.length,f,g,h;256!==(f=kc(this,a));)if(256>f)d>=e&&(c=this.Q(),e=c.length),c[d++]=f;else for(f-=257,h=bc[f],0<cc[f]&&(h+=N(this,cc[f])),f=kc(this,b),g=dc[f],0<ec[f]&&(g+=N(this,ec[f])),d+h>e&&(c=this.Q(),e=c.length);h--;)c[d]=c[d++-g];for(;8<=this.o;)this.o-=8,this.h--;this.c=d};
m.Q=function(){var a=new Uint8Array(this.c-32768),b=this.c-32768,c=this.j;a.set(c.subarray(32768,a.length));this.Ea.push(a);this.Xa+=a.length;c.set(c.subarray(b,b+32768));this.c=32768;return c};m.Jb=function(a){var b=this.input.length/this.h+1|0,c=this.input,d=this.j;a&&("number"===typeof a.hb&&(b=a.hb),"number"===typeof a.Bb&&(b+=a.Bb));2>b?(a=(c.length-this.h)/this.gb[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.j=a};
m.fb=function(){var a=0,b=this.j,c=this.Ea,d,e=new Uint8Array(this.Xa+(this.c-32768)),f,g,h,l;if(0===c.length)return this.j.subarray(32768,this.c);f=0;for(g=c.length;f<g;++f)for(d=c[f],h=0,l=d.length;h<l;++h)e[a++]=d[h];f=32768;for(g=this.c;f<g;++f)e[a++]=b[f];this.Ea=[];return this.buffer=e};m.Db=function(){var a,b=this.c;this.ub?(a=new Uint8Array(b),a.set(this.j.subarray(0,b))):a=this.j.subarray(0,b);return this.buffer=a};new Uint8Array(256);var lc;for(lc=0;256>lc;++lc)for(var mc=lc,nc=7,mc=mc>>>1;mc;mc>>>=1)--nc;var oc=[],P;for(P=0;288>P;P++)switch(!0){case 143>=P:oc.push([P+48,8]);break;case 255>=P:oc.push([P-144+400,9]);break;case 279>=P:oc.push([P-256+0,7]);break;case 287>=P:oc.push([P-280+192,8]);break;default:throw"invalid literal: "+P;}
var pc=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(pc);function qc(){};function rc(a){this.input=a;this.h=0;this.nb=[];this.Hb=!1}
rc.prototype.Ka=function(){for(var a=this.input.length;this.h<a;){var b=new qc,c=void 0,d=void 0,e=void 0,f=c=e=void 0,g=void 0,c=c=void 0,h=this.input,d=this.h;b.ib=h[d++];b.jb=h[d++];if(31!==b.ib||139!==b.jb)throw Error("invalid file signature:"+b.ib+","+b.jb);b.cb=h[d++];switch(b.cb){case 8:break;default:throw Error("unknown compression method: "+b.cb);}b.sa=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.ic=new Date(1E3*c);b.kc=h[d++];b.jc=h[d++];0<(b.sa&4)&&(b.Zb=h[d++]|h[d++]<<8,d+=b.Zb);
if(0<(b.sa&8)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.name=g.join("")}if(0<(b.sa&16)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.ec=g.join("")}if(0<(b.sa&2)&&(b.Fb=Sb(h,0,d)&65535,b.Fb!==(h[d++]|h[d++]<<8)))throw Error("invalid header crc16");c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new Ub(h,{index:d,bufferSize:e});b.data=e=d.Ka();d=d.h;b.fc=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;if(Sb(e,void 0,void 0)!==
c)throw Error("invalid CRC-32 checksum: 0x"+Sb(e,void 0,void 0).toString(16)+" / 0x"+c.toString(16));b.hc=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.nb.push(b);this.h=d}this.Hb=!0;a=this.nb;b=e=d=0;for(h=a.length;b<h;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<h;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function Q(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Q.prototype.BYTES_PER_ELEMENT=8;Q.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Q.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{Q.BYTES_PER_ELEMENT=8}catch(sc){}Q.prototype.BYTES_PER_ELEMENT=Q.prototype.BYTES_PER_ELEMENT;Q.prototype.set=Q.prototype.set;Q.prototype.toString=Q.prototype.toString;y("Float64Array",Q)};function R(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}R.prototype.BYTES_PER_ELEMENT=4;R.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};R.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(R.BYTES_PER_ELEMENT=4,R.prototype.BYTES_PER_ELEMENT=R.prototype.BYTES_PER_ELEMENT,R.prototype.set=R.prototype.set,R.prototype.toString=R.prototype.toString,y("Float32Array",R));function tc(){var a=new Float32Array(16);a[0]=a[5]=a[10]=a[15]=1;return a}function S(a,b,c,d,e,f){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=f}
function uc(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],l=a[6],n=a[7],p=a[8],q=a[9],r=a[10],ea=a[11],fa=a[12],ga=a[13],ha=a[14],ia=a[15],va=c*h-d*g,wa=c*l-e*g,xa=c*n-f*g,ya=d*l-e*h,za=d*n-f*h,Aa=e*n-f*l,Ba=p*ga-q*fa,Ca=p*ha-r*fa,Da=p*ia-ea*fa,Ea=q*ha-r*ga,Fa=q*ia-ea*ga,Ga=r*ia-ea*ha,u=va*Ga-wa*Fa+xa*Ea+ya*Da-za*Ca+Aa*Ba;0!=u&&(u=1/u,b[0]=(h*Ga-l*Fa+n*Ea)*u,b[1]=(-d*Ga+e*Fa-f*Ea)*u,b[2]=(ga*Aa-ha*za+ia*ya)*u,b[3]=(-q*Aa+r*za-ea*ya)*u,b[4]=(-g*Ga+l*Da-n*Ca)*u,b[5]=(c*Ga-e*Da+f*Ca)*u,b[6]=(-fa*
Aa+ha*xa-ia*wa)*u,b[7]=(p*Aa-r*xa+ea*wa)*u,b[8]=(g*Fa-h*Da+n*Ba)*u,b[9]=(-c*Fa+d*Da-f*Ba)*u,b[10]=(fa*za-ga*xa+ia*va)*u,b[11]=(-p*za+q*xa-ea*va)*u,b[12]=(-g*Ea+h*Ca-l*Ba)*u,b[13]=(c*Ea-d*Ca+e*Ba)*u,b[14]=(-fa*ya+ga*wa-ha*va)*u,b[15]=(p*ya-q*wa+r*va)*u)}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function T(){Pb.call(this);this.m="io.parserNII"}z(T,Pb);
T.prototype.parse=function(a){pa(this.m+".parse");var b=a.l[0].k,c=-1,c="undefined"==typeof DataView?(new Int32Array(b,0,1))[0]:(new DataView(b,0)).getInt32(0,!0);348!=c&&(b=(new rc(new Uint8Array(b))).Ka(),b=b.buffer);this.k=b;this.dispatchEvent(new K(a,20));b=this.Wa();this.dispatchEvent(new K(a,20));c=vc(this,b);eval("X.io.uint8")&&(c=Qb(c));this.dispatchEvent(new K(a,20));var d=wc(b),e=new Float32Array(16);uc(d,e);c=Rb(this,b.dim.subarray(1,4),c);this.dispatchEvent(new K(a,40));a.k={header:b,
data:{image:c}};qa(this.m+".parse");this.dispatchEvent(new Ob(a))};
T.prototype.Wa=function(){return{sizeof_hdr:L(this,"uint"),data_type:L(this,"uchar",10),db_name:L(this,"uchar",18),extents:L(this,"uint"),session_error:L(this,"ushort"),regular:L(this,"uchar"),dim_info:L(this,"uchar"),dim:L(this,"ushort",8),intent_p1:L(this,"float"),intent_p2:L(this,"float"),intent_p3:L(this,"float"),intent_code:L(this,"ushort"),datatype:L(this,"ushort"),bitpix:L(this,"ushort"),slice_start:L(this,"ushort"),pixdim:L(this,"float",8),vox_offset:L(this,"float"),scl_slope:L(this,"float"),
scl_inter:L(this,"float"),slice_end:L(this,"ushort"),slice_code:L(this,"uchar"),xyzt_units:L(this,"uchar"),cal_max:L(this,"float"),cal_min:L(this,"float"),slice_duration:L(this,"float"),toffset:L(this,"float"),glmax:L(this,"uint",1),glmin:L(this,"uint",1),descrip:L(this,"uchar",80),aux_file:L(this,"uchar",24),qform_code:L(this,"ushort"),sform_code:L(this,"ushort"),quatern_b:L(this,"float"),quatern_c:L(this,"float"),quatern_d:L(this,"float"),qoffset_x:L(this,"float"),qoffset_y:L(this,"float"),qoffset_z:L(this,
"float"),srow_x:L(this,"float",4),srow_y:L(this,"float",4),srow_z:L(this,"float",4),intent_name:L(this,"uchar",16),magic:L(this,"uchar",4)}};
function vc(a,b){var c=null;a.ea=parseInt(b.vox_offset,10);c=b.dim[1]*b.dim[2]*b.dim[3];switch(b.datatype){case 2:c=L(a,"uchar",c);break;case 4:c=L(a,"sshort",c);break;case 8:c=L(a,"sint",c);break;case 16:c=L(a,"float",c);break;case 32:c=L(a,"complex",c);break;case 64:c=L(a,"double",c);break;case 256:c=L(a,"schar",c);break;case 512:c=L(a,"ushort",c);break;case 768:c=L(a,"uint",c);break;default:throw Error("Unsupported NII data type: "+b.datatype);}return c}
function wc(a){var b=tc(),c=[];if(0==a.qform_code)S(b,0,a.pixdim[1],0,0,0),S(b,1,0,a.pixdim[2],0,0),S(b,2,0,0,a.pixdim[3],0),c.push(a.pixdim[1]),c.push(0),c.push(0),c.push(0),c.push(a.pixdim[2]),c.push(0),c.push(0),c.push(0),c.push(a.pixdim[3]);else if(0<a.qform_code){var d=0,e=a.quatern_b,f=a.quatern_c,g=a.quatern_d,h=1,l=1,n=1,p=a.qoffset_x,q=a.qoffset_y,r=a.qoffset_z,d=1-(e*e+f*f+g*g);1E-7>d?(d=1/Math.sqrt(e*e+f*f+g*g),e*=d,f*=d,g*=d,d=0):d=Math.sqrt(d);0<a.pixdim[1]&&(h=a.pixdim[1]);0<a.pixdim[2]&&
(l=a.pixdim[2]);0<a.pixdim[2]&&(n=a.pixdim[3]);0>a.pixdim[0]&&(n=-n);S(b,0,(d*d+e*e-f*f-g*g)*h,2*(e*f-d*g)*l,2*(e*g+d*f)*n,p);S(b,1,2*(e*f+d*g)*h,(d*d+f*f-e*e-g*g)*l,2*(f*g-d*e)*n,q);S(b,2,2*(e*g-d*f)*h,2*(f*g+d*e)*l,(d*d+g*g-f*f-e*e)*n,r);c.push((d*d+e*e-f*f-g*g)*h);c.push(2*(e*f+d*g)*h);c.push(2*(e*g+d*f)*n);c.push(2*(e*f-d*g)*l);c.push((d*d+f*f-e*e-g*g)*l);c.push(2*(f*g-d*e)*n);c.push(2*(e*g+d*f)*n);c.push(2*(f*g+d*e)*l);c.push((d*d+g*g-f*f-e*e)*n)}else 0<a.sform_code&&(c=a.srow_x,d=a.srow_y,a=
a.srow_z,S(b,0,c[0],c[1],c[2],c[3]),S(b,1,d[0],d[1],d[2],d[3]),S(b,2,a[0],a[1],a[2],a[3]));return b}y("X.io.parserNII",T);y("X.io.parserNII.prototype.parse",T.prototype.parse);function xc(a,b){this.O=a;this.dc=b;this.i=this.J=this.n=0;this.k=null};var yc="StopIteration"in s?s.StopIteration:Error("StopIteration");function zc(){}zc.prototype.next=function(){throw yc;};zc.prototype.v=function(){return this};function Ac(a){if(a instanceof zc)return a;if("function"==typeof a.v)return a.v(!1);if(ja(a)){var b=0,c=new zc;c.next=function(){for(;;){if(b>=a.length)throw yc;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Bc(a,b){if(ja(a))try{lb(a,b,void 0)}catch(c){if(c!==yc)throw c;}else{a=Ac(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==yc)throw d;}}};function U(a,b){this.e={};this.b=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Da(a)}m=U.prototype;m.d=0;m.la=0;m.g=aa("d");m.B=function(){Cc(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.e[this.b[b]]);return a};m.Z=function(){Cc(this);return this.b.concat()};m.L=function(){return 0==this.d};m.clear=function(){this.e={};this.la=this.d=this.b.length=0};
m.remove=function(a){return Object.prototype.hasOwnProperty.call(this.e,a)?(delete this.e[a],this.d--,this.la++,this.b.length>2*this.d&&Cc(this),!0):!1};function Cc(a){if(a.d!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Object.prototype.hasOwnProperty.call(a.e,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.d!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Object.prototype.hasOwnProperty.call(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}
m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.e,a)?this.e[a]:b};m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.e,a)||(this.d++,this.b.push(a),this.la++);this.e[a]=b};m.Da=function(a){var b;a instanceof U?(b=a.Z(),a=a.B()):(b=La(a),a=Ka(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};m.pa=function(){return new U(this)};
m.v=function(a){Cc(this);var b=0,c=this.b,d=this.e,e=this.la,f=this,g=new zc;g.next=function(){for(;;){if(e!=f.la)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw yc;var g=c[b++];return a?g:d[g]}};return g};function Dc(a,b,c){this.N=a;this.ac=b;this.yb=c;this.n=0;this.l=[];this.k=null;this.w=this.J=this.i=0};function V(){Pb.call(this);this.m="io.parserFSM";this.$a=!1}z(V,Pb);
V.prototype.parse=function(a){pa(this.m+".parse");this.k=a.l[0].k;this.dispatchEvent(new K(a,20));var b=this.Wa();this.dispatchEvent(new K(a,20));var c=L(this,"float",3*b.vertex_count),d=L(this,"uint",3*b.face_count);this.dispatchEvent(new K(a,50));for(var e=L(this,"uchar",this.k.byteLength-this.ea),f=null,g=0;g<e.length;g++)if(99==e[g]&&114==e[g+1]&&97==e[g+2]&&115==e[g+3]){for(var h=f=g+9;10!=e[g]&&g<e.length;)h++,g++;f=e.subarray(f,h);g=e=void 0;void 0===e&&(e=0);void 0===g&&(g=f.length);for(var h=
"",l=0,l=e;l<g;++l)h+=String.fromCharCode(f[l]);f=h.split(" ");break}f&&(e=b.xyz_to_ras,g=b.xyz_to_ras[1]*parseFloat(f[0])+b.xyz_to_ras[5]*parseFloat(f[1])+b.xyz_to_ras[9]*parseFloat(f[2])+b.xyz_to_ras[13],h=b.xyz_to_ras[2]*parseFloat(f[0])+b.xyz_to_ras[6]*parseFloat(f[1])+b.xyz_to_ras[10]*parseFloat(f[2])+b.xyz_to_ras[14],l=b.xyz_to_ras[3]*parseFloat(f[0])+b.xyz_to_ras[7]*parseFloat(f[1])+b.xyz_to_ras[11]*parseFloat(f[2])+b.xyz_to_ras[15],e[12]=b.xyz_to_ras[0]*parseFloat(f[0])+b.xyz_to_ras[4]*parseFloat(f[1])+
b.xyz_to_ras[8]*parseFloat(f[2])+b.xyz_to_ras[12],e[13]=g,e[14]=h,e[15]=l,b.xyz_to_ras=e);this.dispatchEvent(new K(a,10));a.k={header:b,data:{vertices:c,faces:d}};qa(this.m+".parse");this.dispatchEvent(new Ob(a))};V.prototype.Wa=function(){var a=0,b;do b=L(this,"uchar"),a++;while(200>a&&10!=b);L(this,"uchar");return{vertex_count:L(this,"uint"),face_count:L(this,"uint"),xyz_to_ras:tc()}};y("X.io.parserFSM",V);y("X.io.parserFSM.prototype.parse",V.prototype.parse);function Ec(a){A.call(this);this.Oa=a;this.b={}}z(Ec,A);var Fc=[];m=Ec.prototype;m.Sa=function(a,b,c,d,e){t(b)||(Fc[0]=b,b=Fc);for(var f=0;f<b.length;f++){var g=I(a,b[f],c||this,d||!1,e||this.Oa||this);this.b[g.key]=g}return this};m.Ta=function(a,b,c,d,e){if(t(b))for(var f=0;f<b.length;f++)this.Ta(a,b[f],c,d,e);else a=Ab(a,b,c||this,d,e||this.Oa||this),this.b[a.key]=a;return this};
m.ka=function(a,b,c,d,e){if(t(b))for(var f=0;f<b.length;f++)this.ka(a,b[f],c,d,e);else{a:if(e=e||this.Oa||this,d=!!d,c=wb(c||this),Ha(a))a=a.p[b],b=-1,a&&(b=Lb(a,c,d,e)),e=-1<b?a[b]:null;else{if(a=Cb(a,b,d))for(b=0;b<a.length;b++)if(!a[b].q&&a[b].t==c&&a[b].capture==d&&a[b].R==e){e=a[b];break a}e=null}e&&(Db(e),delete this.b[e.key])}return this};m.tb=function(){var a=this.b,b=Db,c;for(c in a)b.call(void 0,a[c],c,a);this.b={}};m.f=function(){Ec.s.f.call(this);this.tb()};
m.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Gc(a){if("function"==typeof a.B)return a.B();if(v(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ka(a)}function Hc(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ja(a)||v(a))lb(a,b,c);else{var d;if("function"==typeof a.Z)d=a.Z();else if("function"!=typeof a.B)if(ja(a)||v(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=La(a);else d=void 0;for(var e=Gc(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};var Ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),Jc=D;function Kc(a,b){if(Jc){Jc=!1;var c=s.location;if(c){var d=c.href;if(d&&(d=(d=Kc(3,d))&&decodeURIComponent(d))&&d!=c.hostname)throw Jc=!0,Error();}}return b.match(Ic)[a]||null};function Lc(){}Lc.prototype.oa=null;var Mc;function Nc(){}z(Nc,Lc);function Oc(a){return(a=Pc(a))?new ActiveXObject(a):new XMLHttpRequest}function Qc(a){var b={};Pc(a)&&(b[0]=!0,b[1]=!0);return b}
function Pc(a){if(!a.kb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.kb=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.kb}Mc=new Nc;function Rc(a){this.e=new U;a&&this.Da(a)}function Sc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+w(a):b.substr(0,1)+a}m=Rc.prototype;m.g=function(){return this.e.g()};m.add=function(a){this.e.set(Sc(a),a)};m.Da=function(a){a=Gc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.tb=function(a){a=Gc(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};m.remove=function(a){return this.e.remove(Sc(a))};m.clear=function(){this.e.clear()};m.L=function(){return this.e.L()};m.B=function(){return this.e.B()};
m.pa=function(){return new Rc(this)};m.v=function(){return this.e.v(!1)};function Tc(){};function Uc(a){J.call(this);this.headers=new U;this.da=a||null;this.K=!1;this.Ba=this.a=null;this.mb=this.wa="";this.$=0;this.ia="";this.S=this.Qa=this.va=this.Na=!1;this.M=0;this.V=null;this.aa=Vc;this.Yb=!1}z(Uc,J);var Vc="",Wc=/^https?$/i,Xc=["POST","PUT"];m=Uc.prototype;m.wb=function(a){this.M=Math.max(0,a)};
m.send=function(a,b,c,d){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.wa+"; newUri="+a);b=b?b.toUpperCase():"GET";this.wa=a;this.ia="";this.$=0;this.mb=b;this.Na=!1;this.K=!0;this.a=this.da?Oc(this.da):Oc(Mc);this.Ba=this.da?this.da.oa||(this.da.oa=Qc(this.da)):Mc.oa||(Mc.oa=Qc(Mc));this.a.onreadystatechange=x(this.rb,this);try{Tc(W(this,"Opening Xhr")),this.Qa=!0,this.a.open(b,a,!0),this.Qa=!1}catch(e){Tc(W(this,"Error opening Xhr: "+e.message));Yc(this,e);
return}a=c||"";var f=this.headers.pa();d&&Hc(d,function(a,b){f.set(b,a)});d=mb(f.Z());c=s.FormData&&a instanceof s.FormData;!(0<=kb(Xc,b))||(d||c)||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Hc(f,function(a,b){this.a.setRequestHeader(b,a)},this);this.aa&&(this.a.responseType=this.aa);"withCredentials"in this.a&&(this.a.withCredentials=this.Yb);try{this.V&&(s.clearTimeout(this.V),this.V=null),0<this.M&&(Tc(W(this,"Will abort after "+this.M+"ms if incomplete")),this.V=s.setTimeout(x(this.Wb,
this),this.M)),Tc(W(this,"Sending request")),this.va=!0,this.a.send(a),this.va=!1}catch(g){Tc(W(this,"Send error: "+g.message)),Yc(this,g)}};function nb(a){return"content-type"==a.toLowerCase()}m.Wb=function(){"undefined"!=typeof ba&&this.a&&(this.ia="Timed out after "+this.M+"ms, aborting",this.$=8,W(this,this.ia),this.dispatchEvent("timeout"),this.abort(8))};function Yc(a,b){a.K=!1;a.a&&(a.S=!0,a.a.abort(),a.S=!1);a.ia=b;a.$=5;Zc(a);$c(a)}
function Zc(a){a.Na||(a.Na=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.a&&this.K&&(W(this,"Aborting"),this.K=!1,this.S=!0,this.a.abort(),this.S=!1,this.$=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),$c(this))};m.f=function(){this.a&&(this.K&&(this.K=!1,this.S=!0,this.a.abort(),this.S=!1),$c(this,!0));Uc.s.f.call(this)};m.rb=function(){this.Qa||this.va||this.S?ad(this):this.Nb()};m.Nb=function(){ad(this)};
function ad(a){if(a.K&&"undefined"!=typeof ba)if(a.Ba[1]&&4==bd(a)&&2==cd(a))W(a,"Local request error detected and ignored");else if(a.va&&4==bd(a))s.setTimeout(x(a.rb,a),0);else if(a.dispatchEvent("readystatechange"),4==bd(a)){W(a,"Request complete");a.K=!1;try{if(dd(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.$=6;var b;try{b=2<bd(a)?a.a.statusText:""}catch(c){b=""}a.ia=b+" ["+cd(a)+"]";Zc(a)}}finally{$c(a)}}}
function $c(a,b){if(a.a){var c=a.a,d=a.Ba[0]?ca:null;a.a=null;a.Ba=null;a.V&&(s.clearTimeout(a.V),a.V=null);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function dd(a){var b=cd(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=Kc(1,String(a.wa)),!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Wc.test(a?a.toLowerCase():"");c=b}return c}
function bd(a){return a.a?a.a.readyState:0}function cd(a){try{return 2<bd(a)?a.a.status:-1}catch(b){return-1}}function ed(a){try{if(!a.a)return null;if("response"in a.a)return a.a.response;switch(a.aa){case Vc:case "text":return a.a.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.a)return a.a.mozResponseArrayBuffer}return null}catch(b){return null}}function W(a,b){return b+" ["+a.mb+" "+a.wa+" "+cd(a)+"]"};function fd(){this.P=[]}m=fd.prototype;m.C=0;m.U=0;m.qa=function(a){this.P[this.U++]=a};m.X=function(){if(this.C!=this.U){var a=this.P[this.C];delete this.P[this.C];this.C++;return a}};m.g=function(){return this.U-this.C};m.L=function(){return 0==this.U-this.C};m.clear=function(){this.U=this.C=this.P.length=0};m.remove=function(a){a=kb(this.P,a);if(0>a)return!1;a==this.C?this.X():(F.splice.call(this.P,a,1),this.U--);return!0};m.B=function(){return this.P.slice(this.C,this.U)};function gd(a,b){A.call(this);this.ob=a||0;this.ya=b||10;if(this.ob>this.ya)throw Error(hd);this.A=new fd;this.D=new Rc;this.La=0;this.Ra=null;this.ma()}z(gd,A);var hd="[goog.structs.Pool] Min can not be greater than max";m=gd.prototype;m.ta=function(){var a=oa();if(!(null!=this.Ra&&a-this.Ra<this.La)){for(var b;0<this.A.g()&&(b=this.A.X(),!this.Ua(b));)this.ma();!b&&this.g()<this.ya&&(b=this.Ia());b&&(this.Ra=a,this.D.add(b));return b}};
m.fa=function(a){this.D.remove(a);this.Ua(a)&&this.g()<this.ya?this.A.qa(a):id(a)};m.ma=function(){for(var a=this.A;this.g()<this.ob;)a.qa(this.Ia());for(;this.g()>this.ya&&0<this.A.g();)id(a.X())};m.Ia=function(){return{}};function id(a){if("function"==typeof a.Y)a.Y();else for(var b in a)a[b]=null}m.Ua=function(a){return"function"==typeof a.Cb?a.Cb():!0};m.g=function(){return this.A.g()+this.D.g()};m.L=function(){return this.A.L()&&this.D.L()};
m.f=function(){gd.s.f.call(this);if(0<this.D.g())throw Error("[goog.structs.Pool] Objects not released");delete this.D;for(var a=this.A;!a.L();)id(a.X());delete this.A};function jd(a,b){this.lb=a;this.Ya=b}jd.prototype.getKey=aa("lb");jd.prototype.pa=function(){return new jd(this.lb,this.Ya)};function kd(a){this.u=[];if(a)a:{var b,c;if(a instanceof kd){if(b=a.Z(),c=a.B(),0>=a.g()){a=this.u;for(var d=0;d<b.length;d++)a.push(new jd(b[d],c[d]));break a}}else b=La(a),c=Ka(a);for(d=0;d<b.length;d++)ld(this,b[d],c[d])}}function ld(a,b,c){var d=a.u;d.push(new jd(b,c));b=d.length-1;a=a.u;for(c=a[b];0<b;)if(d=b-1>>1,a[d].getKey()>c.getKey())a[b]=a[d],b=d;else break;a[b]=c}m=kd.prototype;
m.remove=function(){var a=this.u,b=a.length,c=a[0];if(!(0>=b)){if(1==b)ob(a);else{a[0]=a.pop();for(var a=0,b=this.u,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].getKey()<b[f].getKey()?g:f;if(b[f].getKey()>e.getKey())break;b[a]=b[f];a=f}b[a]=e}return c.Ya}};m.B=function(){for(var a=this.u,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].Ya);return b};m.Z=function(){for(var a=this.u,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].getKey());return b};m.pa=function(){return new kd(this)};m.g=function(){return this.u.length};
m.L=function(){return 0==this.u.length};m.clear=function(){ob(this.u)};function md(){kd.call(this)}z(md,kd);md.prototype.qa=function(a,b){ld(this,a,b)};md.prototype.X=function(){return this.remove()};function Y(a,b){this.za=new md;gd.call(this,a,b)}z(Y,gd);m=Y.prototype;m.ta=function(a,b){if(!a){var c=Y.s.ta.call(this);c&&this.La&&(this.Ib=s.setTimeout(x(this.ua,this),this.La));return c}this.za.qa(void 0!==b?b:100,a);this.ua()};m.ua=function(){for(var a=this.za;0<a.g();){var b=this.ta();if(b)a.X().apply(this,[b]);else break}};m.fa=function(a){Y.s.fa.call(this,a);this.ua()};m.ma=function(){Y.s.ma.call(this);this.ua()};
m.f=function(){Y.s.f.call(this);s.clearTimeout(this.Ib);this.za.clear();this.za=null};function nd(a,b,c){Y.call(this,b,c);this.Pa=a}z(nd,Y);nd.prototype.Ia=function(){var a=new Uc,b=this.Pa;b&&Hc(b,function(b,d){a.headers.set(d,b)});return a};nd.prototype.Ua=function(a){return!a.Ma&&!a.a};function od(a,b,c,d,e){J.call(this);this.ja=void 0!==a?a:1;this.M=void 0!==e?Math.max(0,e):0;this.ca=new nd(b,c,d);this.r=new U;this.ha=new Ec(this)}z(od,J);var pd="ready complete success error abort timeout".split(" ");m=od.prototype;m.wb=function(a){this.M=Math.max(0,a)};m.send=function(a,b,c,d,e,f,g,h,l){if(this.r.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new qd(b,x(this.Lb,this,a),c,d,e,g,void 0!==h?h:this.ja,l);this.r.set(a,b);a=x(this.Kb,this,a);this.ca.ta(a,f);return b};
m.abort=function(a,b){var c=this.r.get(a);if(c){var d=c.ba;c.ab=!0;b&&(d&&(this.ha.ka(d,pd,c.Aa),Ab(d,"ready",function(){var a=this.ca;a.D.remove(d)&&a.fa(d)},!1,this)),this.r.remove(a));d&&d.abort()}};m.Kb=function(a,b){var c=this.r.get(a);c&&!c.ba?(this.ha.Sa(b,pd,c.Aa),b.wb(this.M),b.aa=c.aa,c.ba=b,this.dispatchEvent(new rd("ready",this,a,b)),sd(this,a,b),c.ab&&b.abort()):(c=this.ca,c.D.remove(b)&&c.fa(b))};
m.Lb=function(a,b){var c=b.target;switch(b.type){case "ready":sd(this,a,c);break;case "complete":a:{var d=this.r.get(a);if(7==c.$||dd(c)||d.na>d.ja)if(this.dispatchEvent(new rd("complete",this,a,c)),d&&(d.eb=!0,d.Ha)){c=d.Ha.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new rd("success",this,a,c));break;case "timeout":case "error":d=this.r.get(a);d.na>d.ja&&this.dispatchEvent(new rd("error",this,a,c));break;case "abort":this.dispatchEvent(new rd("abort",this,a,c))}return null};
function sd(a,b,c){var d=a.r.get(b);!d||d.eb||d.na>d.ja?(d&&(a.ha.ka(c,pd,d.Aa),a.r.remove(b)),a=a.ca,a.D.remove(c)&&a.fa(c)):(d.na++,c.send(d.Xb,d.Mb,d.Eb,d.Pa))}m.f=function(){od.s.f.call(this);this.ca.Y();this.ca=null;this.ha.Y();this.ha=null;var a=this.r;Hc(a,function(a){a.Y()});a.clear();this.r=null};function rd(a,b,c,d){G.call(this,a,b);this.id=c;this.ba=d}z(rd,G);
function qd(a,b,c,d,e,f,g,h){A.call(this);this.Xb=a;this.Mb=c||"GET";this.Eb=d;this.Pa=e||null;this.ja=void 0!==g?g:1;this.na=0;this.ab=this.eb=!1;this.Aa=b;this.Ha=f;this.aa=h||Vc;this.ba=null}z(qd,A);qd.prototype.f=function(){qd.s.f.call(this);delete this.Aa;delete this.Ha};var td={DICOM:{H:"arraybuffer",F:T},NII:{H:"arraybuffer",F:T},GZ:{H:"arraybuffer",F:T},FSM:{H:"arraybuffer",F:V},INFLATED:{H:"arraybuffer",F:V},SMOOTHWM:{H:"arraybuffer",F:V},SPHERE:{H:"arraybuffer",F:V},PIAL:{H:"arraybuffer",F:V},ORIG:{H:"arraybuffer",F:V}};y("X.io.extensions",td);function Z(){this.Ca=new od;I(this.Ca,"success",Z.prototype.Qb.bind(this));I(this.Ca,"ready",Z.prototype.Pb.bind(this));this.I=new U;this.l=new U;this.w=this.i=0}m=Z.prototype;
m.load=function(a,b){var c=a;t(a)?c=a[0]:a=[a];var d=c.split(".").pop().toUpperCase();null!=b&&(d=b.toUpperCase());if(!(d in td))throw Error("The "+d+" file format is not supported.");for(var e=new Dc(c,d,td[d].F),f=a.length,g=0;g<f;g++){var g=a[g],h=new xc(e,g);this.l.set(g,h);e.l.push(h);this.Ca.send(g,g,void 0,void 0,void 0,void 0,void 0,void 0,td[d].H)}this.I.set(c,e);return c};m.Pb=function(a){Ab(a.ba,"readystatechange",Z.prototype.Ob.bind(this,a.id))};
m.Ob=function(a,b){var c=this.l.get(a);c.n=1;c.O.n=1;I(b.target.a,"progress",Z.prototype.Rb.bind(this,a))};m.Rb=function(a,b){var c=this.l.get(a);c.J=b.ra.total;c.i=b.ra.loaded;c=c.O;c.J=0;c.i=0;for(var d=c.l.length,e=0;e<d;e++)e=c.l[e],c.J+=e.J,c.i+=e.i;d=Math.floor(100*(c.i/c.J));eval("X.io.onloading('"+c.N+"',"+d+")");var f=0,g=0,c=this.I.v(!1);Bc(c,function(a){f+=a.J;g+=a.i}.bind(this));d=Math.floor(100*(g/f));d>this.i&&(this.i=d,eval("X.io.onloading(null,"+this.i+")"))};
m.Qb=function(a){var b=this.l.get(a.id);b.n=2;b.k=ed(a.ba);a=b.O;for(var b=a.l.length,c=0;c<b;c++)if(c=a.l[c],2!=c.n)return;a.n=2;eval("X.io.onload('"+a.N+"')");setTimeout(Z.prototype.Ub.bind(this,a.N),100);var d=!0;a=this.I.v(!1);Bc(a,function(a){1==a.n&&(d=!1)}.bind(this));d&&(this.i=0,eval("X.io.onload(null)"))};m.Ub=function(a){a=this.I.get(a);a.n=3;var b=new a.yb;I(b,"a",Z.prototype.Tb.bind(this));Ab(b,"b",Z.prototype.Sb.bind(this));setTimeout(b.parse.bind(b,a),100)};
m.Tb=function(a){var b=a.O;b.w+=a.zb;eval("X.io.onparsing('"+b.N+"',"+b.w+")");var c=0;a=this.I.v(!1);Bc(a,function(a){c+=a.w}.bind(this));c=Math.floor(c/this.I.g());c>this.w&&(this.w=c,eval("X.io.onparsing(null,"+this.w+")"))};m.Sb=function(a){a=a.O;a.n=4;eval("X.io.onparse('"+a.N+"')");var b=!0;a=this.I.v(!1);Bc(a,function(a){4!=a.n&&(b=!1)}.bind(this));b&&(this.w=0,eval("X.io.onparse(null)"),eval("X.io.oncomplete()"))};
m.get=function(a){var b=this.I.get(a);if(!b)throw Error("Job "+a+" could not be found.");if(4!=b.n)throw Error("Job "+a+" is not fully parsed yet.");return b.k};var ud=new Z;y("X.io.load",ud.load.bind(ud));y("X.io.get",ud.get.bind(ud));}).call(this);
