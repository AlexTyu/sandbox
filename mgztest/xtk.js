/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function g(a){throw a;}var o=void 0,p=!0,q=null,r=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var w,ca=this;function ga(){}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return a!==o}function x(a){return a!=q}function ja(a){return"array"==ha(a)}function ka(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){return"string"==typeof a}function z(a){return"number"==typeof a}function na(a){return"function"==ha(a)}function oa(a){a=ha(a);return"object"==a||"array"==a||"function"==a}function qa(a){return a[ra]||(a[ra]=++sa)}
var ra="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),sa=0;function ua(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function wa(a,b,c){wa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua:va;return wa.apply(q,arguments)}function xa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=ca;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ia(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function C(a,b){function c(){}c.prototype=b.prototype;a.D=b.prototype;a.prototype=new c};window["X.Counter"]=function(){var a=0;return{Kd:function(){a+=1},ii:function(){a+=-1},value:function(){return a}}}();
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&g(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});A("Function.prototype.bind",Function.prototype.bind);function za(a){if(!Aa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ba,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ca,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Da,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ea,"&quot;"));return a}var Ba=/&/g,Ca=/</g,Da=/>/g,Ea=/\"/g,Aa=/[&<>\"]/;var Fa,Ga,Ha,Ia,Ja,Ka,La;function Na(){return ca.navigator?ca.navigator.userAgent:q}function Oa(){return ca.navigator}Ja=Ia=Ha=Ga=Fa=r;var Pa;if(Pa=Na()){var Qa=Oa();Fa=0==Pa.indexOf("Opera");Ga=!Fa&&-1!=Pa.indexOf("MSIE");Ia=(Ha=!Fa&&-1!=Pa.indexOf("WebKit"))&&-1!=Pa.indexOf("Mobile");Ja=!Fa&&!Ha&&"Gecko"==Qa.product}var Ra=Fa,G=Ga,Sa=Ja,H=Ha,Ta=Ia,Ua,Va=Oa();Ua=Va&&Va.platform||"";Ka=-1!=Ua.indexOf("Mac");La=-1!=Ua.indexOf("Win");var Wa=!!Oa()&&-1!=(Oa().appVersion||"").indexOf("X11"),Xa;
a:{var Ya="",Za;if(Ra&&ca.opera)var $a=ca.opera.version,Ya="function"==typeof $a?$a():$a;else if(Sa?Za=/rv\:([^\);]+)(\)|;)/:G?Za=/MSIE\s+([^\);]+)(\)|;)/:H&&(Za=/WebKit\/(\S+)/),Za)var ab=Za.exec(Na()),Ya=ab?ab[1]:"";if(G){var bb,cb=ca.document;bb=cb?cb.documentMode:o;if(bb>parseFloat(Ya)){Xa=""+bb;break a}}Xa=Ya}var eb={};
function fb(a){var b;if(!(b=eb[a])){b=0;for(var c=(""+Xa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",i=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=k.exec(h)||["","",""],l=m.exec(i)||["","",""];if(0==n[0].length&&0==l[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==l[1].length?0:parseInt(l[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==l[1].length?0:parseInt(l[1],10))?1:0)||((0==n[2].length)<(0==l[2].length)?-1:(0==n[2].length)>(0==l[2].length)?1:0)||(n[2]<l[2]?-1:n[2]>l[2]?1:0)}while(0==b)}b=eb[a]=0<=b}return b}var gb={};function hb(a){return gb[a]||(gb[a]=G&&document.documentMode&&document.documentMode>=a)};function ib(a,b){for(var c in a)b.call(o,a[c],c,a)}function jb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function kb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var lb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function mb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<lb.length;f++)c=lb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var nb=Array.prototype,ob=nb.indexOf?function(a,b,c){return nb.indexOf.call(a,b,c)}:function(a,b,c){c=c==q?0:0>c?Math.max(0,a.length+c):c;if(y(a))return!y(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},pb=nb.forEach?function(a,b,c){nb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},qb=nb.map?function(a,b,c){return nb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=y(a)?
a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},sb=nb.some?function(a,b,c){return nb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return p;return r},tb=nb.every?function(a,b,c){return nb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return r;return p};function ub(a,b){var c=ob(a,b);0<=c&&nb.splice.call(a,c,1)}
function vb(a){return nb.concat.apply(nb,arguments)}function wb(a){if(ja(a))return vb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function xb(a,b,c){return 2>=arguments.length?nb.slice.call(a,b):nb.slice.call(a,b,c)};function yb(a){if("function"==typeof a.O)a=a.O();else if(ka(a)||y(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function zb(a){if("function"==typeof a.ha)return a.ha();if(y(a))return a.split("");if(ka(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return jb(a)}
function Ab(a,b){if("function"==typeof a.every)return a.every(b,o);if(ka(a)||y(a))return tb(a,b,o);var c;if("function"==typeof a.Zb)c=a.Zb();else if("function"!=typeof a.ha)if(ka(a)||y(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=kb(a);else c=o;for(var d=zb(a),e=d.length,f=0;f<e;f++)if(!b.call(o,d[f],c&&c[f],a))return r;return p};var Bb="StopIteration"in ca?ca.StopIteration:Error("StopIteration");function Cb(){}Cb.prototype.next=function(){g(Bb)};Cb.prototype.Eb=function(){return this};function Db(a){if(a instanceof Cb)return a;if("function"==typeof a.Eb)return a.Eb(r);if(ka(a)){var b=0,c=new Cb;c.next=function(){for(;;){b>=a.length&&g(Bb);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))}
function Eb(a,b){if(ka(a))try{pb(a,b,o)}catch(c){c!==Bb&&g(c)}else{a=Db(a);try{for(;;)b.call(o,a.next(),o,a)}catch(d){d!==Bb&&g(d)}}};function Fb(a,b){this.r={};this.n=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.wd(a)}w=Fb.prototype;w.g=0;w.mc=0;w.O=t("g");w.ha=function(){Gb(this);for(var a=[],b=0;b<this.n.length;b++)a.push(this.r[this.n[b]]);return a};w.Zb=function(){Gb(this);return this.n.concat()};w.Ad=function(a){for(var b=0;b<this.n.length;b++){var c=this.n[b];if(Hb(this.r,c)&&this.r[c]==a)return p}return r};
w.Vb=function(a,b){if(this===a)return p;if(this.g!=a.O())return r;var c=b||Ib;Gb(this);for(var d,e=0;d=this.n[e];e++)if(!c(this.get(d),a.get(d)))return r;return p};function Ib(a,b){return a===b}w.clear=function(){this.r={};this.mc=this.g=this.n.length=0};w.remove=function(a){return Hb(this.r,a)?(delete this.r[a],this.g--,this.mc++,this.n.length>2*this.g&&Gb(this),p):r};
function Gb(a){if(a.g!=a.n.length){for(var b=0,c=0;b<a.n.length;){var d=a.n[b];Hb(a.r,d)&&(a.n[c++]=d);b++}a.n.length=c}if(a.g!=a.n.length){for(var e={},c=b=0;b<a.n.length;)d=a.n[b],Hb(e,d)||(a.n[c++]=d,e[d]=1),b++;a.n.length=c}}w.get=function(a,b){return Hb(this.r,a)?this.r[a]:b};w.set=function(a,b){Hb(this.r,a)||(this.g++,this.n.push(a),this.mc++);this.r[a]=b};w.wd=function(a){var b;a instanceof Fb?(b=a.Zb(),a=a.ha()):(b=kb(a),a=jb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};w.d=function(){return new Fb(this)};
w.Eb=function(a){Gb(this);var b=0,c=this.n,d=this.r,e=this.mc,f=this,h=new Cb;h.next=function(){for(;;){e!=f.mc&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(Bb);var h=c[b++];return a?h:d[h]}};return h};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Jb(a){this.r=new Fb;a&&this.wd(a)}function Kb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+qa(a):b.substr(0,1)+a}w=Jb.prototype;w.O=function(){return this.r.O()};w.add=function(a){this.r.set(Kb(a),a)};w.wd=function(a){for(var a=zb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};w.Vc=function(a){for(var a=zb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};w.remove=function(a){return this.r.remove(Kb(a))};w.clear=function(){this.r.clear()};
w.contains=function(a){a=Kb(a);return Hb(this.r.r,a)};w.Qe=function(a){for(var b=new Jb,a=zb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};w.ha=function(){return this.r.ha()};w.d=function(){return new Jb(this)};w.Vb=function(a){return this.O()==yb(a)&&Lb(this,a)};
function Lb(a,b){var c=yb(b);if(a.O()>c)return r;!(b instanceof Jb)&&5<c&&(b=new Jb(b));return Ab(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.Ad)a=b.Ad(a);else if(ka(b)||y(b))a=0<=ob(b,a);else a:{for(var c in b)if(b[c]==a){a=p;break a}a=r}return a})}w.Eb=function(){return this.r.Eb(r)};function Ob(){}Ob.prototype.De=r;Ob.prototype.ga=function(){this.De||(this.De=p,this.u())};Ob.prototype.u=function(){this.Yf&&Pb.apply(q,this.Yf)};function Qb(a){a&&"function"==typeof a.ga&&a.ga()}function Pb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ka(d)?Pb.apply(q,d):Qb(d)}};function Rb(a,b){this.We=b;this.Yb=[];a>this.We&&g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Yb.push(this.Cc())}C(Rb,Ob);w=Rb.prototype;w.Ae=q;w.Ce=q;function Sb(a,b){a.Yb.length<a.We?a.Yb.push(b):a.Ed(b)}w.Cc=function(){return this.Ae?this.Ae():{}};w.Ed=function(a){if(this.Ce)this.Ce(a);else if(oa(a))if(na(a.ga))a.ga();else for(var b in a)delete a[b]};w.u=function(){Rb.D.u.call(this);for(var a=this.Yb;a.length;)this.Ed(a.pop());delete this.Yb};function Tb(){this.Wb=[];this.Ud=new Fb;this.zf=this.Af=this.Bf=this.wf=0;this.lc=new Fb;this.xe=this.yf=0;this.Qd=1;this.Fd=new Rb(0,4E3);this.Fd.Cc=function(){return new Ub};this.xf=new Rb(0,50);this.xf.Cc=function(){return new Vb};var a=this;this.Id=new Rb(0,2E3);this.Id.Cc=function(){return""+a.Qd++};this.Id.Ed=aa()}function Vb(){this.he=this.time=this.count=0}
Vb.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.he&&a.push(" [VarAlloc = ",this.he,"]");return a.join("")};function Ub(){}function Wb(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(Xb(a.Fe-c));e.push(" ",Yb(a.Fe-b));0==a.Gd?e.push(" Start        "):1==a.Gd?(e.push(" Done "),e.push(Xb(a.mi-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.Ah&&e.push("[VarAlloc ",a.Ah,"] ");return e.join("")}
Ub.prototype.toString=function(){return this.type==q?this.Wf:"["+this.type+"] "+this.Wf};Tb.prototype.reset=function(){for(var a=0;a<this.Wb.length;a++){var b=this.Fd.id;b&&Sb(this.Id,b);Sb(this.Fd,this.Wb[a])}this.Wb.length=0;this.Ud.clear();this.wf=ya();this.xe=this.yf=this.zf=this.Af=this.Bf=0;b=this.lc.Zb();for(a=0;a<b.length;a++){var c=this.lc.get(b[a]);c.count=0;c.time=0;c.he=0;Sb(this.xf,c)}this.lc.clear()};
Tb.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Wb.length;d++){var e=this.Wb[d];1==e.Gd&&c.pop();a.push(" ",Wb(e,this.wf,b,c.join("")));b=e.Fe;a.push("\n");0==e.Gd&&c.push("|  ")}if(0!=this.Ud.O()){var f=ya();a.push(" Unstopped timers:\n");Eb(this.Ud,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Yb(b.startTime),")\n")})}b=this.lc.Zb();for(d=0;d<b.length;d++)c=this.lc.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.yf,"\n","Total comments created ",
this.xe,"\n","Overhead start: ",this.Bf," ms\n","Overhead end: ",this.Af," ms\n","Overhead comment: ",this.zf," ms\n");return a.join("")};function Xb(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Yb(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Tb;function Zb(){}var $b=0;w=Zb.prototype;w.key=0;w.yb=r;w.xd=r;w.ya=function(a,b,c,d,e,f){na(a)?this.Re=p:a&&a.handleEvent&&na(a.handleEvent)?this.Re=r:g(Error("Invalid listener argument"));this.dc=a;this.nf=b;this.src=c;this.type=d;this.capture=!!e;this.Hd=f;this.xd=r;this.key=++$b;this.yb=r};w.handleEvent=function(a){return this.Re?this.dc.call(this.Hd||this.src,a):this.dc.handleEvent.call(this.dc,a)};!G||hb(9);var ac=!G||hb(9),bc=G&&!fb("8");!H||fb("528");Sa&&fb("1.9b")||G&&fb("8")||Ra&&fb("9.5")||H&&fb("528");!Sa||fb("8");function cc(a,b){this.type=a;this.currentTarget=this.target=b}C(cc,Ob);w=cc.prototype;w.u=function(){delete this.type;delete this.target;delete this.currentTarget};w.ib=r;w.hc=p;w.stopPropagation=function(){this.ib=p};w.preventDefault=function(){this.hc=r};function dc(a){dc[" "](a);return a}dc[" "]=ga;function ec(a,b){a&&this.ya(a,b)}C(ec,cc);w=ec.prototype;w.target=q;w.relatedTarget=q;w.offsetX=0;w.offsetY=0;w.clientX=0;w.clientY=0;w.screenX=0;w.screenY=0;w.button=0;w.keyCode=0;w.charCode=0;w.ctrlKey=r;w.altKey=r;w.shiftKey=r;w.metaKey=r;w.pa=q;
w.ya=function(a,b){var c=this.type=a.type;cc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Sa){var e;a:{try{dc(d.nodeName);e=p;break a}catch(f){}e=r}e||(d=q)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=H||a.offsetX!==o?a.offsetX:a.layerX;this.offsetY=H||a.offsetY!==o?a.offsetY:a.layerY;this.clientX=a.clientX!==o?a.clientX:a.pageX;this.clientY=a.clientY!==o?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.pa=a;delete this.hc;delete this.ib};w.stopPropagation=function(){ec.D.stopPropagation.call(this);this.pa.stopPropagation?this.pa.stopPropagation():this.pa.cancelBubble=p};
w.preventDefault=function(){ec.D.preventDefault.call(this);var a=this.pa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=r,bc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};w.hg=t("pa");w.u=function(){ec.D.u.call(this);this.relatedTarget=this.currentTarget=this.target=this.pa=q};var fc={},gc={},hc={},ic={};
function J(a,b,c,d,e){if(b){if(ja(b)){for(var f=0;f<b.length;f++)J(a,b[f],c,d,e);return q}var d=!!d,h=gc;b in h||(h[b]={g:0,$:0});h=h[b];d in h||(h[d]={g:0,$:0},h.g++);var h=h[d],i=qa(a),k;h.$++;if(h[i]){k=h[i];for(f=0;f<k.length;f++)if(h=k[f],h.dc==c&&h.Hd==e){if(h.yb)break;return k[f].key}}else k=h[i]=[],h.g++;f=jc();f.src=a;h=new Zb;h.ya(c,f,a,b,d,e);c=h.key;f.key=c;k.push(h);fc[c]=h;hc[i]||(hc[i]=[]);hc[i].push(h);a.addEventListener?(a==ca||!a.Be)&&a.addEventListener(b,f,d):a.attachEvent(b in
ic?ic[b]:ic[b]="on"+b,f);return c}g(Error("Invalid event type"))}function jc(){var a=kc,b=ac?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function lc(a,b,c,d,e){if(ja(b))for(var f=0;f<b.length;f++)lc(a,b[f],c,d,e);else a=J(a,b,c,d,e),fc[a].xd=p}
function nc(a,b,c,d,e){if(ja(b))for(var f=0;f<b.length;f++)nc(a,b[f],c,d,e);else{d=!!d;a:{f=gc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=qa(a),f[a]))){a=f[a];break a}a=q}if(a)for(f=0;f<a.length;f++)if(a[f].dc==c&&a[f].capture==d&&a[f].Hd==e){oc(a[f].key);break}}}
function oc(a){if(!fc[a])return r;var b=fc[a];if(b.yb)return r;var c=b.src,d=b.type,e=b.nf,f=b.capture;c.removeEventListener?(c==ca||!c.Be)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in ic?ic[d]:ic[d]="on"+d,e);c=qa(c);e=gc[d][f][c];if(hc[c]){var h=hc[c];ub(h,b);0==h.length&&delete hc[c]}b.yb=p;e.$e=p;pc(d,f,c,e);delete fc[a];return p}
function pc(a,b,c,d){if(!d.Oc&&d.$e){for(var e=0,f=0;e<d.length;e++)d[e].yb?d[e].nf.src=q:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.$e=r;0==f&&(delete gc[a][b][c],gc[a][b].g--,0==gc[a][b].g&&(delete gc[a][b],gc[a].g--),0==gc[a].g&&delete gc[a])}}function qc(a){var b,c=0,d=b==q;b=!!b;if(a==q)ib(hc,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)oc(f.key),c++}});else if(a=qa(a),hc[a])for(var a=hc[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)oc(f.key),c++}}
function rc(a){var b=sc,a=qa(a),c=hc[a];if(c){var d=ia(b),e=ia(o);return d&&e?(c=gc[b],!!c&&!!c[o]&&a in c[o]):!d&&!e?p:sb(c,function(a){return d&&a.type==b||e&&a.capture==o})}return r}function tc(a,b,c,d,e){var f=1,b=qa(b);if(a[b]){a.$--;a=a[b];a.Oc?a.Oc++:a.Oc=1;try{for(var h=a.length,i=0;i<h;i++){var k=a[i];k&&!k.yb&&(f&=uc(k,e)!==r)}}finally{a.Oc--,pc(c,d,b,a)}}return Boolean(f)}function uc(a,b){var c=a.handleEvent(b);a.xd&&oc(a.key);return c}
function kc(a,b){if(!fc[a])return p;var c=fc[a],d=c.type,e=gc;if(!(d in e))return p;var e=e[d],f,h;if(!ac){var i;if(!(i=b))a:{i=["window","event"];for(var k=ca;f=i.shift();)if(x(k[f]))k=k[f];else{i=q;break a}i=k}f=i;i=p in e;k=r in e;if(i){if(0>f.keyCode||f.returnValue!=o)return p;a:{var m=r;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(n){m=p}if(m||f.returnValue==o)f.returnValue=p}}m=new ec;m.ya(f,this);f=p;try{if(i){for(var l=[],j=m.currentTarget;j;j=j.parentNode)l.push(j);h=e[p];h.$=h.g;for(var s=
l.length-1;!m.ib&&0<=s&&h.$;s--)m.currentTarget=l[s],f&=tc(h,l[s],d,p,m);if(k){h=e[r];h.$=h.g;for(s=0;!m.ib&&s<l.length&&h.$;s++)m.currentTarget=l[s],f&=tc(h,l[s],d,r,m)}}else f=uc(c,m)}finally{l&&(l.length=0),m.ga()}return f}d=new ec(b,this);try{f=uc(c,d)}finally{d.ga()}return f}var vc=0;function wc(a){return a+"_"+vc++};function K(a,b,c){this.X=this.W=this.V=0;3==arguments.length?(this.V=Number(a),this.W=Number(b),this.X=Number(c)):"x"in a&&"y"in a&&"z"in a?(this.V=Number(a.x()),this.W=Number(a.y()),this.X=Number(a.b())):(this.V=Number(a[0]),this.W=Number(a[1]),this.X=Number(a[2]))}
K.prototype={d:function(){return new K(this.V,this.W,this.X)},Pc:function(){return new K(-this.V,-this.W,-this.X)},hb:function(a){return new K(this.V+a.x(),this.W+a.y(),this.X+a.b())},vb:function(a){return new K(this.V-a.x(),this.W-a.y(),this.X-a.b())},Ca:function(a){return new K(this.V*a,this.W*a,this.X*a)},Ee:function(a){return new K(this.V/a,this.W/a,this.X/a)},bb:function(a){return this.V*a.x()+this.W*a.y()+this.X*a.b()},Od:function(a,b){return this.hb(a.vb(this).Ca(b))},length:function(){return Math.sqrt(this.bb(this))},
Cb:function(){return this.Ee(this.length())},Dc:function(a){return new K(this.W*a.b()-this.X*a.y(),this.X*a.x()-this.V*a.b(),this.V*a.y()-this.W*a.x())},x:t("V"),y:t("W"),b:t("X")};A("csgVector",K);A("csgVector.prototype.clone",K.prototype.d);A("csgVector.prototype.plus",K.prototype.hb);A("csgVector.prototype.minus",K.prototype.vb);A("csgVector.prototype.dividedBy",K.prototype.Ee);A("csgVector.prototype.times",K.prototype.Ca);A("csgVector.prototype.dot",K.prototype.bb);
A("csgVector.prototype.lerp",K.prototype.Od);A("csgVector.prototype.length",K.prototype.length);A("csgVector.prototype.unit",K.prototype.Cb);A("csgVector.prototype.cross",K.prototype.Dc);A("csgVector.prototype.negated",K.prototype.Pc);A("csgVector.prototype.x",K.prototype.x);A("csgVector.prototype.y",K.prototype.y);A("csgVector.prototype.z",K.prototype.b);function xc(){this.Wc=o}
function yc(a,b,c){switch(typeof b){case "string":zc(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==q){c.push("null");break}if(ja(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],yc(a,a.Wc?a.Wc.call(b,""+f,e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),zc(f,c),c.push(":"),
yc(a,a.Wc?a.Wc.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var Ac={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Bc=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function zc(a,b){b.push('"',a.replace(Bc,function(a){if(a in Ac)return Ac[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return Ac[a]=e+b.toString(16)}),'"')};function Cc(){}C(Cc,Ob);w=Cc.prototype;w.Be=p;w.Qc=q;w.$d=ba("Qc");w.addEventListener=function(a,b,c,d){J(this,a,b,c,d)};w.removeEventListener=function(a,b,c,d){nc(this,a,b,c,d)};
w.dispatchEvent=function(a){var b=a.type||a,c=gc;if(b in c){if(y(a))a=new cc(a,this);else if(a instanceof cc)a.target=a.target||this;else{var d=a,a=new cc(b,this);mb(a,d)}var d=1,e,c=c[b],b=p in c,f;if(b){e=[];for(f=this;f;f=f.Qc)e.push(f);f=c[p];f.$=f.g;for(var h=e.length-1;!a.ib&&0<=h&&f.$;h--)a.currentTarget=e[h],d&=tc(f,e[h],a.type,p,a)&&a.hc!=r}if(r in c)if(f=c[r],f.$=f.g,b)for(h=0;!a.ib&&h<e.length&&f.$;h++)a.currentTarget=e[h],d&=tc(f,e[h],a.type,r,a)&&a.hc!=r;else for(e=this;!a.ib&&e&&f.$;e=
e.Qc)a.currentTarget=e,d&=tc(f,e,a.type,r,a)&&a.hc!=r;a=Boolean(d)}else a=p;return a};w.u=function(){Cc.D.u.call(this);qc(this);this.Qc=q};function L(){this._className="base";this.c=r}C(L,Cc);L.prototype.className=t("_className");L.prototype.print=function(){var a=Object.keys(this),b="",c="<unknown>",d=0;for(d in a){var e="this."+a[d],f=eval(e);"this._className"==e?c=f:b+=e+": "+f+"\n"}return"== X."+c+" ==\n"+b};L.prototype.bg=t("c");function Dc(a){a.c=r}A("X.base",L);A("X.base.prototype.className",L.prototype.className);A("X.base.prototype.print",L.prototype.print);A("X.base.prototype.dirty",L.prototype.bg);function Ec(){L.call(this);this._className="indexer";this.vd=[];this.M={}}C(Ec,L);Ec.prototype.add=function(a){x(a)||g(Error("Invalid object."));var b;b=[];yc(new xc,a,b);b=b.join("");b in this.M||(this.M[b]=this.vd.length,this.vd.push(a));return this.M[b]};Ec.prototype.unique=t("vd");function Fc(a,b){this.P=new K(a);this.z=new K(b)}Fc.prototype={d:function(){return new Fc(this.P.d(),this.z.d())},xa:function(){this.z=this.z.Pc()},Pe:function(a,b){return new Fc(this.P.Od(a.P,b),this.z.Od(a.z,b))},Xg:t("P"),Rd:t("z")};A("csgVertex",Fc);A("csgVertex.prototype.clone",Fc.prototype.d);A("csgVertex.prototype.flip",Fc.prototype.xa);A("csgVertex.prototype.interpolate",Fc.prototype.Pe);A("csgVertex.prototype.pos",Fc.prototype.Xg);A("csgVertex.prototype.normal",Fc.prototype.Rd);function Gc(a){L.call(this);this._className="file";this.Lf=a;this.c=p}C(Gc,L);Gc.prototype.path=t("Lf");function Hc(){L.call(this);this._className="colorTable";this.M=new Fb;var a=window["X.Counter"];a.Kd();this._id=a.value();this.da=q}C(Hc,L);Hc.prototype.add=function(a,b,c,d,e,f){(!z(a)||!z(c)||!z(d)||!z(e)||!z(f))&&g(Error("Invalid color table entry."));this.M.set(a,[b,c,d,e,f]);this.c=p};Hc.prototype.id=t("_id");Hc.prototype.file=t("da");Hc.prototype.Zd=function(a){x(a)?(y(a)&&(a=new Gc(a)),this.da=a):this.da=q};function Ic(a,b){this.z=a;this.Db=b}Ic.prototype={d:function(){return new Ic(this.z.d(),this.Db)},xa:function(){this.z=this.z.Pc();this.Db=-this.Db},Hh:t("Db"),Rd:t("z")};A("csgPlane.prototype.w",Ic.prototype.Hh);A("csgPlane.prototype.normal",Ic.prototype.Rd);function Jc(a,b){this.ta=a;this.jc=b;var c=a[0].P,d=a[2].P,d=a[1].P.vb(c).Dc(d.vb(c)).Cb();this.T=new Ic(d,d.bb(c))}
Jc.prototype={d:function(){var a=this.ta.map(function(a){return a.d()});return new Jc(a,this.jc)},xa:function(){this.ta.reverse().map(function(a){a.xa()});this.T.xa()},Gh:t("ta"),rh:t("jc"),vf:function(a,b,c,d,e){for(var f=0,h=[],i=0;i<this.ta.length;i++){var k=a.z.bb(this.ta[i].P)-a.Db,k=-1.0E-5>k?2:1.0E-5<k?1:0,f=f|k;h.push(k)}switch(f){case 0:(0<a.z.bb(this.T.z)?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(i=0;i<this.ta.length;i++){var m=(i+1)%
this.ta.length,k=h[i],n=h[m],f=this.ta[i],m=this.ta[m];2!=k&&b.push(f);1!=k&&c.push(2!=k?f.d():f);3==(k|n)&&(k=(a.Db-a.z.bb(f.P))/a.z.bb(m.P.vb(f.P)),k=f.Pe(m,k),b.push(k),c.push(k.d()))}3<=b.length&&d.push(new Jc(b,this.jc));3<=c.length&&e.push(new Jc(c,this.jc))}}};A("csgPolygon",Jc);A("csgPolygon.prototype.clone",Jc.prototype.d);A("csgPolygon.prototype.flip",Jc.prototype.xa);A("csgPolygon.prototype.vertices",Jc.prototype.Gh);A("csgPolygon.prototype.shared",Jc.prototype.rh);function Kc(a){this.G=this.H=this.T=q;this.i=[];a&&this.rb(a)}
Kc.prototype={d:function(){var a=new Kc;a.mh(this.T&&this.T.d());a.jh(this.H&&this.H.d());a.eh(this.G&&this.G.d());a.ic(this.i.map(function(a){return a.d()}));return a},C:function(){for(var a=0;a<this.i.length;a++)this.i[a].xa();this.T.xa();this.H&&this.H.C();this.G&&this.G.C();a=this.H;this.H=this.G;this.G=a},zd:function(a){if(!this.T)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].vf(this.T,b,c,b,c);this.H&&(b=this.H.zd(b));c=this.G?this.G.zd(c):[];return b.concat(c)},fa:function(a){this.i=
a.zd(this.i);this.H&&this.H.fa(a);this.G&&this.G.fa(a)},Ra:function(){var a=this.i.slice();this.H&&(a=a.concat(this.H.Ra()));this.G&&(a=a.concat(this.G.Ra()));return a},rb:function(a){if(a.length){this.T||(this.T=a[0].T.d());for(var b=[],c=[],d=0;d<a.length;d++)a[d].vf(this.T,this.i,this.i,b,c);b.length&&(this.H||(this.H=new Kc),this.H.rb(b));c.length&&(this.G||(this.G=new Kc),this.G.rb(c))}},mh:ba("T"),jh:ba("H"),eh:ba("G"),mf:t("i"),ic:ba("i")};function M(){this.i=[]}function Lc(a){var b=new M;b.ic(a);return b}
M.prototype={d:function(){var a=new M;a.ic(this.i.map(function(a){return a.d()}));return a},zh:t("i"),ad:function(a){var b=new Kc(this.d().i),a=new Kc(a.d().i);b.fa(a);a.fa(b);a.C();a.fa(b);a.C();b.rb(a.Ra());return Lc(b.Ra())},sa:function(a){var b=new Kc(this.d().i),a=new Kc(a.d().i);b.C();b.fa(a);a.fa(b);a.C();a.fa(b);a.C();b.rb(a.Ra());b.C();return Lc(b.Ra())},Lc:function(a){var b=new Kc(this.d().i),a=new Kc(a.d().i);b.C();a.fa(b);a.C();b.fa(a);a.fa(b);b.rb(a.Ra());b.C();return Lc(b.Ra())},inverse:function(){var a=
this.d();a.i.map(function(a){a.xa()});return a},mf:t("i"),ic:ba("i")};A("CSG",M);A("CSG.fromPolygons",Lc);A("CSG.prototype.toPolygons",M.prototype.zh);A("CSG.prototype.union",M.prototype.ad);A("CSG.prototype.subtract",M.prototype.sa);A("CSG.prototype.intersect",M.prototype.Lc);A("CSG.prototype.inverse",M.prototype.inverse);A("CSG.prototype.polygons",M.prototype.mf);A("CSG.prototype.setPolygons",M.prototype.ic);function Mc(a,b,c){this.x=ia(a)?a:0;this.y=ia(b)?b:0;this.b=ia(c)?c:0}Mc.prototype.d=function(){return new Mc(this.x,this.y,this.b)};Mc.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.b+")"};Mc.prototype.fe=function(){return[this.x,this.y,this.b]};function P(a){L.call(this);this._className="triplets";this.Ia=this.La=this.Ha=this.Ka=this.Ga=this.Ja=q;this.nc=[0,0,0];this.Z=[];x(a)&&a instanceof P&&(this.Z=a.all().slice(),this.Ja=a.Ja,this.Ga=a.Ga,this.Ka=a.Ka,this.Ha=a.Ha,this.La=a.La,this.Ia=a.Ia,this.nc=a.nc.slice())}C(P,L);w=P.prototype;
w.add=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("Invalid triplet."));if(!this.Ja||a<this.Ja)this.Ja=a;if(!this.Ga||a>this.Ga)this.Ga=a;if(!this.Ka||b<this.Ka)this.Ka=b;if(!this.Ha||b>this.Ha)this.Ha=b;if(!this.La||c<this.La)this.La=c;if(!this.Ia||c>this.Ia)this.Ia=c;this.nc=[(this.Ja+this.Ga)/2,(this.Ka+this.Ha)/2,(this.La+this.Ia)/2];this.c=p;return this.Z.push(a,b,c)/3};
w.get=function(a){(!z(a)||0>a||3*a>this.Z.length||a==this.count())&&g(Error("Invalid id."));a*=3;return[this.Z[a],this.Z[a+1],this.Z[a+2]]};w.remove=function(a){(!z(a)||0>a||3*a>this.Z.length||a==this.count())&&g(Error("Invalid id."));this.Z.splice(a,3);this.c=p};w.all=t("Z");w.clear=function(){this.Z=[];this.c=p};w.count=function(){return this.Z.length/3};w.length=function(){return this.Z.length};A("X.triplets",P);A("X.triplets.prototype.add",P.prototype.add);A("X.triplets.prototype.get",P.prototype.get);
A("X.triplets.prototype.remove",P.prototype.remove);A("X.triplets.prototype.all",P.prototype.all);A("X.triplets.prototype.clear",P.prototype.clear);A("X.triplets.prototype.count",P.prototype.count);A("X.triplets.prototype.length",P.prototype.length);function Q(a,b,c){this.x=a;this.y=b;this.b=c}C(Q,Mc);w=Q.prototype;w.d=function(){return new Q(this.x,this.y,this.b)};w.fb=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};w.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};w.C=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};w.normalize=function(){return this.scale(1/this.fb())};w.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
w.sa=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};w.Vb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Nc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)}function Oc(a,b){return new Q(a.x+b.x,a.y+b.y,a.b+b.b)}function Pc(a,b){return new Q(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function R(a,b){this.x=ia(a)?a:0;this.y=ia(b)?b:0}R.prototype.d=function(){return new R(this.x,this.y)};R.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Qc(a,b){return new R(a.x-b.x,a.y-b.y)};function Rc(a,b){this.x=a;this.y=b}C(Rc,R);w=Rc.prototype;w.d=function(){return new Rc(this.x,this.y)};w.fb=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};w.scale=function(a){this.x*=a;this.y*=a;return this};w.C=function(){this.x=-this.x;this.y=-this.y;return this};w.normalize=function(){return this.scale(1/this.fb())};w.add=function(a){this.x+=a.x;this.y+=a.y;return this};w.sa=function(a){this.x-=a.x;this.y-=a.y;return this};
w.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};w.Vb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function Sc(a,b){this.width=a;this.height=b}function Vc(a,b){return a==b?p:!a||!b?r:a.width==b.width&&a.height==b.height}w=Sc.prototype;w.d=function(){return new Sc(this.width,this.height)};w.toString=function(){return"("+this.width+" x "+this.height+")"};w.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};w.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
w.scale=function(a){this.width*=a;this.height*=a;return this};function Wc(a,b){if(a instanceof Wc)this.w=a.fe();else{var c;if(c=ka(a))a:{for(var d=c=0;d<a.length;d++){if(!ka(a[d])||0<c&&a[d].length!=c){c=r;break a}for(var e=0;e<a[d].length;e++)if(!z(a[d][e])){c=r;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.w=wb(a):a instanceof Sc?this.w=Xc(a.height,a.width):z(a)&&z(b)&&0<a&&0<b?this.w=Xc(a,b):g(Error("Invalid argument(s) for Matrix contructor"))}this.t=new Sc(this.w[0].length,this.w.length)}
function Yc(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new Wc(b)}function Zc(a,b,c){for(var d=0;d<a.R().height;d++)for(var e=0;e<a.R().width;e++)b.call(c,a.w[d][e],d,e,a)}function $c(a,b){var c=new Wc(a.R());Zc(a,function(d,e,f){c.w[e][f]=b.call(o,d,e,f,a)});return c}function Xc(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}w=Wc.prototype;
w.add=function(a){Vc(this.t,a.R())||g(Error("Matrix summation is only supported on arrays of equal size"));return $c(this,function(b,c,d){return b+a.w[c][d]})};w.Vb=function(a,b){if(this.t.width!=a.t.width||this.t.height!=a.t.height)return r;for(var c=b||0,d=0;d<this.t.height;d++)for(var e=0;e<this.t.width;e++)if(!(Math.abs(this.w[d][e]-a.w[d][e])<=(c||1.0E-6)))return r;return p};w.R=t("t");w.I=function(a,b){return!(0<=a&&a<this.t.height&&0<=b&&b<this.t.width)?q:this.w[a][b]};
function S(a,b,c,d){0<=b&&b<a.t.height&&0<=c&&c<a.t.width||g(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.t.height+","+a.t.width+")"));a.w[b][c]=d}w.multiply=function(a){if(a instanceof Wc)return this.t.width!=a.R().height&&g(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),ad(this,a);if(z(a))return bd(this,a);g(Error("A matrix can only be multiplied by a number or another matrix."))};
w.sa=function(a){Vc(this.t,a.R())||g(Error("Matrix subtraction is only supported on arrays of equal size."));return $c(this,function(b,c,d){return b-a.w[c][d]})};w.fe=t("w");w.toString=function(){var a=0;Zc(this,function(b){b=(""+b).length;b>a&&(a=b)});var b=[];pb(this.w,function(c){b.push("[ ");pb(c,function(c){c=""+c;b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};
function ad(a,b){var c=new Wc(a.t.height,b.R().width);Zc(c,function(a,e,f){for(var h=a=0;h<this.t.width;h++)a+=this.I(e,h)*b.I(h,f);S(c,e,f,a)},a);return c}function bd(a,b){return $c(a,function(a){return a*b})};function U(a,b){Wc.call(this,a,b);this._className="matrix"}C(U,Wc);function cd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new U(b)}w=U.prototype;w.B=function(){var a=[],b=this.R();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.I(c,d));return a};
w.translate=function(a){this.t.width!=this.t.height&&g(Error("Can not translate non-square matrix."));var b=this.R(),c=Yc(b.height);a instanceof Rc&&3==b.height?(S(c,0,2,a.x),S(c,1,2,a.y)):a instanceof Q&&4==b.height?(S(c,0,3,a.x),S(c,1,3,a.y),S(c,2,3,a.b)):g(Error("Translation failed."));return new U(this.multiply(c))};
w.rotate=function(a,b){(4!=this.R().height||this.t.width!=this.t.height)&&g(Error("Only 4x4 matrices can be rotated."));(!x(b)||!(b instanceof Q))&&g(Error("Invalid axis vector."));z(a)||g(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=Yc(4);S(f,0,0,d+c.x*c.x*(1-d));S(f,0,1,c.x*c.y*(1-d)-c.b*e);S(f,0,2,c.x*c.b*(1-d)+c.y*e);S(f,1,0,c.y*c.x*(1-d)+c.b*e);S(f,1,1,d+c.y*c.y*(1-d));S(f,1,2,c.y*c.b*(1-d)-c.x*e);S(f,2,0,c.b*c.x*(1-d)-c.y*e);S(f,2,1,c.b*c.y*(1-d)+c.x*e);S(f,2,2,
d+c.b*c.b*(1-d));return new U(this.multiply(f))};w.ja=function(a){var b=this.R(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof Q&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):g(Error("Multiplication by vector failed."));a=this.multiply(new Wc(c));return new Q(parseFloat(a.I(0,0)),parseFloat(a.I(1,0)),parseFloat(a.I(2,0)))};w.xh=function(a,b){var c=this.w[a];this.w[a]=this.w[b];this.w[b]=c};
w.wh=function(a,b){for(var c=this.R(),d=0,d=0;d<c.height;d++){var e=this.I(d,a);e||(e=0);var f=this.I(d,b);f||(f=0);S(this,d,a,f);S(this,d,b,e)}};A("X.matrix",U);A("X.matrix.createIdentityMatrix",cd);A("X.matrix.prototype.flatten",U.prototype.B);A("X.matrix.prototype.translate",U.prototype.translate);A("X.matrix.prototype.rotate",U.prototype.rotate);A("X.matrix.prototype.toArray",U.prototype.fe);A("X.matrix.prototype.getValueAt",U.prototype.I);A("X.matrix.prototype.multiplyByVector",U.prototype.ja);
A("X.matrix.prototype.swapRows",U.prototype.xh);A("X.matrix.prototype.swapCols",U.prototype.wh);function dd(){L.call(this);this._className="transform";this.f=cd(4);this.la=new Float32Array(this.f.B())}C(dd,L);w=dd.prototype;w.$g=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.f=this.f.rotate(a*Math.PI/180,new Q(0,1,0));this.la=new Float32Array(this.f.B());this.c=p};w.ah=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.f=this.f.rotate(a*Math.PI/180,new Q(1,0,0));this.la=new Float32Array(this.f.B());this.c=p};
w.bh=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.f=this.f.rotate(a*Math.PI/180,new Q(0,0,1));this.la=new Float32Array(this.f.B());this.c=p};w.Bh=function(a){z(a)||g(Error("Invalid distance."));this.f=this.f.translate(new Q(a,0,0));this.la=new Float32Array(this.f.B());this.c=p};w.Ch=function(a){z(a)||g(Error("Invalid distance."));this.f=this.f.translate(new Q(0,a,0));this.la=new Float32Array(this.f.B());this.c=p};
w.Dh=function(a){z(a)||g(Error("Invalid distance."));this.f=this.f.translate(new Q(0,0,a));this.la=new Float32Array(this.f.B());this.c=p};w.ug=t("f");w.qf=function(a){var b=cd(4);x(a)&&a instanceof U&&(b=a);this.f=b;this.la=new Float32Array(this.f.B());this.c=p};w.ig=t("la");function ed(a,b,c){var d=a.f.I(b,c);d||(d=0);S(a.f,b,c,-1*d);a.la=new Float32Array(a.f.B());a.c=p}w.eg=function(){ed(this,0,0)};w.fg=function(){ed(this,1,1)};w.gg=function(){ed(this,2,2)};A("X.transform",dd);
A("X.transform.prototype.rotateX",dd.prototype.$g);A("X.transform.prototype.rotateY",dd.prototype.ah);A("X.transform.prototype.rotateZ",dd.prototype.bh);A("X.transform.prototype.translateX",dd.prototype.Bh);A("X.transform.prototype.translateY",dd.prototype.Ch);A("X.transform.prototype.translateZ",dd.prototype.Dh);A("X.transform.prototype.matrix",dd.prototype.ug);A("X.transform.prototype.glMatrix",dd.prototype.ig);A("X.transform.prototype.setMatrix",dd.prototype.qf);
A("X.transform.prototype.flipX",dd.prototype.eg);A("X.transform.prototype.flipY",dd.prototype.fg);A("X.transform.prototype.flipZ",dd.prototype.gg);function fd(){L.call(this);this._className="texture";var a=window["X.Counter"];a.Kd();this._id=a.value();this.Pb=this.ke=this.da=q;this.uc=this.vc=0;this.c=p}C(fd,L);fd.prototype.id=t("_id");fd.prototype.file=t("da");fd.prototype.Zd=function(a){x(a)?(y(a)&&(a=new Gc(a)),this.da=a):this.da=q};fd.prototype.Jd=t("ke");function V(a){L.call(this);this._className="object";var b=window["X.Counter"];b.Kd();this._id=b.value();this._type=gd;this.yc=new dd;this._color=[1,1,1];this.k=new P;this.q=new P;this.ba=new P;this.da=this.Za=this.L=q;this._opacity=1;this.kb=q;this._visible=p;this._lineWidth=this._pointSize=1;this._caption=q;this._magicMode=r;x(a)&&(this._type=a.type(),this.yc.qf(new U(a.transform().f)),this._color=Array(a.color()),this.k=new P(a.k),this.q=new P(a.q),this.ba=new P(a.ba),this.L=a.L,this.Za=a.Za,a.file()&&
(this.da=new Gc((new String(a.file().path())).toString())),this._opacity=a.opacity(),this.kb=a.children(),this._visible=a.Df(),this._pointSize=a.lf(),this._lineWidth=a.lineWidth(),a.caption()&&(this._caption=(new String(a.caption())).toString()),this._magicMode=a.Ve(),this.c=p);this.p=q;this.c=p}C(V,L);var gd="TRIANGLES";w=V.prototype;w.id=t("_id");
function hd(a){for(var b=a.k.count(),c=[],d=0,d=0;d<b;d+=3){var e=a.k.get(d),f=a.k.get(d+1),h=a.k.get(d+2),i=a.q.get(d),k=a.q.get(d+1),m=a.q.get(d+2),n=a._color;0<a.ba.length()&&(n=a.ba.get(d));var l=[];l.push(new Fc(e,i));l.push(new Fc(f,k));l.push(new Fc(h,m));c.push(new Jc(l,n))}return Lc(c)}
function id(a,b){(!x(b)||!(b instanceof M))&&g(Error("Invalid CSG object."));a.k.clear();a.q.clear();a.ba.clear();var c=new Ec,d=[];qb(b.i,function(a){for(var b=[],h=a.jc,b=qb(a.ta,function(a){a.color=h;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.If=qb(c.unique(),function(a){return[a.P.x(),a.P.y(),a.P.b()]});a.Hf=qb(c.unique(),function(a){return[a.z.x(),a.z.y(),a.z.b()]});a.Gf=qb(c.unique(),function(a){return!a.color?q:[a.color[0],a.color[1],a.color[2]]});qb(d,function(a){var b=
a[0],c=a[1],a=a[2],d=this.If,k=this.Hf,m=this.Gf;this.k.add(d[b][0],d[b][1],d[b][2]);this.k.add(d[c][0],d[c][1],d[c][2]);this.k.add(d[a][0],d[a][1],d[a][2]);this.q.add(k[b][0],k[b][1],k[b][2]);this.q.add(k[c][0],k[c][1],k[c][2]);this.q.add(k[a][0],k[a][1],k[a][2]);m[b]&&this.ba.add(m[b][0],m[b][1],m[b][2]);m[c]&&this.ba.add(m[c][0],m[c][1],m[c][2]);m[a]&&this.ba.add(m[a][0],m[a][1],m[a][2])}.bind(a));a.Ab(gd)}w.type=t("_type");w.Ab=ba("_type");w.transform=t("yc");w.Vg=t("k");w.Ag=t("q");w.Vf=t("ba");
w.color=t("_color");w.yh=t("L");w.Zc=function(a){if(x(a)){if(y(a)){var b=a,a=new fd;a.Zd(b)}a instanceof fd||g(Error("Invalid texture."));this.L=a}else this.L=q};w.Uf=t("p");w.hh=function(a){if(x(a)){if(y(a)){var b=a,a=new Hc;a.Zd(b)}a instanceof Hc||g(Error("Invalid colorTable."));this.p=a}else this.p=q};
w.pf=function(a,b,c){(!z(a)&&0>a&&1<a||!z(b)&&0>b&&1<b||!z(c)&&0>c&&1<c)&&g(Error("Invalid color."));if(this.bc())for(var d=this.children(),e=d.length,f=0,f=0;f<e;f++)d[f].pf(a,b,c);this._color[0]=a;this._color[1]=b;this._color[2]=c;this.c=p};w.ad=function(a){(!x(a)||!(a instanceof M)&&!(a instanceof V))&&g(Error("Invalid object."));var b=a;a instanceof V&&(b=hd(b));a=new V;id(a,hd(this).ad(b));return a};
w.sa=function(a){(!x(a)||!(a instanceof M)&&!(a instanceof V))&&g(Error("Invalid object."));var b=a;a instanceof V&&(b=hd(b));a=new V;id(a,hd(this).sa(b));return a};w.Lc=function(a){(!x(a)||!(a instanceof M)&&!(a instanceof V))&&g(Error("Invalid object."));var b=a;a instanceof V&&(b=hd(b));a=new V;id(a,hd(this).Lc(b));return a};w.inverse=function(a){(!x(a)||!(a instanceof M)&&!(a instanceof V))&&g(Error("Invalid object."));var b=a;a instanceof V&&(b=hd(b));a=new V;id(a,hd(this).inverse(b));return a};
w.opacity=t("_opacity");w.caption=t("_caption");w.fh=function(a){this._caption=a;this.c=p};w.s=function(a){if(this.bc())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].s(a);this._visible=a;this.c=p};w.Df=t("_visible");w.rf=function(a){(!z(a)||1<a||0>a)&&g(Error("Invalid opacity."));if(this.bc())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].rf(a);this._opacity=a;this.c=p};w.load=function(a){this.da=x(a)?new Gc(a):q};w.file=t("da");w.Ua=function(){var a=new jd;a.Q=this;this.dispatchEvent(a)};
w.children=function(){this.kb||(this.kb=[]);return this.kb};w.bc=function(){return!this.kb?r:0<this.kb.length};w.kh=function(a){z(a)||g(Error("Invalid line width."));this._lineWidth=a;this.c=p};w.lineWidth=t("_lineWidth");w.nh=function(a){z(a)||g(Error("Invalid point size."));this._pointSize=a;this.c=p};w.lf=t("_pointSize");w.Ve=t("_magicMode");w.lh=function(a){"boolean"!=typeof a&&g(Error("Invalid magicMode setting."));this._magicMode=a};
function kd(a,b){(!x(a)||!x(b)||!(a instanceof V)||!(b instanceof V))&&g(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.opacity()?-1:1==b.opacity()?1:x(a.Ec)&&x(b.Ec)&&a.Ec>b.Ec?-1:1}A("X.object",V);A("X.object.prototype.id",V.prototype.id);A("X.object.prototype.type",V.prototype.type);A("X.object.prototype.transform",V.prototype.transform);A("X.object.prototype.points",V.prototype.Vg);A("X.object.prototype.normals",V.prototype.Ag);A("X.object.prototype.texture",V.prototype.yh);
A("X.object.prototype.setTexture",V.prototype.Zc);A("X.object.prototype.colorTable",V.prototype.Uf);A("X.object.prototype.setColorTable",V.prototype.hh);A("X.object.prototype.colors",V.prototype.Vf);A("X.object.prototype.color",V.prototype.color);A("X.object.prototype.setColor",V.prototype.pf);A("X.object.prototype.opacity",V.prototype.opacity);A("X.object.prototype.setOpacity",V.prototype.rf);A("X.object.prototype.lineWidth",V.prototype.lineWidth);A("X.object.prototype.setLineWidth",V.prototype.kh);
A("X.object.prototype.pointSize",V.prototype.lf);A("X.object.prototype.setPointSize",V.prototype.nh);A("X.object.prototype.load",V.prototype.load);A("X.object.prototype.file",V.prototype.file);A("X.object.prototype.caption",V.prototype.caption);A("X.object.prototype.visible",V.prototype.Df);A("X.object.prototype.setCaption",V.prototype.fh);A("X.object.prototype.setVisible",V.prototype.s);A("X.object.prototype.magicMode",V.prototype.Ve);A("X.object.prototype.setMagicMode",V.prototype.lh);
A("X.object.prototype.intersect",V.prototype.Lc);A("X.object.prototype.inverse",V.prototype.inverse);A("X.object.prototype.subtract",V.prototype.sa);A("X.object.prototype.union",V.prototype.ad);A("X.object.prototype.children",V.prototype.children);function W(a){cc.call(this,a);this._className="event"}C(W,cc);var ld=wc("pan"),md=wc("rotate"),nd=wc("zoom"),od=wc("render"),pd=wc("resetview"),sc=wc("modified"),qd=wc("progress"),rd=wc("hover"),sd=wc("hover_end");function td(){W.call(this,ld);this.lb=new Rc(0,0)}C(td,W);function ud(){W.call(this,md);this.lb=new Rc(0,0)}C(ud,W);function vd(){W.call(this,nd);this.Da=this.Ya=r}C(vd,W);function wd(){W.call(this,od)}C(wd,W);function xd(){W.call(this,rd);this.Bc=this.Ac=0}C(xd,W);
function yd(){W.call(this,sd)}C(yd,W);function zd(){W.call(this,pd)}C(zd,W);function jd(){W.call(this,sc);this.Q=new V}C(jd,W);function Ad(){W.call(this,qd);this.te=0}C(Ad,W);function Bd(a,b,c,d,e){(!x(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!x(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid front direction."));(!x(c)||!(c instanceof Array)||3!=c.length)&&g(Error("Invalid up direction."));z(d)||g(Error("Invalid width."));z(e)||g(Error("Invalid height."));V.call(this);this._className="slice";this.j=a;this.dd=b;this.$a=c;this.qb=d;this.Xa=e;this.Za=[0,1,0,0,1,1,1,1,1,0,0,0];this.K=this.Qa=q;this.na()}C(Bd,V);
Bd.prototype.na=function(){this.k.clear();var a=new Q(this.dd[0],this.dd[1],this.dd[2]),b=new Q(this.$a[0],this.$a[1],this.$a[2]),c=Pc(b,a),d=new Q(this.j[0],this.j[1],this.j[2]),e=new Q(1,1,1);1==a.x?(e=new Q(this.j[0],this.Xa/2,this.qb/2),this.Za=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new Q(this.qb/2,this.j[1],this.Xa/2),this.Za=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new Q(this.qb/2,this.Xa/2,this.j[2]));var f=Oc(c.d().C(),b.d().C()),f=new Q(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var h=Oc(c.d().C(),b),
h=new Q(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var i=Oc(c,b.d().C()),i=new Q(i.x*e.x,i.y*e.y,i.b*e.b);i.add(d);var k=i,b=Oc(c,b),b=new Q(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=h;this.k.add(f.x,f.y,f.b);this.k.add(h.x,h.y,h.b);this.k.add(i.x,i.y,i.b);this.k.add(k.x,k.y,k.b);this.k.add(b.x,b.y,b.b);this.k.add(d.x,d.y,d.b);this.q.add(a.x,a.y,a.b);this.q.add(a.x,a.y,a.b);this.q.add(a.x,a.y,a.b);this.q.add(a.x,a.y,a.b);this.q.add(a.x,a.y,a.b);this.q.add(a.x,a.y,a.b)};Bd.prototype.Te=t("K");A("X.slice",Bd);function Cd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Cd.prototype.d=function(){return new Cd(this.top,this.right,this.bottom,this.left)};Cd.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Cd.prototype.contains=function(a){return!this||!a?r:a instanceof Cd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Dd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}w=Dd.prototype;w.d=function(){return new Dd(this.left,this.top,this.width,this.height)};w.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
w.Qe=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,p}return r};w.contains=function(a){return a instanceof Dd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
w.R=function(){return new Sc(this.width,this.height)};var Ed;function Fd(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=xb(arguments,1),e;e=c;for(var f=0,h=0;h<d.length;h++)0<=ob(e,d[h])||(e.push(d[h]),f++);e=f==d.length;a.className=c.join(" ");return e};var Gd=!G||hb(9);!Sa&&!G||G&&hb(9)||Sa&&fb("1.9.1");G&&fb("9");function Hd(a){return a?new Id(Jd(a)):Ed||(Ed=new Id)}function Kd(a){return y(a)?document.getElementById(a):a}function Ld(a,b){ib(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Md?a.setAttribute(Md[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var Md={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function Od(a,b,c){return Pd(document,arguments)}
function Pd(a,b){var c=b[0],d=b[1];if(!Gd&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',za(d.name),'"');if(d.type){c.push(' type="',za(d.type),'"');var e={};mb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);d&&(y(d)?c.className=d:ja(d)?Fd.apply(q,[c].concat(d)):Ld(c,d));2<b.length&&Qd(a,c,b);return c}
function Qd(a,b,c){function d(c){c&&b.appendChild(y(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ka(f)&&!(oa(f)&&0<f.nodeType)?pb(Rd(f)?wb(f):f,d):d(f)}}function Sd(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Td(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function Ud(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Jd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Rd(a){if(a&&"number"==typeof a.length){if(oa(a))return"function"==typeof a.item||"string"==typeof a.item;if(na(a))return"function"==typeof a.item}return r}function Id(a){this.v=a||ca.document||document}w=Id.prototype;
w.Hc=Hd;w.e=function(a){return y(a)?this.v.getElementById(a):a};w.tb=function(a,b,c){return Pd(this.v,arguments)};w.createElement=function(a){return this.v.createElement(a)};w.createTextNode=function(a){return this.v.createTextNode(a)};function Vd(a){return"CSS1Compat"==a.v.compatMode}function Wd(a){var b=a.v,a=!H&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new R(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}w.appendChild=function(a,b){a.appendChild(b)};
w.contains=Ud;function Xd(a,b){var c=Jd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,q))?c[b]||c.getPropertyValue(b):""}function Yd(a,b){return a.currentStyle?a.currentStyle[b]:q}function Zd(a,b){return Xd(a,b)||Yd(a,b)||a.style&&a.style[b]}function $d(a){a=a?9==a.nodeType?a:Jd(a):document;return G&&!hb(9)&&!Vd(Hd(a))?a.body:a.documentElement}
function ae(a){var b=a.getBoundingClientRect();G&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function be(a){if(G&&!hb(8))return a.offsetParent;for(var b=Jd(a),c=Zd(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Zd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return q}
function ce(a){for(var b=new Cd(0,Infinity,Infinity,0),c=Hd(a),d=c.v.body,e=c.v.documentElement,f=!H&&"CSS1Compat"==c.v.compatMode?c.v.documentElement:c.v.body;a=be(a);)if((!G||0!=a.clientWidth)&&(!H||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=Zd(a,"overflow")){var h=de(a),i;i=a;if(Sa&&!fb("1.9")){var k=parseFloat(Xd(i,"borderLeftWidth"));if(ee(i))var m=i.offsetWidth-i.clientWidth-k-parseFloat(Xd(i,"borderRightWidth")),k=k+m;i=new R(k,parseFloat(Xd(i,"borderTopWidth")))}else i=new R(i.clientLeft,
i.clientTop);h.x+=i.x;h.y+=i.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.v.parentWindow||c.v.defaultView||window;e=c.document;H&&!fb("500")&&!Ta?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new Sc(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new Sc(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:q}
function de(a){var b,c=Jd(a),d=Zd(a,"position"),e=Sa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new R(0,0),h=$d(c);if(a==h)return f;if(a.getBoundingClientRect)b=ae(a),a=Wd(Hd(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(H&&"fixed"==Zd(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Ra||H&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=be(b))&&b!=c.body&&b!=h;)if(f.x-=b.scrollLeft,!Ra||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function fe(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function ge(a){if("none"!=Zd(a,"display"))return he(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=he(a);b.display=c;b.position=e;b.visibility=d;return a}function he(a){var b=a.offsetWidth,c=a.offsetHeight,d=H&&!b&&!c;return(!ia(b)||d)&&a.getBoundingClientRect?(a=ae(a),new Sc(a.right-a.left,a.bottom-a.top)):new Sc(b,c)}function ie(a,b){a.style.display=b?"":"none"}function ee(a){return"rtl"==Zd(a,"direction")}
function je(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var ke={thin:2,medium:4,thick:6};function le(a,b){if("none"==Yd(a,b+"Style"))return 0;var c=Yd(a,b+"Width");return c in ke?ke[c]:je(a,c)};function me(a,b,c,d,e,f,h,i){var k,m=c.offsetParent;if(m){var n="HTML"==m.tagName||"BODY"==m.tagName;if(!n||"static"!=Zd(m,"position"))k=de(m),n||(k=Qc(k,new R(m.scrollLeft,m.scrollTop)))}m=de(a);n=ge(a);m=new Dd(m.x,m.y,n.width,n.height);(n=ce(a))&&m.Qe(new Dd(n.left,n.top,n.right-n.left,n.bottom-n.top));var n=Hd(a),l=Hd(c);if(n.v!=l.v){var j=n.v.body,l=l.v.parentWindow||l.v.defaultView,s=new R(0,0),u=Jd(j)?Jd(j).parentWindow||Jd(j).defaultView:window,v=j;do{var D;if(u==l)D=de(v);else{var E=v;D=
new R;if(1==E.nodeType)if(E.getBoundingClientRect)E=ae(E),D.x=E.left,D.y=E.top;else{var I=Wd(Hd(E)),E=de(E);D.x=E.x-I.x;D.y=E.y-I.y}else{var I=na(E.hg),B=E;E.targetTouches?B=E.targetTouches[0]:I&&E.pa.targetTouches&&(B=E.pa.targetTouches[0]);D.x=B.clientX;D.y=B.clientY}}s.x+=D.x;s.y+=D.y}while(u&&u!=l&&(v=u.frameElement)&&(u=u.parent));j=Qc(s,de(j));G&&!Vd(n)&&(j=Qc(j,Wd(n)));m.left+=j.x;m.top+=j.y}a=(b&4&&ee(a)?b^2:b)&-5;b=new R(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);k&&(b=Qc(b,k));
e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var F;if(h&&(F=ce(c))&&k)F.top-=k.y,F.right-=k.x,F.bottom-=k.y,F.left-=k.x;return ne(b,c,d,f,F,h,i)}
function ne(a,b,c,d,e,f,h){var a=a.d(),i=0,k=(c&4&&ee(b)?c^2:c)&-5,c=ge(b),h=h?h.d():c.d();if(d||0!=k)k&2?a.x-=h.width+(d?d.right:0):d&&(a.x+=d.left),k&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){i=a;d=0;if(65==(f&65)&&(i.x<e.left||i.x>=e.right))f&=-2;if(132==(f&132)&&(i.y<e.top||i.y>=e.bottom))f&=-5;i.x<e.left&&f&1&&(i.x=e.left,d|=1);i.x<e.left&&i.x+h.width>e.right&&f&16&&(h.width=Math.max(h.width-(i.x+h.width-e.right),0),d|=4);i.x+h.width>e.right&&f&1&&(i.x=Math.max(e.right-h.width,
e.left),d|=1);f&2&&(d|=(i.x<e.left?16:0)|(i.x+h.width>e.right?32:0));i.y<e.top&&f&4&&(i.y=e.top,d|=2);i.y>=e.top&&i.y+h.height>e.bottom&&f&32&&(h.height=Math.max(h.height-(i.y+h.height-e.bottom),0),d|=8);i.y+h.height>e.bottom&&f&4&&(i.y=Math.max(e.bottom-h.height,e.top),d|=2);f&8&&(d|=(i.y<e.top?64:0)|(i.y+h.height>e.bottom?128:0));i=d}else i=256;if(i&496)return i}f=a;e=Sa&&(Ka||Wa)&&fb("1.9");f instanceof R?(a=f.x,f=f.y):(a=f,f=o);b.style.left=fe(a,e);b.style.top=fe(f,e);Vc(c,h)||(a=Vd(Hd(Jd(b))),
G&&(!a||!fb("8"))?(c=b.style,a?(G?(a=je(b,Yd(b,"paddingLeft")),e=je(b,Yd(b,"paddingRight")),f=je(b,Yd(b,"paddingTop")),d=je(b,Yd(b,"paddingBottom")),a=new Cd(f,e,d,a)):(a=Xd(b,"paddingLeft"),e=Xd(b,"paddingRight"),f=Xd(b,"paddingTop"),d=Xd(b,"paddingBottom"),a=new Cd(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),G?(e=le(b,"borderLeft"),f=le(b,"borderRight"),d=le(b,"borderTop"),b=le(b,"borderBottom"),b=new Cd(d,f,b,e)):(e=Xd(b,"borderLeftWidth"),f=Xd(b,"borderRightWidth"),d=Xd(b,"borderTopWidth"),
b=Xd(b,"borderBottomWidth"),b=new Cd(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=h.width-b.left-a.left-a.right-b.right,c.pixelHeight=h.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=h.width,c.pixelHeight=h.height)):(b=b.style,Sa?b.MozBoxSizing="border-box":H?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(h.width,0)+"px",b.height=Math.max(h.height,0)+"px"));return i};var oe=ca.window;function pe(a,b,c){na(a)?c&&(a=wa(a,c)):a&&"function"==typeof a.handleEvent?a=wa(a.handleEvent,a):g(Error("Invalid listener argument"));return 2147483647<b?-1:oe.setTimeout(a,b||0)};function qe(){}qe.prototype.ra=aa();function re(a,b){this.element=a;this.ze=b}C(re,qe);re.prototype.ra=function(a,b,c){me(this.element,this.ze,a,b,o,c)};function se(a){this.ia=a;this.n=[]}C(se,Ob);var te=[];function ue(a,b,c,d,e){ja(c)||(te[0]=c,c=te);for(var f=0;f<c.length;f++)a.n.push(J(b,c[f],d||a,e||r,a.ia||a))}se.prototype.Vc=function(){pb(this.n,oc);this.n.length=0};se.prototype.u=function(){se.D.u.call(this);this.Vc()};se.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function ve(a,b){this.ia=new se(this);this.Yd(a||q);b&&this.Ab(b)}C(ve,Cc);w=ve.prototype;w.h=q;w.Sf=p;w.ve=q;w.S=r;w.sh=r;w.Nd=-1;w.lg=r;w.cg=p;w.Bb="toggle_display";w.Ab=ba("Bb");w.e=t("h");w.Yd=function(a){this.S&&g(Error("Can not change this state of the popup while showing."));this.h=a};
w.s=function(a){this.kc&&this.kc.stop();this.cc&&this.cc.stop();if(a){if(!this.S&&this.Sd()){this.h||g(Error("Caller must call setElement before trying to show the popup"));this.ra();a=Jd(this.h);this.lg&&ue(this.ia,a,"keydown",this.Bg,p);if(this.Sf)if(ue(this.ia,a,"mousedown",this.bf,p),G){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}ue(this.ia,a,"mousedown",this.bf,p);ue(this.ia,a,
"deactivate",this.af)}else ue(this.ia,a,"blur",this.af);"toggle_display"==this.Bb?(this.h.style.visibility="visible",ie(this.h,p)):"move_offscreen"==this.Bb&&this.ra();this.S=p;this.kc?(lc(this.kc,"end",this.df,r,this),this.kc.play()):this.df()}}else we(this)};w.ra=ga;function we(a,b){if(!a.S||!a.dispatchEvent({type:"beforehide",target:b}))return r;a.ia&&a.ia.Vc();a.cc?(lc(a.cc,"end",xa(a.ye,b),r,a),a.cc.play()):a.ye(b);return p}
w.ye=function(a){"toggle_display"==this.Bb?this.sh?pe(this.Ne,0,this):this.Ne():"move_offscreen"==this.Bb&&(this.h.style.left="-200px",this.h.style.top="-200px");this.S=r;this.Td(a)};w.Ne=function(){this.h.style.visibility="hidden";ie(this.h,r)};w.Sd=function(){return this.dispatchEvent("beforeshow")};w.df=function(){this.Nd=ya();this.dispatchEvent("show")};w.Td=function(a){ya();this.dispatchEvent({type:"hide",target:a})};
w.bf=function(a){a=a.target;!Ud(this.h,a)&&(!this.ve||Ud(this.ve,a))&&!(150>ya()-this.Nd)&&we(this,a)};w.Bg=function(a){27==a.keyCode&&we(this,a.target)&&(a.preventDefault(),a.stopPropagation())};w.af=function(a){if(this.cg){var b=Jd(this.h);if(G||Ra){if(a=b.activeElement,!a||Ud(this.h,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.Nd||we(this)}};w.u=function(){ve.D.u.call(this);this.ia.ga();Qb(this.kc);Qb(this.cc);delete this.h;delete this.ia};function xe(a,b){this.Bd=a instanceof R?a:new R(a,b)}C(xe,qe);xe.prototype.ra=function(a,b,c,d){me($d(a),0,a,b,this.Bd,c,q,d)};function ye(a,b){this.Wg=4;this.Xd=b||o;ve.call(this,a)}C(ye,ve);ye.prototype.Yc=function(a){this.Xd=a||o;this.S&&this.ra()};ye.prototype.ra=function(){if(this.Xd){var a=!this.S&&"move_offscreen"!=this.Bb,b=this.e();a&&(b.style.visibility="hidden",ie(b,p));this.Xd.ra(b,this.Wg,this.ji);a&&ie(b,r)}};function ze(a,b,c){this.oa=c||(a?Hd(Kd(a)):Hd());ye.call(this,this.oa.tb("div",{style:"position:absolute;display:none;"}));this.Cd=new R(1,1);this.cb=new Jb;a&&Ae(this,a);if(b!=q)if(a=this.e(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Jd(a).createTextNode(b))}}C(ze,ye);var Be=[];w=ze.prototype;w.N=q;w.className="goog-tooltip";
w.sf=500;w.kg=0;w.Hc=t("oa");function Ae(a,b){b=Kd(b);a.cb.add(b);J(b,"mouseover",a.Ke,r,a);J(b,"mouseout",a.Kc,r,a);J(b,"mousemove",a.Je,r,a);J(b,"focus",a.Ie,r,a);J(b,"blur",a.Kc,r,a)}w.detach=function(a){if(a)a=Kd(a),Ce(this,a),this.cb.remove(a);else{for(var b=this.cb.ha(),c=0;a=b[c];c++)Ce(this,a);this.cb.clear()}};function Ce(a,b){nc(b,"mouseover",a.Ke,r,a);nc(b,"mouseout",a.Kc,r,a);nc(b,"mousemove",a.Je,r,a);nc(b,"focus",a.Ie,r,a);nc(b,"blur",a.Kc,r,a)}
w.Yd=function(a){var b=this.e();b&&Sd(b);ze.D.Yd.call(this,a);a&&(b=this.oa.v.body,b.insertBefore(a,b.lastChild))};w.Sd=function(){if(!ve.prototype.Sd.call(this))return r;if(this.anchor)for(var a,b=0;a=Be[b];b++)Ud(a.e(),this.anchor)||a.s(r);0<=ob(Be,this)||Be.push(this);a=this.e();a.className=this.className;De(this);J(a,"mouseover",this.Me,r,this);J(a,"mouseout",this.Le,r,this);Ee(this);return p};
w.Td=function(){ub(Be,this);for(var a=this.e(),b,c=0;b=Be[c];c++)b.anchor&&Ud(a,b.anchor)&&b.s(r);this.gf&&Fe(this.gf);nc(a,"mouseover",this.Me,r,this);nc(a,"mouseout",this.Le,r,this);this.anchor=o;if(0==(this.Ba?this.S?4:1:this.ub?3:this.S?2:0))this.Xc=r;ve.prototype.Td.call(this)};w.Ze=function(a,b){this.anchor==a&&this.cb.contains(this.anchor)&&(this.Xc||!this.ki?(this.s(r),this.S||(this.anchor=a,this.Yc(b||Ge(this,0)),this.s(p))):this.anchor=o);this.Ba=o};
w.wg=function(a){this.ub=o;a==this.anchor&&(this.N==q||this.N!=this.e()&&!this.cb.contains(this.N))&&(!this.we||!this.we.N)&&this.s(r)};function He(a,b){var c=Wd(a.oa);a.Cd.x=b.clientX+c.x;a.Cd.y=b.clientY+c.y}w.Ke=function(a){var b=Ie(this,a.target);this.N=b;De(this);b!=this.anchor&&(this.anchor=b,this.Ba||(this.Ba=pe(wa(this.Ze,this,b,o),this.sf)),Je(this),He(this,a))};function Ie(a,b){try{for(;b&&!a.cb.contains(b);)b=b.parentNode;return b}catch(c){return q}}
w.Je=function(a){He(this,a);this.Xc=p};w.Ie=function(a){this.N=a=Ie(this,a.target);this.Xc=p;if(this.anchor!=a){this.anchor=a;var b=Ge(this,1);De(this);this.Ba||(this.Ba=pe(wa(this.Ze,this,a,b),this.sf));Je(this)}};function Ge(a,b){if(0==b){var c=a.Cd.d();return new Ke(c)}return new Le(a.N)}function Je(a){if(a.anchor)for(var b,c=0;b=Be[c];c++)Ud(b.e(),a.anchor)&&(b.we=a,a.gf=b)}
w.Kc=function(a){var b=Ie(this,a.target),c=Ie(this,a.relatedTarget);b!=c&&(b==this.N&&(this.N=q),Ee(this),this.Xc=r,this.S&&(!a.relatedTarget||!Ud(this.e(),a.relatedTarget))?Fe(this):this.anchor=o)};w.Me=function(){var a=this.e();this.N!=a&&(De(this),this.N=a)};w.Le=function(a){var b=this.e();if(this.N==b&&(!a.relatedTarget||!Ud(b,a.relatedTarget)))this.N=q,Fe(this)};function Ee(a){a.Ba&&(oe.clearTimeout(a.Ba),a.Ba=o)}
function Fe(a){if(2==(a.Ba?a.S?4:1:a.ub?3:a.S?2:0))a.ub=pe(wa(a.wg,a,a.anchor),a.kg)}function De(a){a.ub&&(oe.clearTimeout(a.ub),a.ub=o)}w.u=function(){this.s(r);Ee(this);this.detach();this.e()&&Sd(this.e());this.N=q;delete this.oa;ze.D.u.call(this)};function Ke(a,b){xe.call(this,a,b)}C(Ke,xe);Ke.prototype.ra=function(a,b,c){b=$d(a);b=ce(b);c=c?new Cd(c.top+10,c.right,c.bottom,c.left+10):new Cd(10,0,0,10);ne(this.Bd,a,4,c,b,9)&496&&ne(this.Bd,a,4,c,b,5)};function Le(a){re.call(this,a,3)}C(Le,re);
Le.prototype.ra=function(a,b,c){var d=new R(10,0);me(this.element,this.ze,a,b,d,c,9)&496&&me(this.element,2,a,1,d,c,5)};function Me(a){this.h=a;this.Ue=J(this.h,Sa?"DOMMouseScroll":"mousewheel",this)}C(Me,Cc);
Me.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.pa;if("mousewheel"==a.type){c=1;if(G||H&&(La||fb("532.0")))c=40;d=H&&Ka&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ia(a.wheelDeltaX)?(b=H&&Ka&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=H&&Ka&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ia(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;z(this.Xe)&&Math.min(Math.max(b,-this.Xe),this.Xe);z(this.Ye)&&(c=Math.min(Math.max(c,-this.Ye),
this.Ye));b=new Ne(d,a,0,c);try{this.dispatchEvent(b)}finally{b.ga()}};Me.prototype.u=function(){Me.D.u.call(this);oc(this.Ue);delete this.Ue};function Ne(a,b,c,d){b&&this.ya(b,o);this.type="mousewheel";this.detail=a;this.Dd=d}C(Ne,ec);G||H&&fb("525");function Oe(a){(!x(a)||!(a instanceof Element))&&g(Error("Could not add interactor to the given element."));L.call(this);this._className="interactor";this.mb=a;this.ld=this.ne=this.me=this.oe=this.le=this.pe=q;this.kd=p;this.rightButtonDown=this.middleButtonDown=this.leftButtonDown=r;this.jd=new Rc(0,0);this.config={MOUSEWHEEL_ENABLED:p,MOUSECLICKS_ENABLED:p,KEYBOARD_ENABLED:p,HOVERING_ENABLED:p,CONTEXTMENU_ENABLED:r}}C(Oe,L);w=Oe.prototype;
w.ya=function(){this.config.MOUSEWHEEL_ENABLED?(this.ld=new Me(this.mb),this.pe=J(this.ld,"mousewheel",this.Ng.bind(this))):(oc(this.pe),this.ld=q);this.config.MOUSEWHEEL_ENABLED?(this.le=J(this.mb,"mousedown",this.Gg.bind(this)),this.oe=J(this.mb,"mouseup",this.Lg.bind(this))):(oc(this.le),oc(this.oe));this.mb.oncontextmenu=this.config.CONTEXTMENU_ENABLED?q:function(){return r};window.onkeydown=this.config.KEYBOARD_ENABLED?this.cf.bind(this):q;oc(this.me);oc(this.ne);this.me=J(this.mb,"mousemove",
this.Ig.bind(this));this.ne=J(this.mb,"mouseout",this.Jg.bind(this))};w.Gg=function(a){0==a.button?this.leftButtonDown=p:1==a.button?this.middleButtonDown=p:2==a.button&&(this.rightButtonDown=p);eval("this.onMouseDown(this['leftButtonDown'],this['middleButtonDown'],this['rightButtonDown'])");Pe(this);a.preventDefault()};w.Fg=aa();
w.Lg=function(a){0==a.button?this.leftButtonDown=r:1==a.button?this.middleButtonDown=r:2==a.button&&(this.rightButtonDown=r);eval("this.onMouseUp(this['leftButtonDown'],this['middleButtonDown'],this['rightButtonDown'])");Pe(this);a.preventDefault()};w.Kg=aa();w.Jg=function(a){this.kd=r;this.config.KEYBOARD_ENABLED&&(window.onkeydown=q);this.rightButtonDown=this.middleButtonDown=this.leftButtonDown=r;Pe(this);this.jd=new Rc(0,0);a.preventDefault()};w.Hg=aa();
w.Ig=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.kd=p;this.config.KEYBOARD_ENABLED&&window.onkeydown==q&&(window.onkeydown=this.cf.bind(this));a.preventDefault();var b=a.shiftKey,c=new Rc(a.offsetX,a.offsetY),a=this.jd.sa(c);this.jd=c.d();this.config.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.middleButtonDown||this.leftButtonDown||this.rightButtonDown)&&Pe(this),this.ed=setTimeout(function(){Pe(this);var a=new xd;a.Ac=c.x;a.Bc=c.y;this.dispatchEvent(a);
this.ed=q}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.fb()&&(this.leftButtonDown&&!b?(b=new ud,b.lb=a,b.gi=0,this.dispatchEvent(b)):this.middleButtonDown||this.leftButtonDown&&b?(b=new td,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.lb=a,this.dispatchEvent(b)):this.rightButtonDown&&(b=new vd,b.Ya=0<a.y,b.Da=r,this.dispatchEvent(b)))};function Pe(a){a.ed&&clearTimeout(a.ed);a.dispatchEvent(new yd)}w.Mg=aa();
w.Ng=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");Pe(this);a.preventDefault();var b=new vd;x(a.Dd)||(a.Dd=0);b.Ya=0>a.Dd;b.Da=p;this.dispatchEvent(b)};w.Dg=aa();
w.cf=function(a){if(this.kd){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");Pe(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;if(82==f&&!b&&!c&&!d&&!e)a.preventDefault(),a=new zd,this.dispatchEvent(a);else if(37<=f&&40>=f&&(a.preventDefault(),a=e?new td:b?new vd:new ud))c=new Rc(0,0),37==f?(c.x=5,b&&(a.Ya=p,a.Da=r)):39==f?(c.x=-5,b&&(a.Ya=r,a.Da=r)):38==f?(c.y=5,b&&(a.Ya=p,a.Da=p)):40==f&&(c.y=-5,b&&(a.Ya=r,a.Da=p)),a.lb=c,this.dispatchEvent(a)}};A("X.interactor",Oe);
A("X.interactor.prototype.onMouseDown",Oe.prototype.Fg);A("X.interactor.prototype.onMouseUp",Oe.prototype.Kg);A("X.interactor.prototype.onMouseMove",Oe.prototype.Hg);A("X.interactor.prototype.onMouseWheel",Oe.prototype.Mg);A("X.interactor.prototype.onKey",Oe.prototype.Dg);function Qe(a,b,c,d){x(a)||g(Error("No valid parent element."));(!z(b)||!z(c))&&g(Error("Invalid coordinates."));(!x(d)||!(d instanceof Oe))&&g(Error("Invalid interactor."));ze.call(this);this._className="caption";this.Na=a;this.Ac=b;this.Bc=c;this.nb=d;this.wa=q;this.Va=[];this.Va=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];lc(d,sd,this.Md.bind(this));this.Ld()}C(Qe,ze);
Qe.prototype.Ld=function(){this.Na.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Od("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Va[0]);a.appendChild(b);b.appendChild(c);this.wa=b;this.Yc(new xe(this.Ac,this.Bc));this.s(p);Ae(this,this.Na);this.e().classList.add("x-tooltip")};Qe.prototype.Md=function(){this.s(r);this.wa&&Sd(this.wa);this.e()&&Sd(this.e());this.wa=q};function Re(){L.call(this);this._className="shader";this.zc="";this.zc="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.rc="";this.rc="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform bool useTextureThreshold;\nuniform bool useLabelMapTexture;\nuniform sampler2D textureSampler;\nuniform sampler2D textureSampler2;\nuniform float objectOpacity;\nuniform float labelMapOpacity;\nuniform float volumeLowerThreshold;\nuniform float volumeUpperThreshold;\nuniform float volumeScalarMin;\nuniform float volumeScalarMax;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n   vec4 textureSum = texture1;\n   if (useLabelMapTexture) {\n     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n     if (texture2.a > 0.0) {\n       if (labelMapOpacity < 1.0) {\n         textureSum = mix(texture2, textureSum, 1.0 - labelMapOpacity);\n       } else {\n         textureSum = texture2;\n       }\n     }\n   }\n   if (useTextureThreshold) {\n     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n     if (texture1.r < _volumeLowerThreshold ||\n         texture1.r > _volumeUpperThreshold) {\n       discard;\n     };\n   };\n   gl_FragColor = textureSum;\n   gl_FragColor.a = objectOpacity;\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
C(Re,L);var Se={$h:"vertexPosition",Zh:"vertexNormal",Yh:"vertexColor",ai:"vertexTexturePos"},Te={bi:"view",Ph:"perspective",Jh:"center",Oh:"objectTransform",Uh:"useObjectColor",Mh:"objectColor",Qh:"pointSize",Nh:"objectOpacity",Lh:"normal",Vh:"usePicking",Wh:"useTexture",Xh:"useTextureThreshold",Th:"useLabelMapTexture",Kh:"labelMapOpacity",Rh:"textureSampler",Sh:"textureSampler2",ci:"volumeLowerThreshold",fi:"volumeUpperThreshold",ei:"volumeScalarMin",di:"volumeScalarMax"};
function Ue(a){var b=Object.keys(Te);Object.keys(Se).every(function(a){a=eval("X.shaders.attributes."+a);return-1!=this.zc.search(a)||-1!=this.rc.search(a)}.bind(a))||g(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=eval("X.shaders.uniforms."+a);return-1!=this.zc.search(a)||-1!=this.rc.search(a)}.bind(a))||g(Error("Could not find all uniforms in the shader sources."))}A("X.shaders.attributes",Se);A("X.shaders.uniforms",Te);function Ve(a,b,c){x(a)||g(Error("Invalid GL Buffer."));x(b)||g(Error("Invalid number of items."));x(c)||g(Error("Invalid item size."));L.call(this);this._className="buffer";this.Y=a;this.Fa=b;this.ob=c}C(Ve,L);function Y(){L.call(this);this._className="parser"}C(Y,L);w=Y.prototype;w.parse=function(){g(Error("The function parse() should be overloaded."))};w.fc=function(a,b){var c=this.o(a,b+2),d=this.o(a,b+3),e=(d<<1&255|c>>7)-127,c=(c&127)<<16|this.o(a,b+1)<<8|this.o(a,b);return 0==c&&-127==e?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,e)};
function We(a,b,c){var d=a.o(b,c),e=a.o(b,c+1),f=(d<<1&255|e>>7)-127,a=(e&127)<<16|a.o(b,c+2)<<8|a.o(b,c+3);return 0==a&&-127==f?0:(1-2*(d>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,f)}function Xe(a,b,c,d){var e=[],f=0,h=Infinity,i;for(i=0;i<d;i++){var k=a.fc(b,c+4*i);e[i]=k;f=Math.max(f,k);h=Math.min(h,k)}return[e,f,h]}w.Sc=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var i=We(this,a,b+4*h);d[h]=i;e=Math.max(e,i);f=Math.min(f,i)}return[d,e,f]};
function Ye(a,b,c){return(a.o(b,c+3)<<24)+(a.o(b,c+2)<<16)+(a.o(b,c+1)<<8)+a.o(b,c)}function Ze(a,b,c){return(a.o(b,c)<<24)+(a.o(b,c+1)<<16)+(a.o(b,c+2)<<8)+a.o(b,c+3)}w.Wd=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var i=Ze(this,a,b+4*h);d[h]=i;e=Math.max(e,i);f=Math.min(f,i)}return[d,e,f]};w.Uc=function(a,b){return(this.o(a,b+1)<<8)+this.o(a,b)};
w.jf=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var i=(this.o(a,b+2*h)<<8)+this.o(a,b+2*h+1);d[h]=i;e=Math.max(e,i);f=Math.min(f,i)}return[d,e,f]};w.Ug=function(a,b){var c=this.o(a,b);return 127<c?c-256:c};w.o=function(a,b){return a.charCodeAt(b)&255};w.Vd=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var i=this.o(a,b+h);d[h]=i;e=Math.max(e,i);f=Math.min(f,i)}return[d,e,f]};
function bf(a,b,c,d){for(var e=c[2],f=c[1],c=c[0],h=a.K!=q,i=f*c,k=Array(e),m=0;m<e;m++){k[m]=Array(f);for(var n=0;n<f;n++)k[m][n]=Array(c)}for(var l=0,m=m=0;m<e;m++){for(var j=b.slice(m*i,(m+1)*i),n=new Uint8Array(4*i),s=0,u=0,v=0,s=0;s<f;s++)for(u=0;u<c;u++){var l=j[v],D=0,E=0,I=0,B=0;a.p?((B=a.p.M.get(Math.floor(l)))||(B=a.p.M.get(a.p.M.O()-1)),D=255*B[1],E=255*B[2],I=255*B[3],B=255*B[4]):(D=E=I=255*(l/d),B=255);var F=4*v;n[F]=D;n[++F]=E;n[++F]=I;n[++F]=B;k[m][s][u]=l;v++}s=l=new fd;s.Pb=n;s.c=
p;n=l;n.vc=c;n.c=p;n=l;n.uc=f;n.c=p;j=a.ud.children()[m];j.Zc(l);h&&(j.K=a.K.ud.children()[m].L)}for(s=0;s<f;s++){n=new Uint8Array(4*e*c);for(m=v=0;m<e;m++)for(u=0;u<c;u++)l=k[m][s][u],a.p?((B=a.p.M.get(Math.floor(l)))||(B=a.p.M.get(a.p.M.O()-1)),D=255*B[1],E=255*B[2],I=255*B[3],B=255*B[4]):(D=E=I=255*(l/d),B=255),F=4*v,n[F]=D,n[++F]=E,n[++F]=I,n[++F]=B,v++;b=l=new fd;b.Pb=n;b.c=p;b=l;b.vc=c;b.c=p;b=l;b.uc=e;b.c=p;j=a.td.children()[s];j.Zc(l);h&&(j.K=a.K.td.children()[s].L)}for(u=0;u<c;u++){n=new Uint8Array(4*
e*f);for(m=v=0;m<e;m++)for(s=0;s<f;s++)l=k[m][s][u],a.p?((B=a.p.M.get(Math.floor(l)))||(B=a.p.M.get(a.p.M.O()-1)),D=255*B[1],E=255*B[2],I=255*B[3],B=255*B[4]):(D=E=I=255*(l/d),B=255),F=4*v,n[F]=D,n[++F]=E,n[++F]=I,n[++F]=B,v++;b=l=new fd;b.Pb=n;b.c=p;b=l;b.vc=f;b.c=p;b=l;b.uc=e;b.c=p;j=a.sd.children()[u];j.Zc(l);h&&(j.K=a.K.sd.children()[u].L)}};function cf(){Y.call(this);this._className="parserSTL"}C(cf,Y);cf.prototype.parse=function(a,b){for(var c=b.split("\n"),d=c.length,e=a.k,f=a.q,h=0,i=d%8;i--;)this.A(e,f,c[h]),h++;for(i=0.125*d^0;i--;)this.A(e,f,c[h]),h++,this.A(e,f,c[h]),h++,this.A(e,f,c[h]),h++,this.A(e,f,c[h]),h++,this.A(e,f,c[h]),h++,this.A(e,f,c[h]),h++,this.A(e,f,c[h]),h++,this.A(e,f,c[h]),h++;c=new jd;c.Q=a;this.dispatchEvent(c)};
cf.prototype.A=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),d=c.split(" ");if("vertex"==d[0]){var c=parseFloat(d[1]),e=parseFloat(d[2]),d=parseFloat(d[3]);a.add(c,e,d)}else"facet"==d[0]&&(c=parseFloat(d[2]),e=parseFloat(d[3]),d=parseFloat(d[4]),b.add(c,e,d),b.add(c,e,d),b.add(c,e,d))};A("X.parserSTL",cf);A("X.parserSTL.prototype.parse",cf.prototype.parse);function df(){Y.call(this);this._className="parserVTK"}C(df,Y);
df.prototype.parse=function(a,b){var c=a.k,d=a.q,e=b.split("\n"),f=e.length,h=new P,i=new P;this.J=[];this.ea=gd;this.nd=this.Oa=this.Ea=this.Pa=r;for(var k=0,m=f%8;m--;)this.A(h,i,e[k]),k++;for(m=0.125*f^0;m--;)this.A(h,i,e[k]),k++,this.A(h,i,e[k]),k++,this.A(h,i,e[k]),k++,this.A(h,i,e[k]),k++,this.A(h,i,e[k]),k++,this.A(h,i,e[k]),k++,this.A(h,i,e[k]),k++,this.A(h,i,e[k]),k++;if(this.ea==gd){e=i.length();k=f=this.J.length;do{var m=this.J[f-k],n=m.length,l;for(l=0;l<n;l++){var j=parseInt(m[l],10),
s=h.get(j);c.add(s[0],s[1],s[2]);j<e?(j=i.get(j),d.add(j[0],j[1],j[2])):(j=new Q(s[0],s[1],s[2]),j.normalize(),d.add(j.x,j.y,j.b))}k--}while(0<k)}else if("TRIANGLE_STRIPS"==this.ea){e=i.length();k=f=this.J.length;do{m=this.J[f-k];n=m.length;for(l=0;l<n;l++)j=parseInt(m[l],10),s=h.get(j),c.add(s[0],s[1],s[2]),(0==l||l==n-1)&&c.add(s[0],s[1],s[2]),j<e?(j=i.get(j),d.add(j[0],j[1],j[2]),(0==l||l==n-1)&&d.add(j[0],j[1],j[2])):(j=new Q(s[0],s[1],s[2]),j.normalize(),d.add(j.x,j.y,j.b),(0==l||l==n-1)&&d.add(j.x,
j.y,j.b));k--}while(0<k)}else if("LINES"==this.ea){e=i.length();k=f=this.J.length;do{m=this.J[f-k];n=m.length;for(l=0;l<n-1;l++){var u=parseInt(m[l],10),j=parseInt(m[l+1],10),v=h.get(u),s=h.get(j);c.add(v[0],v[1],v[2]);c.add(s[0],s[1],s[2]);u<e-1?(s=i.get(u),j=i.get(j),d.add(s[0],s[1],s[2]),d.add(j[0],j[1],j[2])):(j=new Q(v[0],v[1],v[2]),j.normalize(),d.add(j.x,j.y,j.b),j=new Q(s[0],s[1],s[2]),j.normalize(),d.add(j.x,j.y,j.b))}k--}while(0<k)}else if("POINTS"==this.ea){e=i.length();k=f=this.J.length;
do{m=this.J[f-k];n=m.length;for(l=0;l<n;l++)j=parseInt(m[l],10),s=h.get(j),c.add(s[0],s[1],s[2]),j<e?(j=i.get(j),d.add(j[0],j[1],j[2])):(j=new Q(s[0],s[1],s[2]),j.normalize(),d.add(j.x,j.y,j.b));k--}while(0<k)}else if("POLYGONS"==this.ea){e=i.length();k=f=this.J.length;do{m=this.J[f-k];n=m.length;for(l=0;l<n;l++)j=parseInt(m[l],10),s=h.get(j),c.add(s[0],s[1],s[2]),j<e?(j=i.get(j),d.add(j[0],j[1],j[2])):(j=new Q(s[0],s[1],s[2]),j.normalize(),d.add(j.x,j.y,j.b));k--}while(0<k)}a.Ab(this.ea);c=new jd;
c.Q=a;this.dispatchEvent(c)};
df.prototype.A=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,e=c[0];if("POINTS"==e)this.Pa=p,this.Oa=this.Ea=r;else if("VERTICES"==e)this.Ea=p,this.Oa=this.Pa=r,a=parseInt(c[1],10),3<=a?this.ea=gd:1==a?this.ea="POINTS":g(Error("VTK file not supported!")),this.J=[];else if("TRIANGLE_STRIPS"==e)this.Ea=p,this.Oa=this.Pa=r,this.ea="TRIANGLE_STRIPS",this.J=[];else if("LINES"==e)this.Ea=p,this.Oa=this.Pa=r,this.ea="LINES",this.J=[];else if("POLYGONS"==e)this.Ea=p,this.Oa=this.Pa=
r,this.ea="POLYGONS",this.J=[];else if("POINT_DATA"==e)this.Oa=p,this.Ea=this.Pa=r;else if(this.Pa)if(1==d||isNaN(parseFloat(e)))this.Pa=r;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]);a.add(e,f,h)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),a.add(e,f,h));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,e,c))}else this.Ea?1==d||isNaN(parseFloat(e))?this.Ea=r:this.J.push(c.slice(1)):this.Oa&&("NORMALS"==e?this.nd=p:1==d||isNaN(parseFloat(e))?
this.nd=this.Oa=r:this.nd&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]),b.add(e,f,h)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),b.add(e,f,h)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,e,c))))};A("X.parserVTK",df);A("X.parserVTK.prototype.parse",df.prototype.parse);function ef(){Y.call(this);this._className="parserFSM"}C(ef,Y);
ef.prototype.parse=function(a,b){var c=a.k,d=a.q,e=new P,f;f=3;var h=0,i;do i=this.o(b,f++),h++;while(200>h&&10!=i);f++;var k=Ze(this,b,f);f+=4;h=Ze(this,b,f);f+=4;i=[];for(var m=0,m=0;m<k;m++){var n=We(this,b,f);f+=4;var l=We(this,b,f);f+=4;var j=We(this,b,f);f+=4;i[m]=0;e.add(n,l,j)}k=[];m=[];for(n=0;n<h;n++){var s=Ze(this,b,f);f+=4;j=Ze(this,b,f);f+=4;l=Ze(this,b,f);f+=4;i[s]+=1;i[j]+=1;i[l]+=1;k.push([s,j,l]);m.push(new Q(0,0,0))}for(n=0;n<h;n++){var s=k[n][0],j=k[n][1],l=k[n][2],u=e.get(s);f=
e.get(j);var v=e.get(l),u=new Q(u[0],u[1],u[2]),v=new Q(v[0],v[1],v[2]);f=(new Q(f[0],f[1],f[2])).d().sa(u);u=v.d().sa(u);f=Pc(f,u).normalize();m[s]=m[s].add(f);m[j]=m[j].add(f);m[l]=m[l].add(f)}for(n=0;n<h;n++)s=k[n][0],j=k[n][1],l=k[n][2],u=e.get(s),f=e.get(j),v=e.get(l),c.add(u[0],u[1],u[2]),c.add(f[0],f[1],f[2]),c.add(v[0],v[1],v[2]),s=m[s].scale(1/i[s]).normalize(),j=m[j].scale(1/i[j]).normalize(),l=m[l].scale(1/i[l]).normalize(),d.add(s.x,s.y,s.b),d.add(j.x,j.y,j.b),d.add(l.x,l.y,l.b);a.Ab(gd);
c=new jd;c.Q=a;this.dispatchEvent(c)};A("X.parserFSM",ef);A("X.parserFSM.prototype.parse",ef.prototype.parse);function ff(a){function b(){O+=8;return Tc<mc.length?mc.charCodeAt(Tc++)&255:-1}function c(){var a;O++;a=N&1;N>>=1;0==N&&(N=b(),a=N&1,N=N>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=da[b]>>8-a);return b}function e(a){ea++;I[B++]=a;s.push(String.fromCharCode(a));32768==B&&(B=0)}function f(){this.Ta=this.Sa=0;this.Mc=q;this.Se=-1}function h(){for(;;){if(Mb[ta]>=$e)return-1;if(af[Mb[ta]]==ta)return Mb[ta]++;Mb[ta]++}}function i(){var a=Nb[Ma],b;u&&document.write("<br>len:"+ta+
" treepos:"+Ma);if(17==ta)return-1;Ma++;ta++;b=h();u&&document.write("<br>IsPat "+b);if(0<=b)a.Sa=b,u&&document.write("<br>b0 "+a.Sa);else if(a.Sa=32768,u&&document.write("<br>b0 "+a.Sa),i())return-1;b=h();if(0<=b)a.Ta=b,u&&document.write("<br>b1 "+a.Ta),a.Mc=q;else if(a.Ta=32768,u&&document.write("<br>b1 "+a.Ta),a.Mc=Nb[Ma],a.Se=Ma,i())return-1;ta--;return 0}function k(a,b,c){u&&document.write("currentTree "+a+" numval "+b+" lengths "+c+" show 0");Nb=a;Ma=0;af=c;$e=b;for(a=0;17>a;a++)Mb[a]=0;ta=
0;if(i())return u&&window.console.log("invalid huffman tree\n"),-1;if(u){document.write("<br>Tree: "+Nb.length);for(a=0;32>a;a++)document.write("Places["+a+"].b0="+Nb[a].Sa+"<br>"),document.write("Places["+a+"].b1="+Nb[a].Ta+"<br>")}return 0}function m(a){for(var b,d,e=0,f=a[e];;)if(b=c(),u&&document.write("b="+b),b){if(!(f.Ta&32768))return u&&document.write("ret1"),f.Ta;f=f.Mc;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.Sa&32768))return u&&document.write("ret2"),f.Sa;e++;f=a[e]}}
function n(){var a,h,i,l;do{a=c();h=d(2);switch(h){case 0:u&&window.console.log("Stored\n");break;case 1:u&&window.console.log("Fixed Huffman codes\n");break;case 2:u&&window.console.log("Dynamic Huffman codes\n");break;case 3:u&&window.console.log("Reserved block type!!\n");break;default:u&&window.console.log("Unexpected value %d!\n",h)}if(0==h){var n;N=1;n=b();n|=b()<<8;h=b();h|=b()<<8;for((n^~h)&65535&&document.write("BlockLen checksum mismatch\n");n--;)h=b(),e(h)}else if(1==h)for(var j;;)if(j=
da[d(7)]>>1,23<j?(j=j<<1|c(),199<j?(j-=128,j=j<<1|c()):(j-=48,143<j&&(j+=136))):j+=256,256>j)e(j);else if(256==j)break;else{j-=257;l=d(rb[j])+la[j];j=da[d(5)]>>3;8<db[j]?(n=d(8),n|=d(db[j]-8)<<8):n=d(db[j]);n+=Uc[j];for(j=0;j<l;j++)h=I[B-n&32767],e(h)}else if(2==h){var s=Array(320);h=257+d(5);n=1+d(5);i=4+d(4);for(j=0;19>j;j++)s[j]=0;for(j=0;j<i;j++)s[Nd[j]]=d(3);l=fa.length;for(i=0;i<l;i++)fa[i]=new f;if(k(fa,19,s)){B=0;return}if(u){document.write("<br>distanceTree");for(j=0;j<fa.length;j++)document.write("<br>"+
fa[j].Sa+" "+fa[j].Ta+" "+fa[j].Mc+" "+fa[j].Se)}l=h+n;i=0;var v=-1;for(u&&document.write("<br>n="+l+" bits: "+O+"<br>");i<l;)if(v++,j=m(fa),u&&document.write("<br>"+v+" i:"+i+" decode: "+j+"    bits "+O+"<br>"),16>j)s[i++]=j;else if(16==j){var D;j=3+d(2);if(i+j>l){B=0;return}for(D=i?s[i-1]:0;j--;)s[i++]=D}else{j=17==j?3+d(3):11+d(7);if(i+j>l){B=0;return}for(;j--;)s[i++]=0}l=pa.length;for(i=0;i<l;i++)pa[i]=new f;if(k(pa,h,s)){B=0;return}l=pa.length;for(i=0;i<l;i++)fa[i]=new f;j=[];l=s.length;for(i=
h;i<l;i++)j[i-h]=s[i];if(k(fa,n,j)){B=0;return}for(u&&document.write("<br>literalTree");;)if(j=m(pa),256<=j){j-=256;if(0==j)break;j--;l=d(rb[j])+la[j];j=m(fa);8<db[j]?(n=d(8),n|=d(db[j]-8)<<8):n=d(db[j]);for(n+=Uc[j];l--;)h=I[B-n&32767],e(h)}else e(j)}}while(!a);B=0;N=1}function l(){u&&window.console.log("NEXTFILE");s=[];var a=[];F=r;a[0]=b();a[1]=b();u&&window.console.log("type: "+a[0]+" "+a[1]);120==a[0]&&218==a[1]&&(u&&window.console.log("GEONExT-GZIP"),n(),u&&window.console.log(s.join("")),E[D]=
Array(2),E[D][0]=s.join(""),E[D][1]="geonext.gxt",D++);31==a[0]&&139==a[1]&&(u&&window.console.log("GZIP"),j(),u&&window.console.log(s.join("")),E[D]=Array(2),E[D][0]=s.join(""),E[D][1]="file",D++);if(80==a[0]&&75==a[1]&&(F=p,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u&&window.console.log("ZIP-Version: "+a[1]+" "+a[0]/10+"."+a[0]%10);v=b();v|=b()<<8;u&&window.console.log("gpflags: "+v);a=b();a|=b()<<8;u&&window.console.log("method: "+a);b();b();b();b();var c=b(),c=c|b()<<8,c=c|b()<<16,
c=c|b()<<24,d=b(),d=d|b()<<8,d=d|b()<<16,d=d|b()<<24,e=b(),e=e|b()<<8,e=e|b()<<16,e=e|b()<<24;u&&window.console.log("local CRC: "+c+"\nlocal Size: "+e+"\nlocal CompSize: "+d);c=b();c|=b()<<8;d=b();d|=b()<<8;u&&window.console.log("filelen "+c);e=0;for(T=[];c--;){var f=b();"/"==f|":"==f?e=0:e<$-1&&(T[e++]=String.fromCharCode(f))}u&&window.console.log("nameBuf: "+T);ma||(ma=T);for(e=0;e<d;)b(),e++;ea=0;8==a&&(n(),u&&window.console.log(s.join("")),E[D]=Array(2),E[D][0]=s.join(""),E[D][1]=T.join(""),D++);
j()}}function j(){var a=[],c;v&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b(),u&&window.console.log("CRC:"));F&&l();a[0]=b();if(8!=a[0])u&&window.console.log("Unknown compression method!");else{v=b();u&&v&-32&&window.console.log("Unknown flags set!");b();b();b();b();b();b();if(v&4){a[0]=b();a[2]=b();ta=a[0]+256*a[1];u&&window.console.log("Extra field size: "+ta);for(a=0;a<ta;a++)b()}if(v&8){a=0;for(T=[];c=b();){if("7"==
c||":"==c)a=0;a<$-1&&(T[a++]=c)}u&&window.console.log("original file name: "+T)}if(v&16)for(;b(););v&2&&(b(),b());n();b();b();b();b();b();b();b();b();F&&l()}}var s=[],u=r,v,D=0,E=[],I=Array(32768),B=0,F=r,ea,da=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,
74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,
251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],la=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],rb=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],Uc=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],db=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Nd=[16,17,18,0,8,7,9,6,10,5,
11,4,12,3,13,2,14,1,15],mc=a,Tc=0,N=1,O=0,$=256,T=[],ma,pa=Array(288),fa=Array(32),Ma=0,Nb=q,ta=0,Mb=Array(17);Mb[0]=0;var af,$e;ff.prototype.Cf=function(){u&&window.console.log(mc);l();return E}};function gf(){Y.call(this);this._className="parserNRRD"}C(gf,Y);
gf.prototype.parse=function(a,b){var c=0,d=b.match(/^([\s\S]*?)\r?\n\r?\n/),c=d[0].length,e,f,h,i,k,m,d=d[1].split(/\r?\n/);for(k=0,m=d.length;k<m;k++)if(e=d[k],e.match(/NRRD\d+/))this.qg=p;else if(!e.match(/^#/)&&(i=e.match(/(.*):(.*)/)))f=i[1].trim(),e=i[2].trim(),(h=this.dg[f])?h.call(this,e):this[f]=e;this.qg||g(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding&&g(Error("Only raw or gz/gzip encoding is allowed"));if(!this.aa&&(this.aa=[new Q(1,0,0),
new Q(0,1,0),new Q(0,0,1)],this.ce)){d=[];for(i=0;2>=i;i++)d.push(!isNaN(this.ce[i])?this.aa[i].scale(this.ce[i]):o)}i=0;i="gzip"==this.encoding||"gz"==this.encoding?(new ff(b.substr(c))).Cf()[0][0]:b.substr(c);c=this.jb[0]*this.jb[1]*this.jb[2];d=Array(c);k=-Infinity;m=Infinity;for(e=0;e<c;e++)f=this.Tc(i,0+e*this.Rc),d[e]=f,k=Math.max(k,f),m=Math.min(m,f);a.ca=[this.jb[0],this.jb[1],this.jb[2]];a.F=[(new Q(this.aa[0][0],this.aa[0][1],this.aa[0][2])).fb(),(new Q(this.aa[1][0],this.aa[1][1],this.aa[1][2])).fb(),
(new Q(this.aa[2][0],this.aa[2][1],this.aa[2][2])).fb()];a.pb=[m,k];a.ee(m,k);a.na();bf(a,d,this.jb,k);c=new jd;c.Q=a;this.dispatchEvent(c)};
gf.prototype.dg={type:function(a){switch(a){case "unsigned char":case "uint8":this.Tc=this.o;this.Rc=1;break;case "signed char":case "int8":this.Tc=this.Ug;this.Rc=1;break;case "short":case "signed short":case "unsigned short":case "short int":case "int16":this.Tc=this.Uc;this.Rc=2;break;case "int":case "int32":break;case "float":this.Tc=this.fc;this.Rc=4;break;default:g(Error("Only short/int/int8/float data is allowed. Found "+a))}return this.type=a},endian:function(a){return a},encoding:function(a){return this.encoding=
a},dimension:function(a){return parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.jb=e},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.aa=function(){var a,f,h;h=[];for(a=0,f=c.length;a<f;a++)d=c[a],h.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];for(a=0,c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return h}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.ce=e}};A("X.parserNRRD",gf);A("X.parserNRRD.prototype.parse",gf.prototype.parse);function hf(a){x(a)||g(Error("Invalid data."));L.call(this);this._className="parserHelper";this.ie=a;this.pc=0;this.tf=this.je=1;this.th=2;this.ae=this.uf=4}C(hf,L);hf.prototype.hf=aa();hf.prototype.data=t("ie");function jf(a,b,c){a.hf=b;a.je=c}function Z(a,b){x(b)||(b=1);var c=a.hf(a.ie,a.pc,b)[0];a.pc+=a.je*b;return 1==b?c[0]:c};function kf(){Y.call(this);this._className="parserMGZ"}C(kf,Y);
kf.prototype.parse=function(a,b,c){var d=0,e=d=c?(new ff(b.substr(0))).Cf()[0][0]:b.substr(0),f=d=c=0,h=0,h=0,i=[[0,0,0,0],[0,0,0,0],[0,0,0,0]],b=[],k=[],h=q,m,n={value:0,name:"uchar",size:1,Gc:this.Vd.bind(this)},l={value:1,name:"int",size:4,Gc:this.Wd.bind(this)},j={value:3,name:"float",size:4,Gc:this.Sc.bind(this)},s={value:4,name:"short",size:2,Gc:this.jf.bind(this)},k=256,e=new hf(e);jf(e,this.Wd.bind(this),e.uf);Z(e);c=Z(e);d=Z(e);f=Z(e);Z(e);h=Z(e);switch(h){case 0:m=n;break;case 1:m=l;break;
case 3:m=j;break;case 4:m=s}Z(e);jf(e,this.jf.bind(this),e.th);h=Z(e);k-=2;0<h&&(jf(e,this.Sc.bind(this),e.ae),k-=60,b[0]=Z(e),b[1]=Z(e),b[2]=Z(e),i[0][0]=Z(e),i[1][0]=Z(e),i[2][0]=Z(e),i[0][1]=Z(e),i[1][1]=Z(e),i[2][1]=Z(e),i[0][2]=Z(e),i[1][2]=Z(e),i[2][2]=Z(e),i[0][3]=Z(e),i[1][3]=Z(e),i[2][3]=Z(e));jf(e,this.Vd.bind(this),e.tf);Z(e,k);k=c*d*f;jf(e,m.Gc,m.size);k=Z(e,k);e.pc+16<e.data().length&&(jf(e,this.Sc.bind(this),e.ae),Z(e),Z(e),Z(e),Z(e));m=k;i={xg:0,Fh:0,$f:0,Yg:1,vh:0,min:0,yg:0,max:0,
vg:0};e=m.length;i.size=e;l=0;l=1;h=0;for(n=e;0<=n;n--)h+=m[n],l*=m[n],i.min>=m[n]&&(i.min=m[n],i.yg=n),i.max<=m[n]&&(i.max=m[n],i.vg=n);i.Yg=l;i.vh=h;for(l=i.xg=h/e,n=e,h=0;n--;h+=Math.pow(m[n]-l,2));h=(i.$f=Math.sqrt(i.Fh=h/e),i);c=[c,d,f];a.ca=c;a.F=b;b=h.min;d=h.max;a.pb=[b,d];a.ee(b,d);a.na();bf(a,k,c,d);b=new jd;b.Q=a;this.dispatchEvent(b)};A("X.parserMGZ",kf);A("X.parserMGZ.prototype.parse",kf.prototype.parse);function lf(){Y.call(this);this._className="parserCRV"}C(lf,Y);lf.prototype.parse=function(a,b){var c=new hf(b);jf(c,this.Vd.bind(this),c.tf);Z(c);Z(c);Z(c);jf(c,this.Wd.bind(this),c.uf);var d=Z(c);Z(c);Z(c);var e=[];jf(c,this.Sc.bind(this),c.ae);e=Z(c,d);a.hi=e;c=new jd;c.Q=a;this.dispatchEvent(c)};A("X.parserCRV",lf);A("X.parserCRV.prototype.parse",lf.prototype.parse);function mf(){Y.call(this);this._className="parserTRK"}C(mf,Y);
mf.prototype.parse=function(a,b){var c=a.k,d=a.q,e=a.ba,f=0,h=f+6,i=0,k=Infinity,m;for(m=0;3>m;m++)var n=this.Uc(b,h+2*m),i=Math.max(i,n),k=Math.min(k,n);var l=Xe(this,b,f+12,3)[0];Xe(this,b,f+24,3);var j=this.Uc(b,f+36),s=this.Uc(b,f+238);Xe(this,b,f+440,16);Xe(this,b,f+956,6);for(var h=Ye(this,b,f+988),f=Ye(this,b,f+996),i=[],u=q,v=q,D=q,E=q,I=n=q,k=0;k<h;k++){var B=Ye(this,b,f),F=new P,f=f+4;for(m=0;m<B;m++){var ea=this.fc(b,f),f=f+4,da=this.fc(b,f),f=f+4,la=this.fc(b,f),f=f+4;0<j&&(Xe(this,b,
f,j),f+=4*j);ea/=l[0];da/=l[1];la/=l[2];F.add(ea,da,la)}0<s&&(f+=4*s);m=F.Ja;var B=F.Ga,ea=F.Ka,da=F.Ha,la=F.La,rb=F.Ia;if(!u||m<u)u=m;if(!v||B>v)v=B;if(!D||ea<D)D=ea;if(!E||da>E)E=da;if(!n||la<n)n=la;if(!I||rb>I)I=rb;i.push(F)}f=(u+v)/2;D=(D+E)/2;n=(n+I)/2;for(k=0;k<h;k++){I=i[k];E=I.count();for(m=0;m<E-1;m++)j=I.get(m),l=I.get(m+1),c.add(j[0],j[1],j[2]),c.add(l[0],l[1],l[2]),s=j[0]-f,u=j[1]-D,v=j[2]-n,F=Math.sqrt(s*s+u*u+v*v),B=l[0]-f,ea=l[1]-D,da=l[2]-n,la=Math.sqrt(B*B+ea*ea+da*da),d.add(s/F,
u/F,v/F),d.add(B/la,ea/la,da/la),l=[Math.abs(l[0]-j[0]),Math.abs(l[1]-j[1]),Math.abs(l[2]-j[2])],j=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]),l[0]/=j,l[1]/=j,l[2]/=j,e.add(l[0],l[1],l[2]),e.add(l[0],l[1],l[2])}a.Ab("LINES");c=new jd;c.Q=a;this.dispatchEvent(c)};A("X.parserTRK",mf);A("X.parserTRK.prototype.parse",mf.prototype.parse);function nf(){Y.call(this);this._className="parserLUT"}C(nf,Y);nf.prototype.parse=function(a,b,c){var b=b.split("\n"),d=b.length,e;for(e=0;e<d;++e){var f=b[e],f=f.replace(/^\s+|\s+$/g,"");"#"!=f[0]&&(f=f.split(" "),f=f.filter(function(a){return""!=a}),6==f.length&&(f[2]=parseInt(f[2],10)/255,f[3]=parseInt(f[3],10)/255,f[4]=parseInt(f[4],10)/255,f[5]=parseInt(f[5],10)/255,c.add(parseInt(f[0],10),f[1],f[2],f[3],f[4],f[5],10)))}c=new jd;c.Q=a;this.dispatchEvent(c)};A("X.parserLUT",nf);
A("X.parserLUT.prototype.parse",nf.prototype.parse);function of(){L.call(this);this._className="loader";this.Gb=q;this.Ob=0}C(of,L);function pf(a){x(a.Gb)||(a.Gb=new Fb);return a.Gb}function qf(a){return!x(a.Gb)?p:!a.Gb.Ad(r)}w=of.prototype;w.tg=function(a){rf(this,1.7);setTimeout(function(){Dc(a.L.file());a.Ua();pf(this).set(a.id(),p)}.bind(this),100)};function rf(a,b){a.Ob+=b/pf(a).O()/3;1<a.Ob&&(a.Ob=1);var c=new Ad;c.te=a.Ob;a.dispatchEvent(c)}w.Nc=function(){g(Error("Could not get the file."))};
w.rg=function(a,b){setTimeout(function(){var c=new nf;lc(c,sc,this.Tg.bind(this));c.parse(b,a.response,b.p)}.bind(this),100)};
w.sg=function(a,b){rf(this,1);setTimeout(function(){var c=b.file().path().split(".").pop().toLowerCase();if("stl"==c)c=new cf,lc(c,sc,this.gb.bind(this)),c.parse(b,a.response);else if("vtk"==c)c=new df,lc(c,sc,this.gb.bind(this)),c.parse(b,a.response);else if("trk"==c)c=new mf,lc(c,sc,this.gb.bind(this)),c.parse(b,a.response);else if("fsm"==c)c=new ef,lc(c,sc,this.gb.bind(this)),c.parse(b,a.response);else if("nrrd"==c)c=new gf,lc(c,sc,this.gb.bind(this)),c.parse(b,a.response);else if("crv"==c)c=new lf,
lc(c,sc,this.gb.bind(this)),c.parse(b,a.response);else if("mgh"==c||"mgz"==c){var d=new kf;lc(d,sc,this.gb.bind(this));d.parse(b,a.response,"mgz"==c)}}.bind(this),100)};w.gb=function(a){rf(this,1);setTimeout(function(){var b=a.Q;Dc(b.file());b.Ua();pf(this).set(b.id(),p)}.bind(this),100)};w.Tg=function(a){setTimeout(function(){var b=a.Q;Dc(b.p.file());b.Ua();pf(this).set(b.p.id(),p)}.bind(this),100)};function sf(a){this.ab=a||tf}function tf(a,b){return""+a<""+b?-1:""+a>""+b?1:0}w=sf.prototype;w.U=q;w.ab=q;w.Aa=q;w.za=q;w.g=0;
w.add=function(a){if(this.U==q)return this.za=this.Aa=this.U=new uf(a),this.g=1,p;var b=r;vf(this,function(c){var d=q;if(0<this.ab(c.value,a)){if(d=c.left,c.left==q){var e=new uf(a,c);c.left=e;c==this.Aa&&(this.Aa=e);b=p;wf(this,c)}}else 0>this.ab(c.value,a)&&(d=c.right,c.right==q&&(e=new uf(a,c),c.right=e,c==this.za&&(this.za=e),b=p,wf(this,c)));return d});b&&(this.g+=1);return b};
w.remove=function(a){var b=q;vf(this,function(c){var d=q;if(0<this.ab(c.value,a))d=c.left;else if(0>this.ab(c.value,a))d=c.right;else if(b=c.value,c.left!=q||c.right!=q){var e=q,f;if(c.left!=q){f=xf(this,c.left);if(f!=c.left){if(f.parent.right=f.left)f.left.parent=f.parent;f.left=c.left;f.left.parent=f;e=f.parent}f.parent=c.parent;f.right=c.right;f.right&&(f.right.parent=f);c==this.za&&(this.za=f)}else{f=yf(this,c.right);if(f!=c.right){if(f.parent.left=f.right)f.right.parent=f.parent;f.right=c.right;
f.right.parent=f;e=f.parent}f.parent=c.parent;f.left=c.left;f.left&&(f.left.parent=f);c==this.Aa&&(this.Aa=f)}zf(c)?c.parent.left=f:Af(c)?c.parent.right=f:this.U=f;wf(this,e?e:f)}else zf(c)?(c.parent.left=q,c==this.Aa&&(this.Aa=c.parent),wf(this,c.parent)):Af(c)?(c.parent.right=q,c==this.za&&(this.za=c.parent),wf(this,c.parent)):this.clear();return d});b&&(this.g=this.U?this.g-1:0);return b};w.clear=function(){this.za=this.Aa=this.U=q;this.g=0};
w.contains=function(a){var b=r;vf(this,function(c){var d=q;0<this.ab(c.value,a)?d=c.left:0>this.ab(c.value,a)?d=c.right:b=p;return d});return b};w.O=t("g");w.ac=function(){return yf(this).value};w.$b=function(){return xf(this).value};w.ha=function(){var a=[];Bf(this,function(b){a.push(b)});return a};
function Bf(a,b){if(a.U){var c,d=c=yf(a);for(c=c.left?c.left:c;d!=q;)if(d.left!=q&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=d.right!=q&&d.right!=c?d.right:d.parent;c=e}}}function vf(a,b,c){for(c=c?c:a.U;c&&c!=q;)c=b.call(a,c)}
function wf(a,b){vf(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Cf(this,a.left),Df(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Df(this,a.right),Cf(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Cf(a,b){zf(b)?(b.parent.left=b.right,b.right.parent=b.parent):Af(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.U=b.right,a.U.parent=q);var c=b.right;b.right=b.right.left;b.right!=q&&(b.right.parent=b);c.left=b;b.parent=c}function Df(a,b){zf(b)?(b.parent.left=b.left,b.left.parent=b.parent):Af(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.U=b.left,a.U.parent=q);var c=b.left;b.left=b.left.right;b.left!=q&&(b.left.parent=b);c.right=b;b.parent=c}
function yf(a,b){if(!b)return a.Aa;var c=b;vf(a,function(a){var b=q;a.left&&(b=c=a.left);return b},b);return c}function xf(a,b){if(!b)return a.za;var c=b;vf(a,function(a){var b=q;a.right&&(b=c=a.right);return b},b);return c}function uf(a,b){this.value=a;this.parent=b?b:q}uf.prototype.left=q;uf.prototype.right=q;uf.prototype.height=1;function Af(a){return!!a.parent&&a.parent.right==a}function zf(a){return!!a.parent&&a.parent.left==a};function Ef(){}(function(a){a.He=function(){return a.ng||(a.ng=new a)}})(Ef);Ef.prototype.Qd=0;Ef.He();function Ff(a){this.oa=a||Hd()}C(Ff,Cc);w=Ff.prototype;w.mg=Ef.He();w.Oe=q;w.eb=r;w.h=q;w.wb=q;w.sb=q;w.Ub=q;w.Ih=r;w.e=t("h");w.$d=function(a){this.wb&&this.wb!=a&&g(Error("Method not supported"));Ff.D.$d.call(this,a)};w.Hc=t("oa");w.tb=function(){this.h=this.oa.createElement("div")};w.gc=function(a){this.zb(a)};w.zb=function(a,b){this.eb&&g(Error("Component already rendered"));this.h||this.tb();a?a.insertBefore(this.h,b||q):this.oa.v.body.appendChild(this.h);(!this.wb||this.wb.eb)&&this.Fc()};
w.Fc=function(){this.eb=p;Gf(this,function(a){!a.eb&&a.e()&&a.Fc()})};w.Xb=function(){Gf(this,function(a){a.eb&&a.Xb()});this.Jc&&this.Jc.Vc();this.eb=r};w.u=function(){Ff.D.u.call(this);this.eb&&this.Xb();this.Jc&&(this.Jc.ga(),delete this.Jc);Gf(this,function(a){a.ga()});!this.Ih&&this.h&&Sd(this.h);this.wb=this.h=this.Ub=this.sb=q};w.bc=function(){return!!this.sb&&0!=this.sb.length};function Gf(a,b){a.sb&&pb(a.sb,b,o)}
w.removeChild=function(a,b){if(a){var c=y(a)?a:a.Oe||(a.Oe=":"+(a.mg.Qd++).toString(36)),a=this.Ub&&c?(c in this.Ub?this.Ub[c]:o)||q:q;if(c&&a){var d=this.Ub;c in d&&delete d[c];ub(this.sb,a);b&&(a.Xb(),a.h&&Sd(a.h));c=a;c==q&&g(Error("Unable to set parent component"));c.wb=q;Ff.D.$d.call(c,q)}}a||g(Error("Child is not in parent component"));return a};function Hf(){}C(Hf,Cc);w=Hf.prototype;w.ge=0;w.ec=0;w.Pd=100;w.Ge=0;w.de=1;w.pg=r;w.zg=r;w.$c=function(a){a=If(this,a);this.ge!=a&&(this.ge=a+this.Ge>this.Pd?this.Pd-this.Ge:a<this.ec?this.ec:a,!this.pg&&!this.zg&&this.dispatchEvent("change"))};w.Ic=function(){return If(this,this.ge)};w.ac=function(){return If(this,this.ec)};w.$b=function(){return If(this,this.Pd)};function If(a,b){return a.de==q?b:a.ec+Math.round((b-a.ec)/a.de)*a.de};function Jf(a){this.oa=a||Hd();this.xb=new Hf;J(this.xb,"change",this.jg,r,this)}C(Jf,Ff);var Kf={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};w=Jf.prototype;w.tb=function(){this.ka=this.Hc().tb("div","progress-bar-thumb");var a=Kf[this.ef];this.h=this.Hc().tb("div",a,this.ka);Lf(this);this.e().setAttribute("aria-valuemin",this.ac());this.e().setAttribute("aria-valuemax",this.$b())};
w.Fc=function(){Jf.D.Fc.call(this);G&&7>Xa&&J(this.e(),"resize",this.bd,r,this);this.bd();var a=this.e();a.setAttribute("role","progressbar");a.li="progressbar";this.e().setAttribute("aria-live","polite")};w.Xb=function(){Jf.D.Xb.call(this);Mf(this)};function Mf(a){G&&7>Xa&&nc(a.e(),"resize",a.bd,r,a)}w.Ic=function(){return this.xb.Ic()};w.$c=function(a){this.xb.$c(a);this.e()&&Lf(this)};function Lf(a){var b=a.Ic();a.e().setAttribute("aria-valuenow",b)}w.ac=function(){return this.xb.ac()};w.$b=function(){return this.xb.$b()};
w.ef="horizontal";w.jg=function(){this.bd();this.dispatchEvent("change")};w.bd=function(){if(this.ka){var a=this.ac(),b=this.$b(),a=(this.Ic()-a)/(b-a),b=Math.round(100*a);"vertical"==this.ef?G&&7>Xa?(this.ka.style.top=0,this.ka.style.height="100%",b=this.ka.offsetHeight,a=Math.round(a*b),this.ka.style.top=b-a+"px",this.ka.style.height=a+"px"):(this.ka.style.top=100-b+"%",this.ka.style.height=b+"%"):this.ka.style.width=b+"%"}};w.u=function(){Mf(this);Jf.D.u.call(this);this.ka=q;this.xb.ga()};function Nf(a,b){x(a)||g(Error("No valid parent element."));x(b)||g(Error("Invalid initial value."));Jf.call(this);this._className="progressbar";this.Na=a;this.qc=this.wa=q;this.Va=[];this.Va=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.$c(b);this.Ld()}C(Nf,Jf);
Nf.prototype.Ld=function(){this.Na.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Od("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Va[0]),d=document.createTextNode(this.Va[1]),e=document.createTextNode(this.Va[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.wa=b;this.gc(this.Na);a=this.e();a.style.position="absolute";a.style.top=(this.Na.clientHeight-5)/2;a.style.left=(this.Na.clientWidth-100)/2};
function Of(a){var b=a.e().style.top,c=a.e().style.left;Sd(a.e());var d=new Nf(a.Na,100),e=d.e();e.style.position="absolute";e.style.top=b;e.style.left=c;(e.firstElementChild!=o?e.firstElementChild:Td(e.firstChild)).classList.add("progress-bar-thumb-done");a.qc=d}Nf.prototype.Md=function(){this.wa&&Sd(this.wa);this.e()&&Sd(this.e());this.qc&&Sd(this.qc.e());this.qc=this.wa=q};function Pf(){V.call(this);this._className="volume";this.j=[0,0,0];this.ca=[10,10,10];this.F=[1,1,1];this.hd=this._indexZ=this.gd=this._indexY=this.fd=this._indexX=0;this.sd=new V;this.td=new V;this.ud=new V;this._lowerThreshold=0;this._upperThreshold=1E3;this.pb=[0,1E3];this.ue=this._volumeRendering=r;this.Tb=0;this.K=q}C(Pf,V);w=Pf.prototype;
w.na=function(){this.children().length=0;this.children().push(this.sd);this.children().push(this.td);this.children().push(this.ud);for(var a=0,a=0;3>a;a++){for(var b=(this.ca[a]-1)/2,c=b,d=0,d=0;d<this.ca[a];d++){var e=-b*this.F[a]+d*this.F[a],f=[[this.j[0]+e,this.j[1],this.j[2]],[this.j[0],this.j[1]+e,this.j[2]],[this.j[0],this.j[1],this.j[2]+e]],e=this.children()[a].children(),h=0,i=0;0==a?(h=this.ca[2]*this.F[2]-this.F[2],i=this.ca[1]*this.F[1]-this.F[1]):1==a?(h=this.ca[0]*this.F[0]-this.F[0],
i=this.ca[2]*this.F[2]-this.F[2]):2==a&&(h=this.ca[0]*this.F[0]-this.F[0],i=this.ca[1]*this.F[1]-this.F[1]);f=new Bd(f[a],[[1,0,0],[0,1,0],[0,0,1]][a],[[0,1,0],[0,0,-1],[0,1,0]][a],h,i);f.Qa=this;f.s(d==c);e.push(f)}0==a?this.fd=this._indexX=c:1==a?this.gd=this._indexY=c:2==a&&(this.hd=this._indexZ=c)}this.c=p};
w.Ua=function(){if(0<this.children().length)if(this._volumeRendering!=this.ue&&(this.c=p,this.ue=this._volumeRendering),this._volumeRendering)Qf(this,this.Tb);else{if(this.c){var a=this.children()[this.Tb];a.s(r)}for(var b=0,b=0;3>b;b++){var a=this.children()[b],c=0,d=0;0==b?(c=this._indexX,d=this.fd,this.fd=this._indexX):1==b?(c=this._indexY,d=this.gd,this.gd=this._indexY):2==b&&(c=this._indexZ,d=this.hd,this.hd=this._indexZ);a.children()[parseInt(d,10)].s(r);a.children()[parseInt(c,10)].s(p)}}Pf.D.Ua.call(this)};
w.ag=t("ca");w.dh=t("pb");w.ee=function(a,b){(!x(a)||!z(a)||!x(b)||!z(b)||a>b||a<this.pb[0]||b>this.pb[1])&&g(Error("Invalid threshold range."));this._lowerThreshold=a;this._upperThreshold=b};w.qh=aa();w.s=ba("_visible");w.gh=function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));this.j=a};
function Qf(a,b){if(!(!a.c&&!a._volumeRendering||!a.c&&b==a.Tb)){a.children()[0].children()[parseInt(a._indexX,10)].s(r);a.children()[1].children()[parseInt(a._indexY,10)].s(r);a.children()[2].children()[parseInt(a._indexZ,10)].s(r);var c=a.children()[a.Tb];c.s(r);c=a.children()[b];c.s(p);a.Tb=b}}w.Te=function(){this.K||(this.K=new Rf(this));return this.K};A("X.volume",Pf);A("X.volume.prototype.dimensions",Pf.prototype.ag);A("X.volume.prototype.scalarRange",Pf.prototype.dh);
A("X.volume.prototype.setVisible",Pf.prototype.s);A("X.volume.prototype.setCenter",Pf.prototype.gh);A("X.volume.prototype.setVolumeRendering",Pf.prototype.qh);A("X.volume.prototype.threshold",Pf.prototype.ee);A("X.volume.prototype.modified",Pf.prototype.Ua);A("X.volume.prototype.labelMap",Pf.prototype.Te);function Rf(a){Pf.call(this);this._className="labelMap";this.Qa=a}C(Rf,Pf);Rf.prototype.Ua=function(){var a=new jd;a.Q=this;this.dispatchEvent(a);this.Qa.Ua()};A("X.labelMap",Rf);function Sf(a,b){(!z(a)||!z(b))&&g(Error("A camera needs valid width and height values."));L.call(this);this._className="camera";this.Kf=45;this.tc=new Q(0,0,100);this.Fb=new Q(0,0,0);this.$a=new Q(0,1,0);var c=Float32Array,d;d=a/b;var e=1*Math.tan(this.Kf*Math.PI/360),f=-e;d=new U([[2/(e*d-f*d),0,(e*d+f*d)/(e*d-f*d),0],[0,2/(e-f),(e+f)/(e-f),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]]);this.Mf=new c(d.B());this.l=Tf(this,this.tc,this.Fb);this.Wa=new Float32Array(this.l.B())}C(Sf,L);w=Sf.prototype;
w.Sg=function(a){a instanceof vd||g(Error("Received no valid zoom event."));a.Ya?this.Ef(a.Da):this.Ff(a.Da)};w.Og=function(a){a instanceof td||g(Error("Received no valid pan event."));this.ff(a.lb)};w.Qg=function(a){a instanceof ud||g(Error("Received no valid rotate event."));this.rotate(a.lb)};w.view=t("l");w.ph=function(a){(!x(a)||!(a instanceof U))&&g(Error("Invalid view matrix."));this.l=a;this.Wa=new Float32Array(this.l.B())};w.position=t("tc");
w.Yc=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The position was invalid."));this.tc=new Q(a,b,c);this.reset()};w.reset=function(){this.l=Tf(this,this.tc,this.Fb);this.Wa=new Float32Array(this.l.B())};w.focus=t("Fb");w.ih=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The focus was invalid."));this.Fb=new Q(a,b,c);this.reset()};w.Eh=t("$a");w.oh=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The up-vector was invalid."));this.$a=new Q(a,b,c);this.reset()};
w.ff=function(a){a instanceof Rc||g(Error("Invalid distance vector for pan operation."));a=new Q(-a.x,a.y,0);a=cd(4).translate(a);this.l=new U(a.multiply(this.l));this.Wa=new Float32Array(this.l.B());this.dispatchEvent(new wd)};
w.rotate=function(a){a instanceof Array&&2==a.length?a=new Rc(a[0],a[1]):a instanceof Rc||g(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=cd(4),d=new Q(parseFloat(this.l.I(0,0)),parseFloat(this.l.I(0,1)),parseFloat(this.l.I(0,2))),b=c.rotate(b,new Q(parseFloat(this.l.I(1,0)),parseFloat(this.l.I(1,1)),parseFloat(this.l.I(1,2)))),a=c.rotate(a,d);this.l=new U(this.l.multiply(a.multiply(b)));this.Wa=new Float32Array(this.l.B());this.dispatchEvent(new wd)};
w.Ef=function(a){var b=20;x(a)&&!a&&(b=1);a=new Q(0,0,b);a=cd(4).translate(a);this.l=new U(a.multiply(this.l));this.Wa=new Float32Array(this.l.B());this.dispatchEvent(new wd)};w.Ff=function(a){var b=30;x(a)&&!a&&(b=1);a=new Q(0,0,-b);a=cd(4).translate(a);this.l=new U(a.multiply(this.l));this.Wa=new Float32Array(this.l.B());this.dispatchEvent(new wd)};
function Tf(a,b,c){(!(b instanceof Q)||!(c instanceof Q))&&g(Error("3D vectors required for calculating the view."));var d=cd(4),c=new Q(b.x-c.x,b.y-c.y,b.b-c.b),c=c.normalize(),a=a.$a.d();a.Vb(c)&&(a.b+=1.0E-6);var e=Pc(a,c),a=Pc(c,e),e=e.normalize(),a=a.normalize();S(d,0,0,e.x);S(d,0,1,e.y);S(d,0,2,e.b);S(d,0,3,0);S(d,1,0,a.x);S(d,1,1,a.y);S(d,1,2,a.b);S(d,1,3,0);S(d,2,0,c.x);S(d,2,1,c.y);S(d,2,2,c.b);S(d,2,3,0);S(d,3,0,0);S(d,3,1,0);S(d,3,2,0);S(d,3,3,1);b=b.d();return d.translate(b.C())}
A("X.camera",Sf);A("X.camera.prototype.view",Sf.prototype.view);A("X.camera.prototype.setView",Sf.prototype.ph);A("X.camera.prototype.position",Sf.prototype.position);A("X.camera.prototype.setPosition",Sf.prototype.Yc);A("X.camera.prototype.focus",Sf.prototype.focus);A("X.camera.prototype.setFocus",Sf.prototype.ih);A("X.camera.prototype.up",Sf.prototype.Eh);A("X.camera.prototype.setUp",Sf.prototype.oh);A("X.camera.prototype.pan",Sf.prototype.ff);A("X.camera.prototype.rotate",Sf.prototype.rotate);
A("X.camera.prototype.zoomIn",Sf.prototype.Ef);A("X.camera.prototype.zoomOut",Sf.prototype.Ff);function Uf(a){x(a)||g(Error("An ID to a valid container (<div>..) is required."));a=Kd(a);(!(oa(a)&&1==a.nodeType)||0==a.clientWidth||0==a.clientHeight)&&g(Error("Could not find the given container or it has an undefined size."));L.call(this);this._className="renderer";this.va=a;this.qb=this.va.clientWidth;this.Xa=this.va.clientHeight;this.nb=this.m=this.pd=this.qd=this.a=this.ua=q;this.Ma=new sf(kd);this.Qb=[];this.Kb=this.Nb=this.Jb=this.Mb=this.Ib=this.Lb=q;this.j=[0,0,0];this.qe=q;this.cd=new Fb;
this.Rb=new Fb;this.Sb=new Fb;this.md=new Fb;this.oc=new Fb;this.wc=new Fb;this.xc=new Fb;this.ma=this.Hb=q;this.sc=r;this.config={PROGRESSBAR_ENABLED:p,PICKING_ENABLED:p,ORDERING_ENABLED:p,STATISTICS_ENABLED:r};window.console.log("XTK Release 3b -- 03/31/12 -- http://www.goXTK.com")}C(Uf,L);w=Uf.prototype;w.width=t("qb");w.height=t("Xa");w.canvas=function(){x(this.ua)||(this.ua=Od("canvas"));return this.ua};w.Xf=t("va");w.Tf=t("m");w.og=t("nb");
function Vf(a){x(a.Hb)||(a.Hb=new of,J(Vf(a),qd,a.Pg.bind(a)));return a.Hb}w.Pg=function(a){this.ma&&this.ma.$c(100*a.te)};w.Eg=function(a){x(a)&&a instanceof jd&&Wf(this,a.Q)};w.Cg=function(a){if(x(a)&&a instanceof xd){var b=a.Ac,a=a.Bc,c=this.get(this.kf(b,a));if(c&&(c=c.caption()))(new Qe(this.va,this.va.offsetLeft+b+10,this.va.offsetTop+a+10,this.nb)).e().innerHTML=c}};w.Zg=function(){this.Kb=this.Nb=this.Jb=this.Mb=this.Ib=this.Lb=q;this.j=[0,0,0]};
function Xf(a){a.config.PROGRESSBAR_ENABLED&&a.ma&&!a.se&&(Of(a.ma),a.se=pe(function(){this.se=q;this.ma&&(this.ma.Md(),this.ma=q);this.gc()}.bind(a),700))}w.of=function(){this.m.reset();this.zb(r,r)};
w.ya=function(){var a=this.canvas();a.width=this.width();a.height=this.height();this.va.appendChild(a);try{var b=a.getContext("experimental-webgl");b||g(Error())}catch(c){this.va.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">Sorry, WebGL is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..</p>',g(Error('Sorry, WebGL is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..'))}try{if(b.viewport(0,
0,this.width(),this.height()),b.clearColor(0,0,0,0),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.config.PICKING_ENABLED){var d=b.createFramebuffer(),e=b.createRenderbuffer(),f=b.createTexture();b.bindTexture(b.TEXTURE_2D,f);b.texImage2D(b.TEXTURE_2D,0,b.RGB,this.width(),this.height(),0,b.RGB,b.UNSIGNED_BYTE,q);b.bindFramebuffer(b.FRAMEBUFFER,d);b.bindRenderbuffer(b.RENDERBUFFER,
e);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,this.width(),this.height());b.bindRenderbuffer(b.RENDERBUFFER,q);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,f,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,e);b.bindFramebuffer(b.FRAMEBUFFER,q);this.qe=d}}catch(h){g(Error("Exception while accessing GL Context!\n"+h))}d=new Oe(a);d.ya();J(d,pd,this.of.bind(this));J(d,rd,this.Cg.bind(this));e=new Sf(this.width(),this.height());(!x(d)||
!(d instanceof Oe))&&g(Error("Could not observe the interactor."));J(d,ld,e.Og.bind(e));J(d,md,e.Qg.bind(e));J(d,nd,e.Sg.bind(e));J(e,od,this.zb.bind(this,r,r));this.ua=a;this.a=b;this.m=e;this.nb=d;Yf(this)};
function Yf(a){var b=new Re;(!x(a.ua)||!x(a.a)||!x(a.m))&&g(Error("Renderer was not initialized properly."));(!x(b)||!(b instanceof Re))&&g(Error("Could not add shaders."));Ue(b);var c=a.a.createShader(a.a.FRAGMENT_SHADER),d=a.a.createShader(a.a.VERTEX_SHADER);a.a.shaderSource(c,b.rc);a.a.shaderSource(d,b.zc);a.a.compileShader(c);a.a.compileShader(d);a.a.getShaderParameter(c,a.a.COMPILE_STATUS)||g(Error("Fragement Shader compilation failed!\n"+a.a.getShaderInfoLog(c)));a.a.getShaderParameter(d,a.a.COMPILE_STATUS)||
g(Error("Vertex Shader compilation failed!\n"+a.a.getShaderInfoLog(d)));var e=a.a.createProgram();a.a.attachShader(e,d);a.a.attachShader(e,c);a.a.linkProgram(e);a.a.getProgramParameter(e,a.a.LINK_STATUS)||g(Error("Could not create shader program!\n"+a.a.getShaderInfoLog(c)+"\n"+a.a.getShaderInfoLog(d)+"\n"+a.a.getProgramInfoLog(e)));a.a.useProgram(e);a.pd=e;Object.keys(Se).forEach(function(a){a=eval("X.shaders.attributes."+a);this.cd.set(a,this.a.getAttribLocation(this.pd,a));this.a.enableVertexAttribArray(this.cd.get(a))}.bind(a));
Object.keys(Te).forEach(function(a){a=eval("X.shaders.uniforms."+a);this.Rb.set(a,this.a.getUniformLocation(this.pd,a))}.bind(a));a.qd=b}w.add=function(a){this.Qb.push(a);Wf(this,a)};
function Wf(a,b){(!x(a.ua)||!x(a.a)||!x(a.m))&&g(Error("Renderer was not initialized properly."));(!x(b)||!(b instanceof V))&&g(Error("Illegal object."));var c=r;a.get(b.id())&&(c=p);rc(b)||J(b,sc,a.Eg.bind(a));var d=b.id(),e=b.k,f=b.q,h=b.ba,i=b.L,k=b.file(),m=b.transform(),n=b.p,l=b.K;if(x(l)&&x(l.file())&&l.file().c)Wf(a,l);else if(x(n)&&x(n.file())&&n.file().c)c=Vf(a),x(b.p)||g(Error("Internal error during file loading.")),d=b.p.file().path(),h=new XMLHttpRequest,J(h,"abort",c.Nc.bind(c,h,b)),
J(h,"error",c.Nc.bind(c,h,b)),J(h,"load",c.rg.bind(c,h,b)),h.open("GET",d,p),h.overrideMimeType("text/plain; charset=x-user-defined"),h.setRequestHeader("Content-Type","text/plain"),h.send(q),pf(c).set(b.p.id(),r);else if(x(i)&&x(i.file())&&i.file().c)c=Vf(a),x(b.L)||g(Error("Internal error during texture loading.")),d=new Image,h=b.L.file().path(),d.src=h,b.L.ke=d,lc(d,"load",c.tg.bind(c,b)),pf(c).set(b.id(),r),rf(c,0.3);else if(x(k)&&k.c)c=Vf(a),x(b.file())||g(Error("Internal error during file loading.")),
d=pf(c),h=b.id(),Hb(d.r,h)||(b.k.clear(),b.q.clear(),d=b.file().path(),h=d.split(".").pop(),h=h.toUpperCase(),"TRK"==h||"STL"==h||"FSM"==h||"VTK"==h||"NRRD"==h||"CRV"==h||"MGH"==h||"MGZ"==h||g(Error("The "+h+" file format is not supported.")),h=new XMLHttpRequest,J(h,"abort",c.Nc.bind(c,h,b)),J(h,"error",c.Nc.bind(c,h,b)),J(h,"load",c.sg.bind(c,h,b)),h.open("GET",d,p),h.overrideMimeType("text/plain; charset=x-user-defined"),h.setRequestHeader("Content-Type","text/plain"),h.send(q),pf(c).set(b.id(),
r));else{if(b.c&&b.bc()){k=b.children();n=k.length;for(l=l=0;l<n;l++)Wf(a,k[l])}if(0==e.count())Dc(b);else{for(k=0;a.sc;)k++;a.sc=p;n=b instanceof Bd&&b.Qa instanceof Rf;c&&x(i)&&i.c&&(k=a.wc.get(d),x(k)&&a.a.isBuffer(k.Y)&&a.a.deleteBuffer(k.Y));k=q;x(i)&&(!c||i.c?(k=b.Za,x(k)||g(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),l=a.a.createTexture(),l.Jd=i.Jd(),a.xc.set(i.id(),l),a.a.bindTexture(a.a.TEXTURE_2D,l),i.Pb?(a.a.texImage2D(a.a.TEXTURE_2D,
0,a.a.RGBA,i.vc,i.uc,0,a.a.RGBA,a.a.UNSIGNED_BYTE,i.Pb),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_S,a.a.CLAMP_TO_EDGE),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_T,a.a.CLAMP_TO_EDGE),a.a.pixelStorei(a.a.UNPACK_FLIP_Y_WEBGL,p)):(a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,a.a.RGBA,a.a.UNSIGNED_BYTE,l.Jd),a.a.pixelStorei(a.a.UNPACK_FLIP_Y_WEBGL,r)),n?(a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.NEAREST),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.NEAREST)):
(a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.LINEAR),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.LINEAR)),a.a.bindTexture(a.a.TEXTURE_2D,q),l=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,l),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(k),a.a.STATIC_DRAW),k=new Ve(l,k.length,2),Dc(i)):k=a.wc.get(d));rf(Vf(a),0.1);if(n)a.sc=r,rf(Vf(a),0.9);else{if(e.c||m.c){n=m.f;i=n.ja(new Q(e.Ja,e.Ka,e.La));n=n.ja(new Q(e.Ga,e.Ha,e.Ia));if(a.Lb===q||i.x<a.Lb)a.Lb=i.x;if(a.Ib===
q||n.x>a.Ib)a.Ib=n.x;if(a.Mb===q||i.y<a.Mb)a.Mb=i.y;if(a.Jb===q||n.y>a.Jb)a.Jb=n.y;if(a.Nb===q||i.b<a.Nb)a.Nb=i.b;if(a.Kb===q||n.b>a.Kb)a.Kb=n.b;a.j=[(a.Lb+a.Ib)/2,(a.Mb+a.Jb)/2,(a.Nb+a.Kb)/2];Dc(m)}c&&e.c&&(m=a.Sb.get(d),x(m)&&a.a.isBuffer(m.Y)&&a.a.deleteBuffer(m.Y));m=q;!c||e.c?(m=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,m),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(e.all()),a.a.STATIC_DRAW),m=new Ve(m,e.count(),3),Dc(e)):m=a.Sb.get(d);rf(Vf(a),0.3);c&&f.c&&(i=a.Sb.get(d),x(i)&&
a.a.isBuffer(i.Y)&&a.a.deleteBuffer(i.Y));i=q;!c||f.c?(i=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,i),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(f.all()),a.a.STATIC_DRAW),i=new Ve(i,f.count(),3),Dc(f)):i=a.md.get(d);rf(Vf(a),0.3);c&&h.c&&(f=a.oc.get(d),x(f)&&a.a.isBuffer(f.Y)&&a.a.deleteBuffer(f.Y));f=q;0<h.length()&&(!c||h.c?(h.length()!=e.length()&&g(Error("Mismatch between points and point colors.")),e=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,e),a.a.bufferData(a.a.ARRAY_BUFFER,
new Float32Array(h.all()),a.a.STATIC_DRAW),f=new Ve(e,h.count(),3),Dc(h)):f=a.oc.get(d));rf(Vf(a),0.3);!c&&!a.Ma.add(b)&&g(Error("Could not add object to this renderer."));a.Sb.set(d,m);a.md.set(d,i);a.oc.set(d,f);a.wc.set(d,k);Dc(b);a.sc=r}}}}
w.gc=function(){(!this.ua||!this.a||!this.m)&&g(Error("The renderer was not initialized properly."));x(this.re)||(qf(Vf(this))?this.ma?(Xf(this),eval("this.onShowtime()")):this.zb(r,p):(this.config.PROGRESSBAR_ENABLED&&!this.ma&&(this.ma=new Nf(this.va,3)),this.re=pe(function(){this.re=q;this.gc()}.bind(this),100)))};w.Rg=aa();w.get=function(a){x(a)||g(Error("Invalid object id."));for(var b=this.Ma.ha(),c=0,d=b.length,c=0;c<d;c++)if(b[c].id()==a)return b[c];return q};
w.kf=function(a,b){if(this.config.PICKING_ENABLED){this.zb(p,r);var c=new Uint8Array(4);this.a.readPixels(a,this.Xa-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);var d=Math.round(10*(c[0]/255)),e=Math.round(10*(c[1]/255)),c=Math.round(10*(c[2]/255));return 100*d+10*e+c}return-1};
w.zb=function(a,b){var c=this.Ma.ha(),d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.qe):this.a.bindFramebuffer(this.a.FRAMEBUFFER,q);this.a.viewport(0,0,this.qb,this.Xa);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var e=this.m.Mf,f=this.m.Wa;this.a.uniformMatrix4fv(this.Rb.get("perspective"),r,e);this.a.uniformMatrix4fv(this.Rb.get("view"),r,f);e=this.j;this.a.uniform3f(this.Rb.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));if(this.config.ORDERING_ENABLED)a:{var h=
r,e=this.Ma.ha(),f=e.length,i;i=f-1;do{var k=e[i];if(!k)break a;var m=k._opacity,n=k.Qa;k instanceof Bd&&(m=n&&n._volumeRendering?k._opacity=k.Qa._opacity:k._opacity=1);1!=m&&(h=k.k.nc,k=this.m.l.ja(k.yc.f.ja(new Q(h[0],h[1],h[2]))),k=Nc(this.m.Fb,k),e[i].Ec=k,h=p)}while(i--);if(h){this.Ma.clear();i=f-1;do this.Ma.add(e[i]);while(i--)}}if(e=!a&&x(b)&&b&&this.config.STATISTICS_ENABLED)var l=0,j=0,s=0,u=0;i=this.Qb.length;for(f=0;f<i;++f)if(k=this.Qb[f],k instanceof Pf){var v=new Q(1,0,0),v=this.m.view().ja(v),
h=Nc(this.m.focus(),v),v=new Q(-1,0,0),v=this.m.view().ja(v),m=Nc(this.m.focus(),v),v=new Q(0,1,0),v=this.m.view().ja(v),n=Nc(this.m.focus(),v),v=new Q(0,-1,0),v=this.m.view().ja(v),D=Nc(this.m.focus(),v),v=new Q(0,0,1),v=this.m.view().ja(v),E=Nc(this.m.focus(),v),v=new Q(0,0,-1),v=this.m.view().ja(v),v=Nc(this.m.focus(),v),I=Math.max(h,n,E,m,D,v);I==h||I==m?Qf(k,0):I==n||I==D?Qf(k,1):(I==E||I==v)&&Qf(k,2)}f=this.cd;i=f.get("vertexPosition");var k=f.get("vertexNormal"),h=f.get("vertexColor"),m=f.get("vertexTexturePos"),
f=this.Rb,n=f.get("usePicking"),D=f.get("useObjectColor"),E=f.get("objectColor"),v=f.get("objectOpacity"),I=f.get("labelMapOpacity"),B=f.get("useTexture"),F=f.get("useTextureThreshold"),ea=f.get("useLabelMapTexture"),da=f.get("textureSampler"),la=f.get("textureSampler2"),rb=f.get("volumeLowerThreshold"),Uc=f.get("volumeUpperThreshold"),db=f.get("volumeScalarMin"),Nd=f.get("volumeScalarMax"),mc=f.get("objectTransform"),Tc=f.get("pointSize"),f=d;do{var N=c[d-f];if(N){var O=q;N instanceof Bd&&N.Qa&&
(O=N.Qa);if(N._visible&&(!O||O._visible)){var $=N._id,T=N._magicMode,ma=this.Sb.get($),pa=this.md.get($),fa=this.oc.get($),Ma=this.wc.get($);this.a.bindBuffer(this.a.ARRAY_BUFFER,ma.Y);this.a.vertexAttribPointer(i,ma.ob,this.a.FLOAT,r,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,pa.Y);this.a.vertexAttribPointer(k,pa.ob,this.a.FLOAT,r,0,0);a?this.a.uniform1i(n,p):this.a.uniform1i(n,r);fa&&!a&&!T?(this.a.uniform1i(D,r),this.a.bindBuffer(this.a.ARRAY_BUFFER,fa.Y),this.a.vertexAttribPointer(h,fa.ob,this.a.FLOAT,
r,0,0)):(pa=1,T&&!a&&(pa=0),this.a.uniform1i(D,pa),T=N._color,a&&(999<$&&g(Error("Id out of bounds.")),T=Math.floor(0.01*$),pa=Math.floor(0.1*$)-10*T,T=[T/10,pa/10,($-100*T-10*pa)/10]),this.a.uniform3f(E,parseFloat(T[0]),parseFloat(T[1]),parseFloat(T[2])),this.a.vertexAttribPointer(h,ma.ob,this.a.FLOAT,r,0,0));this.a.uniform1f(v,parseFloat(N._opacity));N.L&&Ma&&!a?(this.a.uniform1i(B,p),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.xc.get(N.L._id)),this.a.uniform1i(da,
0),this.a.bindBuffer(this.a.ARRAY_BUFFER,Ma.Y),this.a.vertexAttribPointer(m,Ma.ob,this.a.FLOAT,r,0,0),this.a.uniform1i(F,r)):(this.a.uniform1i(B,r),this.a.vertexAttribPointer(m,ma.ob,this.a.FLOAT,r,0,0));O&&(this.a.uniform1i(F,p),this.a.uniform1f(rb,O._lowerThreshold),this.a.uniform1f(Uc,O._upperThreshold),$=O.pb,this.a.uniform1f(db,$[0]),this.a.uniform1f(Nd,$[1]),$=O.K,this.a.uniform1i(ea,r),O._volumeRendering?this.a.uniform1f(v,parseFloat(O._opacity)):$&&$._visible&&(O=N.K._id,this.a.uniform1i(ea,
p),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.xc.get(O)),this.a.uniform1i(la,1),this.a.uniform1f(I,$._opacity)));this.a.uniformMatrix4fv(mc,r,N.yc.la);O=1;"POINTS"==N._type&&(O=N._pointSize);this.a.uniform1f(Tc,O);O=-1;N.type()==gd?(O=this.a.TRIANGLES,e&&(j+=ma.Fa/3)):"LINES"==N.type()?(this.a.lineWidth(N.lineWidth()),O=this.a.LINES,e&&(s+=ma.Fa/2)):"POINTS"==N.type()?(O=this.a.POINTS,e&&(u+=ma.Fa)):"TRIANGLE_STRIPS"==N.type()?(O=this.a.TRIANGLE_STRIP,e&&(j+=ma.Fa/
3)):"POLYGONS"==N.type()&&(O=0==ma.Fa%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,e&&(j+=ma.Fa/3));e&&(l+=ma.Fa);this.a.drawArrays(O,0,ma.Fa)}}}while(--f);e&&(c="Objects: "+d+" | "+("Vertices: "+l+" | ")+("Triangles: "+Math.round(j)+" | "),c=c+("Lines: "+s+" | ")+("Points: "+u+" | ")+("Textures: "+this.xc.O()),window.console.log(c))}};
w.Zf=function(){this.Ma.clear();delete this.Ma;this.Qb.length=0;delete this.Qb;this.qd=q;delete this.qd;this.Hb=q;delete this.Hb;this.m=q;delete this.m;this.nb=q;delete this.nb;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);this.a=q;delete this.a;Sd(this.ua);delete this.ua};A("X.renderer",Uf);A("X.renderer.prototype.width",Uf.prototype.width);A("X.renderer.prototype.height",Uf.prototype.height);A("X.renderer.prototype.canvas",Uf.prototype.canvas);
A("X.renderer.prototype.container",Uf.prototype.Xf);A("X.renderer.prototype.camera",Uf.prototype.Tf);A("X.renderer.prototype.interactor",Uf.prototype.og);A("X.renderer.prototype.resetBoundingBox",Uf.prototype.Zg);A("X.renderer.prototype.resetViewAndRender",Uf.prototype.of);A("X.renderer.prototype.init",Uf.prototype.ya);A("X.renderer.prototype.add",Uf.prototype.add);A("X.renderer.prototype.onShowtime",Uf.prototype.Rg);A("X.renderer.prototype.get",Uf.prototype.get);A("X.renderer.prototype.pick",Uf.prototype.kf);
A("X.renderer.prototype.render",Uf.prototype.gc);A("X.renderer.prototype.destroy",Uf.prototype.Zf);function Zf(a){function b(a,b,d){b=2*b*Math.PI;b=k.Ca(Math.cos(b)).hb(m.Ca(Math.sin(b)));a=c.hb(e.Ca(a)).hb(b.Ca(f));d=b.Ca(1-Math.abs(d)).hb(h.Ca(d));return new Fc(a,d)}this.i=[];for(var a=a||{},c=new K(a.start||[0,-1,0]),d=new K(a.end||[0,1,0]),e=d.vb(c),f=a.qa||1,a=a.be||16,h=e.Cb(),i=0.5<Math.abs(h.y()),k=(new K(i,!i,0)).Dc(h).Cb(),m=k.Dc(h).Cb(),i=new Fc(c,h.Pc()),d=new Fc(d,h.Cb()),n=[],l=0;l<a;l++){var j=l/a,s=(l+1)/a;n.push(new Jc([i,b(0,j,-1),b(0,s,-1)]));n.push(new Jc([b(0,s,0),b(0,j,0),
b(1,j,0),b(1,s,0)]));n.push(new Jc([d,b(1,s,1),b(1,j,1)]))}return Lc(n)}C(Zf,M);A("CSG.cylinder",Zf);function $f(a,b,c){(!x(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid start position."));(!x(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid end position."));z(c)||g(Error("Invalid radius."));V.call(this);this._className="cylinder";this.Rf=a;this.Jf=b;this.od=c;this.rd=32;this.na()}C($f,V);$f.prototype.na=function(){id(this,new Zf({start:this.Rf,end:this.Jf,qa:this.od,be:this.rd}))};A("X.cylinder",$f);function ag(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new K(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));h.push(new Fc(c.hb(e.Ca(d)),e))}this.i=[];for(var a=a||{},c=new K(a.yd||[0,0,0]),d=a.qa||1,e=a.be||16,a=a.uh||8,f=[],h,i=0;i<e;i++)for(var k=0;k<a;k++)h=[],b(i/e,k/a),0<k&&b((i+1)/e,k/a),k<a-1&&b((i+1)/e,(k+1)/a),b(i/e,(k+1)/a),f.push(new Jc(h));return Lc(f)}C(ag,M);A("CSG.sphere",ag);function bg(a,b){(!x(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));z(b)||g(Error("Invalid radius."));V.call(this);this._className="Sphere";this.j=a;this.od=b;this.rd=32;this.Qf=16;this.na()}C(bg,V);bg.prototype.na=function(){id(this,new ag({yd:this.j,qa:this.od,be:this.rd,uh:this.Qf}))};A("X.sphere",bg);function cg(a){this.i=[];var a=a||{},b=new K(a.yd||[0,0,0]),c=!a.qa?[1,1,1]:a.qa.length?a.qa:[a.qa,a.qa,a.qa];return Lc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Jc(a[0].map(function(e){e=new K(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Fc(e,new K(a[1]))}))}))}C(cg,M);A("CSG.cube",cg);function dg(a,b,c,d){(!x(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!z(b)||!z(c)||!z(d))&&g(Error("Invalid radii."));V.call(this);this._className="cube";this.j=a;this.Nf=b;this.Of=c;this.Pf=d;this.Za=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];this.na()}C(dg,V);dg.prototype.na=function(){id(this,new cg({yd:this.j,qa:[this.Nf,this.Of,this.Pf]}))};A("X.cube",dg);
