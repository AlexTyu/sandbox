/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function g(a){throw a;}var k=void 0,o=!0,q=null,r=!1;function aa(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var v,ba=this;function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return a!==k}function w(a){return a!=q}function ga(a){return"array"==da(a)}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){return"string"==typeof a}function z(a){return"number"==typeof a}function ia(a){return"function"==da(a)}function ja(a){a=da(a);return"object"==a||"array"==a||"function"==a}function na(a){return a[oa]||(a[oa]=++qa)}
var oa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),qa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(q,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var va=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=ba;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ea(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function C(a,b){function c(){}c.prototype=b.prototype;a.A=b.prototype;a.prototype=new c};window["X.Counter"]=function(){var a=0;return{Ie:function(){a+=1},Kh:function(){a+=-1},value:function(){return a}}}();
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&g(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});A("Function.prototype.bind",Function.prototype.bind);function wa(a){if(!xa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ya,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(za,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Aa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ba,"&quot;"));return a}var ya=/&/g,za=/</g,Aa=/>/g,Ba=/\"/g,xa=/[&<>\"]/;var Ca,Ea,Fa,Ga,Ha,Ia,Ja;function Ka(){return ba.navigator?ba.navigator.userAgent:q}function La(){return ba.navigator}Ha=Ga=Fa=Ea=Ca=r;var Ma;if(Ma=Ka()){var Na=La();Ca=0==Ma.indexOf("Opera");Ea=!Ca&&-1!=Ma.indexOf("MSIE");Ga=(Fa=!Ca&&-1!=Ma.indexOf("WebKit"))&&-1!=Ma.indexOf("Mobile");Ha=!Ca&&!Fa&&"Gecko"==Na.product}var Oa=Ca,D=Ea,Pa=Ha,E=Fa,Qa=Ga,Ra,Sa=La();Ra=Sa&&Sa.platform||"";Ia=-1!=Ra.indexOf("Mac");Ja=-1!=Ra.indexOf("Win");var Ta=!!La()&&-1!=(La().appVersion||"").indexOf("X11"),Va;
a:{var Wa="",Xa;if(Oa&&ba.opera)var Ya=ba.opera.version,Wa="function"==typeof Ya?Ya():Ya;else if(Pa?Xa=/rv\:([^\);]+)(\)|;)/:D?Xa=/MSIE\s+([^\);]+)(\)|;)/:E&&(Xa=/WebKit\/(\S+)/),Xa)var Za=Xa.exec(Ka()),Wa=Za?Za[1]:"";if(D){var $a,ab=ba.document;$a=ab?ab.documentMode:k;if($a>parseFloat(Wa)){Va=""+$a;break a}}Va=Wa}var bb={};
function G(a){var b;if(!(b=bb[a])){b=0;for(var c=(""+Va).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",i=d[f]||"",j=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(h)||["","",""],n=p.exec(i)||["","",""];if(0==l[0].length&&0==n[0].length)break;b=((0==l[1].length?0:parseInt(l[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==l[1].length?0:parseInt(l[1],
10))>(0==n[1].length?0:parseInt(n[1],10))?1:0)||((0==l[2].length)<(0==n[2].length)?-1:(0==l[2].length)>(0==n[2].length)?1:0)||(l[2]<n[2]?-1:l[2]>n[2]?1:0)}while(0==b)}b=bb[a]=0<=b}return b}var cb={};function db(a){return cb[a]||(cb[a]=D&&document.documentMode&&document.documentMode>=a)};function eb(a,b){for(var c in a)b.call(k,a[c],c,a)}function fb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function gb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var hb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function ib(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<hb.length;f++)c=hb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var H=Array.prototype,jb=H.indexOf?function(a,b,c){return H.indexOf.call(a,b,c)}:function(a,b,c){c=c==q?0:0>c?Math.max(0,a.length+c):c;if(y(a))return!y(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},kb=H.forEach?function(a,b,c){H.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},lb=H.map?function(a,b,c){return H.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=y(a)?a.split(""):
a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},mb=H.some?function(a,b,c){return H.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return o;return r},nb=H.every?function(a,b,c){return H.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return r;return o};function ob(a,b){var c=jb(a,b);0<=c&&H.splice.call(a,c,1)}
function pb(a){return H.concat.apply(H,arguments)}function qb(a){if(ga(a))return pb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function rb(a,b,c){return 2>=arguments.length?H.slice.call(a,b):H.slice.call(a,b,c)};function sb(a){if("function"==typeof a.$)a=a.$();else if(ha(a)||y(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function tb(a){if("function"==typeof a.aa)return a.aa();if(y(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return fb(a)}function ub(a){if("function"==typeof a.Tb)return a.Tb();if("function"!=typeof a.aa){if(ha(a)||y(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return gb(a)}}
function vb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ha(a)||y(a))kb(a,b,c);else for(var d=ub(a),e=tb(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}function wb(a,b){if("function"==typeof a.every)return a.every(b,k);if(ha(a)||y(a))return nb(a,b,k);for(var c=ub(a),d=tb(a),e=d.length,f=0;f<e;f++)if(!b.call(k,d[f],c&&c[f],a))return r;return o};var xb="StopIteration"in ba?ba.StopIteration:Error("StopIteration");function yb(){}yb.prototype.next=function(){g(xb)};yb.prototype.xb=function(){return this};function zb(a){if(a instanceof yb)return a;if("function"==typeof a.xb)return a.xb(r);if(ha(a)){var b=0,c=new yb;c.next=function(){for(;;){b>=a.length&&g(xb);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))}
function Eb(a,b){if(ha(a))try{kb(a,b,k)}catch(c){c!==xb&&g(c)}else{a=zb(a);try{for(;;)b.call(k,a.next(),k,a)}catch(d){d!==xb&&g(d)}}};function I(a,b){this.p={};this.k=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.ld(a)}v=I.prototype;v.h=0;v.jc=0;v.$=t("h");v.aa=function(){Fb(this);for(var a=[],b=0;b<this.k.length;b++)a.push(this.p[this.k[b]]);return a};v.Tb=function(){Fb(this);return this.k.concat()};v.pd=function(a){for(var b=0;b<this.k.length;b++){var c=this.k[b];if(Gb(this.p,c)&&this.p[c]==a)return o}return r};
v.Ob=function(a,b){if(this===a)return o;if(this.h!=a.$())return r;var c=b||Hb;Fb(this);for(var d,e=0;d=this.k[e];e++)if(!c(this.get(d),a.get(d)))return r;return o};function Hb(a,b){return a===b}v.clear=function(){this.p={};this.jc=this.h=this.k.length=0};v.remove=function(a){return Gb(this.p,a)?(delete this.p[a],this.h--,this.jc++,this.k.length>2*this.h&&Fb(this),o):r};
function Fb(a){if(a.h!=a.k.length){for(var b=0,c=0;b<a.k.length;){var d=a.k[b];Gb(a.p,d)&&(a.k[c++]=d);b++}a.k.length=c}if(a.h!=a.k.length){for(var e={},c=b=0;b<a.k.length;)d=a.k[b],Gb(e,d)||(a.k[c++]=d,e[d]=1),b++;a.k.length=c}}v.get=function(a,b){return Gb(this.p,a)?this.p[a]:b};v.set=function(a,b){Gb(this.p,a)||(this.h++,this.k.push(a),this.jc++);this.p[a]=b};v.ld=function(a){var b;a instanceof I?(b=a.Tb(),a=a.aa()):(b=gb(a),a=fb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};v.c=function(){return new I(this)};
v.xb=function(a){Fb(this);var b=0,c=this.k,d=this.p,e=this.jc,f=this,h=new yb;h.next=function(){for(;;){e!=f.jc&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(xb);var h=c[b++];return a?h:d[h]}};return h};function Gb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ib(a){this.p=new I;a&&this.ld(a)}function Jb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}v=Ib.prototype;v.$=function(){return this.p.$()};v.add=function(a){this.p.set(Jb(a),a)};v.ld=function(a){for(var a=tb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};v.Lc=function(a){for(var a=tb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};v.remove=function(a){return this.p.remove(Jb(a))};v.clear=function(){this.p.clear()};
v.contains=function(a){a=Jb(a);return Gb(this.p.p,a)};v.Ke=function(a){for(var b=new Ib,a=tb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};v.aa=function(){return this.p.aa()};v.c=function(){return new Ib(this)};v.Ob=function(a){return this.$()==sb(a)&&Kb(this,a)};
function Kb(a,b){var c=sb(b);if(a.$()>c)return r;!(b instanceof Ib)&&5<c&&(b=new Ib(b));return wb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.pd)a=b.pd(a);else if(ha(b)||y(b))a=0<=jb(b,a);else a:{for(var c in b)if(b[c]==a){a=o;break a}a=r}return a})}v.xb=function(){return this.p.xb(r)};function Lb(){}Lb.prototype.ve=r;Lb.prototype.Z=function(){this.ve||(this.ve=o,this.s())};Lb.prototype.s=function(){this.Vf&&Mb.apply(q,this.Vf)};function Nb(a){a&&"function"==typeof a.Z&&a.Z()}function Mb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Mb.apply(q,d):Nb(d)}};function Ob(a,b){this.Pe=b;this.Rb=[];a>this.Pe&&g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Rb.push(this.vc())}C(Ob,Lb);v=Ob.prototype;v.re=q;v.ue=q;function Pb(a,b){a.Rb.length<a.Pe?a.Rb.push(b):a.td(b)}v.vc=function(){return this.re?this.re():{}};v.td=function(a){if(this.ue)this.ue(a);else if(ja(a))if(ia(a.Z))a.Z();else for(var b in a)delete a[b]};v.s=function(){Ob.A.s.call(this);for(var a=this.Rb;a.length;)this.td(a.pop());delete this.Rb};function Qb(){this.Pb=[];this.Kd=new I;this.yf=this.zf=this.Af=this.uf=0;this.ic=new I;this.oe=this.xf=0;this.Ed=1;this.ud=new Ob(0,4E3);this.ud.vc=function(){return new Rb};this.vf=new Ob(0,50);this.vf.vc=function(){return new Sb};var a=this;this.xd=new Ob(0,2E3);this.xd.vc=function(){return""+a.Ed++};this.xd.td=function(){}}function Sb(){this.Td=this.time=this.count=0}
Sb.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.Td&&a.push(" [VarAlloc = ",this.Td,"]");return a.join("")};function Rb(){}function Tb(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(Ub(a.ye-c));e.push(" ",Vb(a.ye-b));0==a.vd?e.push(" Start        "):1==a.vd?(e.push(" Done "),e.push(Ub(a.Oh-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.Yg&&e.push("[VarAlloc ",a.Yg,"] ");return e.join("")}
Rb.prototype.toString=function(){return this.type==q?this.Tf:"["+this.type+"] "+this.Tf};Qb.prototype.reset=function(){for(var a=0;a<this.Pb.length;a++){var b=this.ud.id;b&&Pb(this.xd,b);Pb(this.ud,this.Pb[a])}this.Pb.length=0;this.Kd.clear();this.uf=va();this.oe=this.xf=this.yf=this.zf=this.Af=0;b=this.ic.Tb();for(a=0;a<b.length;a++){var c=this.ic.get(b[a]);c.count=0;c.time=0;c.Td=0;Pb(this.vf,c)}this.ic.clear()};
Qb.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Pb.length;d++){var e=this.Pb[d];1==e.vd&&c.pop();a.push(" ",Tb(e,this.uf,b,c.join("")));b=e.ye;a.push("\n");0==e.vd&&c.push("|  ")}if(0!=this.Kd.$()){var f=va();a.push(" Unstopped timers:\n");Eb(this.Kd,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Vb(b.startTime),")\n")})}b=this.ic.Tb();for(d=0;d<b.length;d++)c=this.ic.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.xf,"\n","Total comments created ",
this.oe,"\n","Overhead start: ",this.Af," ms\n","Overhead end: ",this.zf," ms\n","Overhead comment: ",this.yf," ms\n");return a.join("")};function Ub(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Vb(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Qb;function Wb(){}var Xb=0;v=Wb.prototype;v.key=0;v.qb=r;v.md=r;v.ha=function(a,b,c,d,e,f){ia(a)?this.Le=o:a&&a.handleEvent&&ia(a.handleEvent)?this.Le=r:g(Error("Invalid listener argument"));this.Zb=a;this.nf=b;this.src=c;this.type=d;this.capture=!!e;this.wd=f;this.md=r;this.key=++Xb;this.qb=r};v.handleEvent=function(a){return this.Le?this.Zb.call(this.wd||this.src,a):this.Zb.handleEvent.call(this.Zb,a)};!D||db(9);var Yb=!D||db(9),Zb=D&&!G("8");!E||G("528");Pa&&G("1.9b")||D&&G("8")||Oa&&G("9.5")||E&&G("528");!Pa||G("8");function $b(a,b){this.type=a;this.currentTarget=this.target=b}C($b,Lb);v=$b.prototype;v.s=function(){delete this.type;delete this.target;delete this.currentTarget};v.$a=r;v.ec=o;v.stopPropagation=function(){this.$a=o};v.preventDefault=function(){this.ec=r};function ac(a){ac[" "](a);return a}ac[" "]=ca;function bc(a,b){a&&this.ha(a,b)}C(bc,$b);v=bc.prototype;v.target=q;v.relatedTarget=q;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=r;v.altKey=r;v.shiftKey=r;v.metaKey=r;v.ga=q;
v.ha=function(a,b){var c=this.type=a.type;$b.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Pa){var e;a:{try{ac(d.nodeName);e=o;break a}catch(f){}e=r}e||(d=q)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=E||a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=E||a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.ga=a;delete this.ec;delete this.$a};v.stopPropagation=function(){bc.A.stopPropagation.call(this);this.ga.stopPropagation?this.ga.stopPropagation():this.ga.cancelBubble=o};
v.preventDefault=function(){bc.A.preventDefault.call(this);var a=this.ga;if(a.preventDefault)a.preventDefault();else if(a.returnValue=r,Zb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};v.dg=t("ga");v.s=function(){bc.A.s.call(this);this.relatedTarget=this.currentTarget=this.target=this.ga=q};var dc={},ec={},hc={},ic={};
function K(a,b,c,d,e){if(b){if(ga(b)){for(var f=0;f<b.length;f++)K(a,b[f],c,d,e);return q}var d=!!d,h=ec;b in h||(h[b]={h:0,V:0});h=h[b];d in h||(h[d]={h:0,V:0},h.h++);var h=h[d],i=na(a),j;h.V++;if(h[i]){j=h[i];for(f=0;f<j.length;f++)if(h=j[f],h.Zb==c&&h.wd==e){if(h.qb)break;return j[f].key}}else j=h[i]=[],h.h++;f=jc();f.src=a;h=new Wb;h.ha(c,f,a,b,d,e);c=h.key;f.key=c;j.push(h);dc[c]=h;hc[i]||(hc[i]=[]);hc[i].push(h);a.addEventListener?(a==ba||!a.se)&&a.addEventListener(b,f,d):a.attachEvent(b in
ic?ic[b]:ic[b]="on"+b,f);return c}g(Error("Invalid event type"))}function jc(){var a=kc,b=Yb?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function lc(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)lc(a,b[f],c,d,e);else a=K(a,b,c,d,e),dc[a].md=o}
function mc(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)mc(a,b[f],c,d,e);else{d=!!d;a:{f=ec;if(b in f&&(f=f[b],d in f&&(f=f[d],a=na(a),f[a]))){a=f[a];break a}a=q}if(a)for(f=0;f<a.length;f++)if(a[f].Zb==c&&a[f].capture==d&&a[f].wd==e){nc(a[f].key);break}}}
function nc(a){if(!dc[a])return r;var b=dc[a];if(b.qb)return r;var c=b.src,d=b.type,e=b.nf,f=b.capture;c.removeEventListener?(c==ba||!c.se)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in ic?ic[d]:ic[d]="on"+d,e);c=na(c);e=ec[d][f][c];if(hc[c]){var h=hc[c];ob(h,b);0==h.length&&delete hc[c]}b.qb=o;e.Te=o;oc(d,f,c,e);delete dc[a];return o}
function oc(a,b,c,d){if(!d.Ec&&d.Te){for(var e=0,f=0;e<d.length;e++)d[e].qb?d[e].nf.src=q:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Te=r;0==f&&(delete ec[a][b][c],ec[a][b].h--,0==ec[a][b].h&&(delete ec[a][b],ec[a].h--),0==ec[a].h&&delete ec[a])}}function pc(a){var b,c=0,d=b==q;b=!!b;if(a==q)eb(hc,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)nc(f.key),c++}});else if(a=na(a),hc[a])for(var a=hc[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)nc(f.key),c++}}
function qc(a){var b=rc,a=na(a),c=hc[a];if(c){var d=ea(b),e=ea(k);return d&&e?(c=ec[b],!!c&&!!c[k]&&a in c[k]):!d&&!e?o:mb(c,function(a){return d&&a.type==b||e&&a.capture==k})}return r}function sc(a,b,c,d,e){var f=1,b=na(b);if(a[b]){a.V--;a=a[b];a.Ec?a.Ec++:a.Ec=1;try{for(var h=a.length,i=0;i<h;i++){var j=a[i];j&&!j.qb&&(f&=tc(j,e)!==r)}}finally{a.Ec--,oc(c,d,b,a)}}return Boolean(f)}function tc(a,b){var c=a.handleEvent(b);a.md&&nc(a.key);return c}
function kc(a,b){if(!dc[a])return o;var c=dc[a],d=c.type,e=ec;if(!(d in e))return o;var e=e[d],f,h;if(!Yb){var i;if(!(i=b))a:{i=["window","event"];for(var j=ba;f=i.shift();)if(w(j[f]))j=j[f];else{i=q;break a}i=j}f=i;i=o in e;j=r in e;if(i){if(0>f.keyCode||f.returnValue!=k)return o;a:{var p=r;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(l){p=o}if(p||f.returnValue==k)f.returnValue=o}}p=new bc;p.ha(f,this);f=o;try{if(i){for(var n=[],m=p.currentTarget;m;m=m.parentNode)n.push(m);h=e[o];h.V=h.h;for(var s=
n.length-1;!p.$a&&0<=s&&h.V;s--)p.currentTarget=n[s],f&=sc(h,n[s],d,o,p);if(j){h=e[r];h.V=h.h;for(s=0;!p.$a&&s<n.length&&h.V;s++)p.currentTarget=n[s],f&=sc(h,n[s],d,r,p)}}else f=tc(c,p)}finally{n&&(n.length=0),p.Z()}return f}d=new bc(b,this);try{f=tc(c,d)}finally{d.Z()}return f}var uc=0;function vc(a){return a+"_"+uc++};function M(a){$b.call(this,a);this._className="event"}C(M,$b);var wc=vc("pan"),xc=vc("rotate"),yc=vc("zoom"),zc=vc("render"),Ac=vc("resetview"),rc=vc("modified"),Bc=vc("progress"),Cc=vc("hover"),Dc=vc("hover_end"),Ec={qh:wc,wh:xc,Ih:yc,uh:zc,vh:Ac,lh:rc,th:Bc,jh:Cc,kh:Dc};function Fc(){M.call(this,wc);this.eb=new Gc(0,0)}C(Fc,M);function Hc(){M.call(this,xc);this.eb=new Gc(0,0)}C(Hc,M);function Ic(){M.call(this,yc);this.ya=this.Qa=r}C(Ic,M);function Jc(){M.call(this,zc)}C(Jc,M);
function Kc(){M.call(this,Cc);this.uc=this.tc=0}C(Kc,M);function Lc(){M.call(this,Dc)}C(Lc,M);function Mc(){M.call(this,Ac)}C(Mc,M);function Nc(){M.call(this,rc);this.Ga=new N}C(Nc,M);function Oc(){M.call(this,Bc);this.ke=0}C(Oc,M);A("X.event",M);A("X.event.events",Ec);A("X.event.uniqueId",function(a){return vc(a)});A("X.event.PanEvent",Fc);A("X.event.RotateEvent",Hc);A("X.event.ZoomEvent",Ic);A("X.event.RenderEvent",Jc);A("X.event.ResetViewEvent",Mc);A("X.event.ModifiedEvent",Nc);
A("X.event.HoverEvent",Kc);A("X.event.ProgressEvent",Oc);function Pc(a,b,c){this.x=ea(a)?a:0;this.y=ea(b)?b:0;this.b=ea(c)?c:0}Pc.prototype.c=function(){return new Pc(this.x,this.y,this.b)};Pc.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.b+")"};Pc.prototype.wf=function(){return[this.x,this.y,this.b]};function O(a,b,c){this.x=a;this.y=b;this.b=c}C(O,Pc);v=O.prototype;v.c=function(){return new O(this.x,this.y,this.b)};v.Fc=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};v.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};v.w=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};v.normalize=function(){return this.scale(1/this.Fc())};v.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
v.ka=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};v.Ob=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Qc(a,b){return new O(a.x+b.x,a.y+b.y,a.b+b.b)}function Rc(a,b){return new O(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Sc(){}C(Sc,Lb);v=Sc.prototype;v.se=o;v.Hc=q;v.Od=aa("Hc");v.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};v.removeEventListener=function(a,b,c,d){mc(this,a,b,c,d)};
v.dispatchEvent=function(a){var b=a.type||a,c=ec;if(b in c){if(y(a))a=new $b(a,this);else if(a instanceof $b)a.target=a.target||this;else{var d=a,a=new $b(b,this);ib(a,d)}var d=1,e,c=c[b],b=o in c,f;if(b){e=[];for(f=this;f;f=f.Hc)e.push(f);f=c[o];f.V=f.h;for(var h=e.length-1;!a.$a&&0<=h&&f.V;h--)a.currentTarget=e[h],d&=sc(f,e[h],a.type,o,a)&&a.ec!=r}if(r in c)if(f=c[r],f.V=f.h,b)for(h=0;!a.$a&&h<e.length&&f.V;h++)a.currentTarget=e[h],d&=sc(f,e[h],a.type,r,a)&&a.ec!=r;else for(e=this;!a.$a&&e&&f.V;e=
e.Hc)a.currentTarget=e,d&=sc(f,e,a.type,r,a)&&a.ec!=r;a=Boolean(d)}else a=o;return a};v.s=function(){Sc.A.s.call(this);pc(this);this.Hc=q};function P(){this._className="base";this.d=r}C(P,Sc);P.prototype.className=t("_className");P.prototype.print=function(){var a=Object.keys(this),b="",c="<unknown>",d=0;for(d in a){var e="this."+a[d],f=eval(e);"this._className"==e?c=f:b+=e+": "+f+"\n"}return"== X."+c+" ==\n"+b};P.prototype.Xf=t("d");P.prototype.ua=function(){this.d=r};A("X.base",P);A("X.base.prototype.className",P.prototype.className);A("X.base.prototype.print",P.prototype.print);A("X.base.prototype.dirty",P.prototype.Xf);
A("X.base.prototype.setClean",P.prototype.ua);function Q(a){P.call(this);this._className="triplets";this.Ca=this.Fa=this.Ba=this.Ea=this.Aa=this.Da=q;this.kc=[0,0,0];this.T=[];w(a)&&a instanceof Q&&(this.T=a.all().slice(),this.Da=a.Da,this.Aa=a.Aa,this.Ea=a.Ea,this.Ba=a.Ba,this.Fa=a.Fa,this.Ca=a.Ca,this.kc=a.kc.slice())}C(Q,P);v=Q.prototype;
v.add=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("Invalid triplet."));if(!this.Da||a<this.Da)this.Da=a;if(!this.Aa||a>this.Aa)this.Aa=a;if(!this.Ea||b<this.Ea)this.Ea=b;if(!this.Ba||b>this.Ba)this.Ba=b;if(!this.Fa||c<this.Fa)this.Fa=c;if(!this.Ca||c>this.Ca)this.Ca=c;this.kc=[(this.Da+this.Aa)/2,(this.Ea+this.Ba)/2,(this.Fa+this.Ca)/2];this.d=o;return this.T.push(a,b,c)/3};v.get=function(a){(!z(a)||3*a>this.T.length)&&g(Error("Invalid id."));a*=3;return[this.T[a],this.T[a+1],this.T[a+2]]};
v.remove=function(a){(!z(a)||3*a>this.T.length)&&g(Error("Invalid id."));this.T.splice(a,3);this.d=o};v.all=t("T");v.clear=function(){this.T=[];this.d=o};v.count=function(){return this.T.length/3};v.length=function(){return this.T.length};A("X.triplets",Q);A("X.triplets.prototype.add",Q.prototype.add);A("X.triplets.prototype.get",Q.prototype.get);A("X.triplets.prototype.remove",Q.prototype.remove);A("X.triplets.prototype.all",Q.prototype.all);A("X.triplets.prototype.clear",Q.prototype.clear);
A("X.triplets.prototype.count",Q.prototype.count);A("X.triplets.prototype.length",Q.prototype.length);function Tc(){P.call(this);this._className="parser"}C(Tc,P);v=Tc.prototype;v.parse=function(){g(Error("The function parse() should be overloaded."))};v.dc=function(a,b){var c=this.r(a,b+2),d=this.r(a,b+3),e=(d<<1&255|c>>7)-127,c=(c&127)<<16|this.r(a,b+1)<<8|this.r(a,b);return 0==c&&-127==e?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,e)};
function Uc(a,b,c){var d=a.r(b,c),e=a.r(b,c+1),f=(d<<1&255|e>>7)-127,a=(e&127)<<16|a.r(b,c+2)<<8|a.r(b,c+3);return 0==a&&-127==f?0:(1-2*(d>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,f)}function Vc(a,b,c,d){var e=[],f=0,h=Infinity,i;for(i=0;i<d;i++){var j=a.dc(b,c+4*i);e[i]=j;f=Math.max(f,j);h=Math.min(h,j)}return[e,f,h]}function Wc(a,b,c){return(a.r(b,c+3)<<24)+(a.r(b,c+2)<<16)+(a.r(b,c+1)<<8)+a.r(b,c)}function Xc(a,b,c){return(a.r(b,c)<<24)+(a.r(b,c+1)<<16)+(a.r(b,c+2)<<8)+a.r(b,c+3)}
v.Kc=function(a,b){return(this.r(a,b+1)<<8)+this.r(a,b)};v.yg=function(a,b){var c=this.r(a,b);return 127<c?c-256:c};v.r=function(a,b){return a.charCodeAt(b)&255};A("X.parser",Tc);A("X.parser.prototype.parse",Tc.prototype.parse);function Yc(){Tc.call(this);this._className="parserTRK"}C(Yc,Tc);
Yc.prototype.parse=function(a,b){var c=a.j,d=a.l,e=a.W,f=0,h=f+6,i=0,j=Infinity,p;for(p=0;3>p;p++)var l=this.Kc(b,h+2*p),i=Math.max(i,l),j=Math.min(j,l);var n=Vc(this,b,f+12,3)[0];Vc(this,b,f+24,3);var m=this.Kc(b,f+36),s=this.Kc(b,f+238);Vc(this,b,f+440,16);Vc(this,b,f+956,6);for(var h=Wc(this,b,f+988),f=Wc(this,b,f+996),i=[],u=q,x=q,B=q,F=q,W=l=q,j=0;j<h;j++){var L=Wc(this,b,f),J=new Q,f=f+4;for(p=0;p<L;p++){var ka=this.dc(b,f),f=f+4,fa=this.dc(b,f),f=f+4,la=this.dc(b,f),f=f+4;0<m&&(Vc(this,b,f,
m),f+=4*m);ka/=n[0];fa/=n[1];la/=n[2];J.add(ka,fa,la)}0<s&&(f+=4*s);p=J.Da;var L=J.Aa,ka=J.Ea,fa=J.Ba,la=J.Fa,cc=J.Ca;if(!u||p<u)u=p;if(!x||L>x)x=L;if(!B||ka<B)B=ka;if(!F||fa>F)F=fa;if(!l||la<l)l=la;if(!W||cc>W)W=cc;i.push(J)}f=(u+x)/2;B=(B+F)/2;l=(l+W)/2;for(j=0;j<h;j++){W=i[j];F=W.count();for(p=0;p<F-1;p++)m=W.get(p),n=W.get(p+1),c.add(m[0],m[1],m[2]),c.add(n[0],n[1],n[2]),s=m[0]-f,u=m[1]-B,x=m[2]-l,J=Math.sqrt(s*s+u*u+x*x),L=n[0]-f,ka=n[1]-B,fa=n[2]-l,la=Math.sqrt(L*L+ka*ka+fa*fa),d.add(s/J,u/
J,x/J),d.add(L/la,ka/la,fa/la),n=[Math.abs(n[0]-m[0]),Math.abs(n[1]-m[1]),Math.abs(n[2]-m[2])],m=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),n[0]/=m,n[1]/=m,n[2]/=m,e.add(n[0],n[1],n[2]),e.add(n[0],n[1],n[2])}a.tb(Zc);c=new Nc;c.Ga=a;this.dispatchEvent(c)};A("X.parserTRK",Yc);A("X.parserTRK.prototype.parse",Yc.prototype.parse);function $c(){Tc.call(this);this._className="parserSTL"}C($c,Tc);$c.prototype.parse=function(a,b){for(var c=b.split("\n"),d=c.length,e=a.j,f=a.l,h=0,i=d%8;i--;)this.q(e,f,c[h]),h++;for(i=0.125*d^0;i--;)this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++;c=new Nc;c.Ga=a;this.dispatchEvent(c)};
$c.prototype.q=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),d=c.split(" ");if("vertex"==d[0]){var c=parseFloat(d[1]),e=parseFloat(d[2]),d=parseFloat(d[3]);a.add(c,e,d)}else"facet"==d[0]&&(c=parseFloat(d[2]),e=parseFloat(d[3]),d=parseFloat(d[4]),b.add(c,e,d),b.add(c,e,d),b.add(c,e,d))};A("X.parserSTL",$c);A("X.parserSTL.prototype.parse",$c.prototype.parse);A("X.parserSTL.prototype.parseLine",$c.prototype.q);function R(a,b,c){this.R=this.Q=this.P=0;3==arguments.length?(this.P=Number(a),this.Q=Number(b),this.R=Number(c)):"x"in a&&"y"in a&&"z"in a?(this.P=Number(a.x()),this.Q=Number(a.y()),this.R=Number(a.b())):(this.P=Number(a[0]),this.Q=Number(a[1]),this.R=Number(a[2]))}
R.prototype={c:function(){return new R(this.P,this.Q,this.R)},Gc:function(){return new R(-this.P,-this.Q,-this.R)},Za:function(a){return new R(this.P+a.x(),this.Q+a.y(),this.R+a.b())},nb:function(a){return new R(this.P-a.x(),this.Q-a.y(),this.R-a.b())},wa:function(a){return new R(this.P*a,this.Q*a,this.R*a)},we:function(a){return new R(this.P/a,this.Q/a,this.R/a)},Wa:function(a){return this.P*a.x()+this.Q*a.y()+this.R*a.b()},Bd:function(a,b){return this.Za(a.nb(this).wa(b))},length:function(){return Math.sqrt(this.Wa(this))},
vb:function(){return this.we(this.length())},wc:function(a){return new R(this.Q*a.b()-this.R*a.y(),this.R*a.x()-this.P*a.b(),this.P*a.y()-this.Q*a.x())},x:t("P"),y:t("Q"),b:t("R")};A("csgVector",R);A("csgVector.prototype.clone",R.prototype.c);A("csgVector.prototype.plus",R.prototype.Za);A("csgVector.prototype.minus",R.prototype.nb);A("csgVector.prototype.dividedBy",R.prototype.we);A("csgVector.prototype.times",R.prototype.wa);A("csgVector.prototype.dot",R.prototype.Wa);
A("csgVector.prototype.lerp",R.prototype.Bd);A("csgVector.prototype.length",R.prototype.length);A("csgVector.prototype.unit",R.prototype.vb);A("csgVector.prototype.cross",R.prototype.wc);A("csgVector.prototype.negated",R.prototype.Gc);A("csgVector.prototype.x",R.prototype.x);A("csgVector.prototype.y",R.prototype.y);A("csgVector.prototype.z",R.prototype.b);function ad(){this.Mc=k}
function bd(a,b,c){switch(typeof b){case "string":cd(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==q){c.push("null");break}if(ga(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],bd(a,a.Mc?a.Mc.call(b,""+f,e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),cd(f,c),c.push(":"),
bd(a,a.Mc?a.Mc.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var dd={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ed=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function cd(a,b){b.push('"',a.replace(ed,function(a){if(a in dd)return dd[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return dd[a]=e+b.toString(16)}),'"')};function fd(){P.call(this);this._className="indexer";this.kd=[];this.ad={}}C(fd,P);fd.prototype.add=function(a){w(a)||g(Error("Invalid object."));var b;b=[];bd(new ad,a,b);b=b.join("");b in this.ad||(this.ad[b]=this.kd.length,this.kd.push(a));return this.ad[b]};fd.prototype.unique=t("kd");A("X.indexer.prototype.add",fd.prototype.add);A("X.indexer.prototype.unique",fd.prototype.unique);function S(a,b){this.I=new R(a);this.v=new R(b)}S.prototype={c:function(){return new S(this.I.c(),this.v.c())},qa:function(){this.v=this.v.Gc()},Je:function(a,b){return new S(this.I.Bd(a.I,b),this.v.Bd(a.v,b))},Cg:t("I"),Fd:t("v")};A("csgVertex",S);A("csgVertex.prototype.clone",S.prototype.c);A("csgVertex.prototype.flip",S.prototype.qa);A("csgVertex.prototype.interpolate",S.prototype.Je);A("csgVertex.prototype.pos",S.prototype.Cg);A("csgVertex.prototype.normal",S.prototype.Fd);function gd(a,b){this.v=a;this.wb=b}gd.prototype={c:function(){return new gd(this.v.c(),this.wb)},qa:function(){this.v=this.v.Gc();this.wb=-this.wb},gh:t("wb"),Fd:t("v")};A("csgPlane.prototype.w",gd.prototype.gh);A("csgPlane.prototype.normal",gd.prototype.Fd);function hd(a,b){this.la=a;this.gc=b;var c=a[0].I,d=a[2].I,d=a[1].I.nb(c).wc(d.nb(c)).vb();this.N=new gd(d,d.Wa(c))}
hd.prototype={c:function(){var a=this.la.map(function(a){return a.c()});return new hd(a,this.gc)},qa:function(){this.la.reverse().map(function(a){a.qa()});this.N.qa()},fh:t("la"),Rg:t("gc"),tf:function(a,b,c,d,e){for(var f=0,h=[],i=0;i<this.la.length;i++){var j=a.v.Wa(this.la[i].I)-a.wb,j=-1.0E-5>j?2:1.0E-5<j?1:0,f=f|j;h.push(j)}switch(f){case 0:(0<a.v.Wa(this.N.v)?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(i=0;i<this.la.length;i++){var p=(i+1)%
this.la.length,j=h[i],l=h[p],f=this.la[i],p=this.la[p];2!=j&&b.push(f);1!=j&&c.push(2!=j?f.c():f);3==(j|l)&&(j=(a.wb-a.v.Wa(f.I))/a.v.Wa(p.I.nb(f.I)),j=f.Je(p,j),b.push(j),c.push(j.c()))}3<=b.length&&d.push(new hd(b,this.gc));3<=c.length&&e.push(new hd(c,this.gc))}}};A("csgPolygon",hd);A("csgPolygon.prototype.clone",hd.prototype.c);A("csgPolygon.prototype.flip",hd.prototype.qa);A("csgPolygon.prototype.vertices",hd.prototype.fh);A("csgPolygon.prototype.shared",hd.prototype.Rg);function id(a){this.B=this.C=this.N=q;this.i=[];a&&this.kb(a)}
id.prototype={c:function(){var a=new id;a.Og(this.N&&this.N.c());a.Kg(this.C&&this.C.c());a.Hg(this.B&&this.B.c());a.fc(this.i.map(function(a){return a.c()}));return a},w:function(){for(var a=0;a<this.i.length;a++)this.i[a].qa();this.N.qa();this.C&&this.C.w();this.B&&this.B.w();a=this.C;this.C=this.B;this.B=a},od:function(a){if(!this.N)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].tf(this.N,b,c,b,c);this.C&&(b=this.C.od(b));c=this.B?this.B.od(c):[];return b.concat(c)},Y:function(a){this.i=
a.od(this.i);this.C&&this.C.Y(a);this.B&&this.B.Y(a)},Ka:function(){var a=this.i.slice();this.C&&(a=a.concat(this.C.Ka()));this.B&&(a=a.concat(this.B.Ka()));return a},kb:function(a){if(a.length){this.N||(this.N=a[0].N.c());for(var b=[],c=[],d=0;d<a.length;d++)a[d].tf(this.N,this.i,this.i,b,c);b.length&&(this.C||(this.C=new id),this.C.kb(b));c.length&&(this.B||(this.B=new id),this.B.kb(c))}},Og:aa("N"),Kg:aa("C"),Hg:aa("B"),mf:t("i"),fc:aa("i")};function T(){this.i=[]}function jd(a){var b=new T;b.fc(a);return b}
T.prototype={c:function(){var a=new T;a.fc(this.i.map(function(a){return a.c()}));return a},Xg:t("i"),Rc:function(a){var b=new id(this.c().i),a=new id(a.c().i);b.Y(a);a.Y(b);a.w();a.Y(b);a.w();b.kb(a.Ka());return jd(b.Ka())},ka:function(a){var b=new id(this.c().i),a=new id(a.c().i);b.w();b.Y(a);a.Y(b);a.w();a.Y(b);a.w();b.kb(a.Ka());b.w();return jd(b.Ka())},Cc:function(a){var b=new id(this.c().i),a=new id(a.c().i);b.w();a.Y(b);a.w();b.Y(a);a.Y(b);b.kb(a.Ka());b.w();return jd(b.Ka())},inverse:function(){var a=
this.c();a.i.map(function(a){a.qa()});return a},mf:t("i"),fc:aa("i")};A("CSG",T);A("CSG.fromPolygons",jd);A("CSG.prototype.toPolygons",T.prototype.Xg);A("CSG.prototype.union",T.prototype.Rc);A("CSG.prototype.subtract",T.prototype.ka);A("CSG.prototype.intersect",T.prototype.Cc);A("CSG.prototype.inverse",T.prototype.inverse);A("CSG.prototype.polygons",T.prototype.mf);A("CSG.prototype.setPolygons",T.prototype.fc);function U(a,b){this.x=ea(a)?a:0;this.y=ea(b)?b:0}U.prototype.c=function(){return new U(this.x,this.y)};U.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function kd(a,b){return new U(a.x-b.x,a.y-b.y)};function Gc(a,b){this.x=a;this.y=b}C(Gc,U);v=Gc.prototype;v.c=function(){return new Gc(this.x,this.y)};v.Fc=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};v.scale=function(a){this.x*=a;this.y*=a;return this};v.w=function(){this.x=-this.x;this.y=-this.y;return this};v.normalize=function(){return this.scale(1/this.Fc())};v.add=function(a){this.x+=a.x;this.y+=a.y;return this};v.ka=function(a){this.x-=a.x;this.y-=a.y;return this};
v.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};v.Ob=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ld(a,b){this.width=a;this.height=b}function md(a,b){return a==b?o:!a||!b?r:a.width==b.width&&a.height==b.height}v=ld.prototype;v.c=function(){return new ld(this.width,this.height)};v.toString=function(){return"("+this.width+" x "+this.height+")"};v.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};v.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
v.scale=function(a){this.width*=a;this.height*=a;return this};function nd(a,b){if(a instanceof nd)this.u=a.wf();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=r;break a}for(var e=0;e<a[d].length;e++)if(!z(a[d][e])){c=r;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.u=qb(a):a instanceof ld?this.u=od(a.height,a.width):z(a)&&z(b)&&0<a&&0<b?this.u=od(a,b):g(Error("Invalid argument(s) for Matrix contructor"))}this.n=new ld(this.u[0].length,this.u.length)}
function pd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new nd(b)}function qd(a,b,c){for(var d=0;d<a.L().height;d++)for(var e=0;e<a.L().width;e++)b.call(c,a.u[d][e],d,e,a)}function rd(a,b){var c=new nd(a.L());qd(a,function(d,e,f){c.u[e][f]=b.call(k,d,e,f,a)});return c}function od(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}v=nd.prototype;
v.add=function(a){md(this.n,a.L())||g(Error("Matrix summation is only supported on arrays of equal size"));return rd(this,function(b,c,d){return b+a.u[c][d]})};v.Ob=function(a,b){if(this.n.width!=a.n.width||this.n.height!=a.n.height)return r;for(var c=b||0,d=0;d<this.n.height;d++)for(var e=0;e<this.n.width;e++)if(!(Math.abs(this.u[d][e]-a.u[d][e])<=(c||1.0E-6)))return r;return o};v.L=t("n");function td(a,b,c){return!(0<=b&&b<a.n.height&&0<=c&&c<a.n.width)?q:a.u[b][c]}
function V(a,b,c,d){0<=b&&b<a.n.height&&0<=c&&c<a.n.width||g(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.n.height+","+a.n.width+")"));a.u[b][c]=d}v.multiply=function(a){if(a instanceof nd)return this.n.width!=a.L().height&&g(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),ud(this,a);if(z(a))return vd(this,a);g(Error("A matrix can only be multiplied by a number or another matrix."))};
v.ka=function(a){md(this.n,a.L())||g(Error("Matrix subtraction is only supported on arrays of equal size."));return rd(this,function(b,c,d){return b-a.u[c][d]})};v.wf=t("u");v.toString=function(){var a=0;qd(this,function(b){b=(""+b).length;b>a&&(a=b)});var b=[];kb(this.u,function(c){b.push("[ ");kb(c,function(c){c=""+c;b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};
function ud(a,b){var c=new nd(a.n.height,b.L().width);qd(c,function(a,e,f){for(var h=a=0;h<this.n.width;h++)a+=td(this,e,h)*td(b,h,f);V(c,e,f,a)},a);return c}function vd(a,b){return rd(a,function(a){return a*b})};function Y(a,b){nd.call(this,a,b);this._className="matrix"}C(Y,nd);function wd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new Y(b)}v=Y.prototype;v.z=function(){var a=[],b=this.L();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(td(this,c,d));return a};
v.translate=function(a){this.n.width!=this.n.height&&g(Error("Can not translate non-square matrix."));var b=this.L(),c=pd(b.height);a instanceof Gc&&3==b.height?(V(c,0,2,a.x),V(c,1,2,a.y)):a instanceof O&&4==b.height?(V(c,0,3,a.x),V(c,1,3,a.y),V(c,2,3,a.b)):g(Error("Translation failed."));return new Y(this.multiply(c))};
v.rotate=function(a,b){(4!=this.L().height||this.n.width!=this.n.height)&&g(Error("Only 4x4 matrices can be rotated."));(!w(b)||!(b instanceof O))&&g(Error("Invalid axis vector."));z(a)||g(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=pd(4);V(f,0,0,d+c.x*c.x*(1-d));V(f,0,1,c.x*c.y*(1-d)-c.b*e);V(f,0,2,c.x*c.b*(1-d)+c.y*e);V(f,1,0,c.y*c.x*(1-d)+c.b*e);V(f,1,1,d+c.y*c.y*(1-d));V(f,1,2,c.y*c.b*(1-d)-c.x*e);V(f,2,0,c.b*c.x*(1-d)-c.y*e);V(f,2,1,c.b*c.y*(1-d)+c.x*e);V(f,2,2,
d+c.b*c.b*(1-d));return new Y(this.multiply(f))};v.bc=function(a){var b=this.L(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof O&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):g(Error("Multiplication by vector failed."));a=this.multiply(new nd(c));return new O(parseFloat(td(a,0,0)),parseFloat(td(a,1,0)),parseFloat(td(a,2,0)))};v.Vg=function(a,b){var c=this.u[a];this.u[a]=this.u[b];this.u[b]=c};
v.Ug=function(a,b){for(var c=this.L(),d=0,d=0;d<c.height;d++){var e=td(this,d,a);e||(e=0);var f=td(this,d,b);f||(f=0);V(this,d,a,f);V(this,d,b,e)}};A("X.matrix",Y);A("X.matrix.createIdentityMatrix",wd);A("X.matrix.prototype.flatten",Y.prototype.z);A("X.matrix.prototype.translate",Y.prototype.translate);A("X.matrix.prototype.rotate",Y.prototype.rotate);A("X.matrix.prototype.multiplyByVector",Y.prototype.bc);A("X.matrix.prototype.swapRows",Y.prototype.Vg);A("X.matrix.prototype.swapCols",Y.prototype.Ug);function xd(){P.call(this);this._className="transform";this.g=wd(4);this.ma=new Float32Array(this.g.z())}C(xd,P);v=xd.prototype;v.Eg=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new O(0,1,0));this.ma=new Float32Array(this.g.z());this.d=o};v.Fg=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new O(1,0,0));this.ma=new Float32Array(this.g.z());this.d=o};
v.Gg=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new O(0,0,1));this.ma=new Float32Array(this.g.z());this.d=o};v.Zg=function(a){z(a)||g(Error("Invalid distance."));this.g=this.g.translate(new O(a,0,0));this.ma=new Float32Array(this.g.z());this.d=o};v.$g=function(a){z(a)||g(Error("Invalid distance."));this.g=this.g.translate(new O(0,a,0));this.ma=new Float32Array(this.g.z());this.d=o};
v.ah=function(a){z(a)||g(Error("Invalid distance."));this.g=this.g.translate(new O(0,0,a));this.ma=new Float32Array(this.g.z());this.d=o};v.rg=t("g");v.qf=function(a){var b=wd(4);w(a)&&a instanceof Y&&(b=a);this.g=b;this.ma=new Float32Array(this.g.z());this.d=o};function yd(a){return a.ma}function zd(a,b,c){var d=td(a.g,b,c);d||(d=0);V(a.g,b,c,-1*d);a.ma=new Float32Array(a.g.z());a.d=o}v.$f=function(){zd(this,0,0)};v.ag=function(){zd(this,1,1)};v.bg=function(){zd(this,2,2)};A("X.transform",xd);
A("X.transform.prototype.rotateX",xd.prototype.Eg);A("X.transform.prototype.rotateY",xd.prototype.Fg);A("X.transform.prototype.rotateZ",xd.prototype.Gg);A("X.transform.prototype.translateX",xd.prototype.Zg);A("X.transform.prototype.translateY",xd.prototype.$g);A("X.transform.prototype.translateZ",xd.prototype.ah);A("X.transform.prototype.matrix",xd.prototype.rg);A("X.transform.prototype.setMatrix",xd.prototype.qf);A("X.transform.prototype.flipX",xd.prototype.$f);A("X.transform.prototype.flipY",xd.prototype.ag);
A("X.transform.prototype.flipZ",xd.prototype.bg);function Ad(a){P.call(this);this._className="file";this.be=a;this.d=o}C(Ad,P);Ad.prototype.path=t("be");Ad.prototype.Ng=function(a){this.be=a;this.d=o};A("X.file",Ad);A("X.file.prototype.path",Ad.prototype.path);A("X.file.prototype.setPath",Ad.prototype.Ng);function Bd(){P.call(this);this._className="texture";var a=window["X.Counter"];a.Ie();this._id=a.value();this.Ib=this.Wd=this.Pa=q;this.qc=this.rc=0;this.d=o}C(Bd,P);Bd.prototype.id=t("_id");Bd.prototype.file=t("Pa");Bd.prototype.yd=t("Wd");A("X.texture",Bd);A("X.texture.filters",{xh:"SHARP",yh:"SMOOTH"});A("X.texture.prototype.file",Bd.prototype.file);function N(a){P.call(this);this._className="object";var b=window["X.Counter"];b.Ie();this._id=b.value();this._type=Cd;this.je=new xd;this._color=[1,1,1];this.j=new Q;this.l=new Q;this.W=new Q;this.Pa=this.Sa=this.S=q;this._opacity=1;this.bb=q;this._visible=o;this._lineWidth=this._pointSize=1;this._caption=q;this._magicMode=r;w(a)&&(this._type=a.type(),this.je.qf(new Y(a.transform().g)),this._color=Array(a.color()),this.j=new Q(a.j),this.l=new Q(a.l),this.W=new Q(a.W),this.S=a.S,this.Sa=a.Sa,a.file()&&
(this.Pa=new Ad((new String(a.file().path())).toString())),this._opacity=a.opacity(),this.bb=a.children(),this._visible=a.Vd(),this._pointSize=a.Ld(),this._lineWidth=a.lineWidth(),a.caption()&&(this._caption=(new String(a.caption())).toString()),this._magicMode=a.Cd(),this.d=o);this.d=o}C(N,P);var Cd="TRIANGLES",Zc="LINES";v=N.prototype;v.id=t("_id");
function Dd(a){for(var b=a.j.count(),c=[],d=0,d=0;d<b;d+=3){var e=a.j.get(d),f=a.j.get(d+1),h=a.j.get(d+2),i=a.l.get(d),j=a.l.get(d+1),p=a.l.get(d+2),l=a._color;0<a.W.length()&&(l=a.W.get(d));var n=[];n.push(new S(e,i));n.push(new S(f,j));n.push(new S(h,p));c.push(new hd(n,l))}return jd(c)}
function Ed(a,b){(!w(b)||!(b instanceof T))&&g(Error("Invalid CSG object."));a.j.clear();a.l.clear();a.W.clear();var c=new fd,d=[];lb(b.i,function(a){for(var b=[],h=a.gc,b=lb(a.la,function(a){a.color=h;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Gf=lb(c.unique(),function(a){return[a.I.x(),a.I.y(),a.I.b()]});a.Ff=lb(c.unique(),function(a){return[a.v.x(),a.v.y(),a.v.b()]});a.Ef=lb(c.unique(),function(a){return!a.color?q:[a.color[0],a.color[1],a.color[2]]});lb(d,function(a){var b=
a[0],c=a[1],a=a[2],d=this.Gf,j=this.Ff,p=this.Ef;this.j.add(d[b][0],d[b][1],d[b][2]);this.j.add(d[c][0],d[c][1],d[c][2]);this.j.add(d[a][0],d[a][1],d[a][2]);this.l.add(j[b][0],j[b][1],j[b][2]);this.l.add(j[c][0],j[c][1],j[c][2]);this.l.add(j[a][0],j[a][1],j[a][2]);p[b]&&this.W.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.W.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.W.add(p[a][0],p[a][1],p[a][2])}.bind(a));a.tb(Cd)}v.type=t("_type");v.tb=aa("_type");v.transform=t("je");v.Ag=t("j");v.ug=t("l");v.Sf=t("W");
v.color=t("_color");v.Wg=t("S");v.Pc=function(a){if(w(a)){if(y(a)){var b=a,c=a=new Bd;w(b)?(y(b)&&(b=new Ad(b)),c.Pa=b):c.Pa=q}a instanceof Bd||g(Error("Invalid texture."));this.S=a}else this.S=q};v.pf=function(a,b,c){(!z(a)&&0>a&&1<a||!z(b)&&0>b&&1<b||!z(c)&&0>c&&1<c)&&g(Error("Invalid color."));if(this.Wb())for(var d=this.children(),e=d.length,f=0,f=0;f<e;f++)d[f].pf(a,b,c);this._color[0]=a;this._color[1]=b;this._color[2]=c;this.d=o};
v.Rc=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Dd(b));a=new N;Ed(a,Dd(this).Rc(b));return a};v.ka=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Dd(b));a=new N;Ed(a,Dd(this).ka(b));return a};v.Cc=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Dd(b));a=new N;Ed(a,Dd(this).Cc(b));return a};
v.inverse=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Dd(b));a=new N;Ed(a,Dd(this).inverse(b));return a};v.opacity=t("_opacity");v.caption=t("_caption");v.Ig=function(a){this._caption=a;this.d=o};v.J=function(a){if(this.Wb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].J(a);this._visible=a;this.d=o};v.Vd=t("_visible");
v.rf=function(a){(!z(a)||1<a||0>a)&&g(Error("Invalid opacity."));if(this.Wb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].rf(a);this._opacity=a;this.d=o};v.load=function(a){this.Pa=w(a)?new Ad(a):q};v.file=t("Pa");v.ac=function(){var a=new Nc;a.Ga=this;this.dispatchEvent(a)};v.children=function(){this.bb||(this.bb=[]);return this.bb};v.Wb=function(){return!this.bb?r:0<this.bb.length};v.Lg=function(a){z(a)||g(Error("Invalid line width."));this._lineWidth=a;this.d=o};v.lineWidth=t("_lineWidth");
v.Pg=function(a){z(a)||g(Error("Invalid point size."));this._pointSize=a;this.d=o};v.Ld=t("_pointSize");v.Cd=t("_magicMode");v.Mg=function(a){"boolean"!=typeof a&&g(Error("Invalid magicMode setting."));this._magicMode=a};function Fd(a,b){(!w(a)||!w(b)||!(a instanceof N)||!(b instanceof N))&&g(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.opacity()?-1:1==b.opacity()?1:w(a.xc)&&w(b.xc)&&a.xc>b.xc?-1:1}A("X.object",N);A("X.object.prototype.id",N.prototype.id);
A("X.object.prototype.type",N.prototype.type);A("X.object.prototype.transform",N.prototype.transform);A("X.object.prototype.points",N.prototype.Ag);A("X.object.prototype.normals",N.prototype.ug);A("X.object.prototype.texture",N.prototype.Wg);A("X.object.prototype.setTexture",N.prototype.Pc);A("X.object.prototype.colors",N.prototype.Sf);A("X.object.prototype.color",N.prototype.color);A("X.object.prototype.setColor",N.prototype.pf);A("X.object.prototype.opacity",N.prototype.opacity);
A("X.object.prototype.setOpacity",N.prototype.rf);A("X.object.prototype.lineWidth",N.prototype.lineWidth);A("X.object.prototype.setLineWidth",N.prototype.Lg);A("X.object.prototype.pointSize",N.prototype.Ld);A("X.object.prototype.setPointSize",N.prototype.Pg);A("X.object.prototype.load",N.prototype.load);A("X.object.prototype.file",N.prototype.file);A("X.object.prototype.caption",N.prototype.caption);A("X.object.prototype.visible",N.prototype.Vd);A("X.object.prototype.setCaption",N.prototype.Ig);
A("X.object.prototype.setVisible",N.prototype.J);A("X.object.prototype.magicMode",N.prototype.Cd);A("X.object.prototype.setMagicMode",N.prototype.Mg);A("X.object.prototype.intersect",N.prototype.Cc);A("X.object.prototype.inverse",N.prototype.inverse);A("X.object.prototype.subtract",N.prototype.ka);A("X.object.prototype.union",N.prototype.Rc);A("X.object.OPACITY_COMPARATOR",Fd);A("X.object.prototype.children",N.prototype.children);function Gd(){Tc.call(this);this._className="parserVTK"}C(Gd,Tc);
Gd.prototype.parse=function(a,b){var c=a.j,d=a.l,e=b.split("\n"),f=e.length,h=new Q,i=new Q;this.D=[];this.X=Cd;this.ed=this.Ia=this.za=this.Ja=r;for(var j=0,p=f%8;p--;)this.q(h,i,e[j]),j++;for(p=0.125*f^0;p--;)this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++;if(this.X==Cd){e=i.length();j=f=this.D.length;do{var p=this.D[f-j],l=p.length,n;for(n=0;n<l;n++){var m=parseInt(p[n],10),s=
h.get(m);c.add(s[0],s[1],s[2]);m<e?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b))}j--}while(0<j)}else if("TRIANGLE_STRIPS"==this.X){e=i.length();j=f=this.D.length;do{p=this.D[f-j];l=p.length;for(n=0;n<l;n++)m=parseInt(p[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),(0==n||n==l-1)&&c.add(s[0],s[1],s[2]),m<e?(m=i.get(m),d.add(m[0],m[1],m[2]),(0==n||n==l-1)&&d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b),(0==n||n==l-1)&&d.add(m.x,
m.y,m.b));j--}while(0<j)}else if(this.X==Zc){e=i.length();j=f=this.D.length;do{p=this.D[f-j];l=p.length;for(n=0;n<l-1;n++){var u=parseInt(p[n],10),m=parseInt(p[n+1],10),x=h.get(u),s=h.get(m);c.add(x[0],x[1],x[2]);c.add(s[0],s[1],s[2]);u<e-1?(s=i.get(u),m=i.get(m),d.add(s[0],s[1],s[2]),d.add(m[0],m[1],m[2])):(m=new O(x[0],x[1],x[2]),m.normalize(),d.add(m.x,m.y,m.b),m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b))}j--}while(0<j)}else if("POINTS"==this.X){e=i.length();j=f=this.D.length;do{p=
this.D[f-j];l=p.length;for(n=0;n<l;n++)m=parseInt(p[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),m<e?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b));j--}while(0<j)}else if("POLYGONS"==this.X){e=i.length();j=f=this.D.length;do{p=this.D[f-j];l=p.length;for(n=0;n<l;n++)m=parseInt(p[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),m<e?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b));j--}while(0<j)}a.tb(this.X);c=new Nc;c.Ga=
a;this.dispatchEvent(c)};
Gd.prototype.q=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,e=c[0];if("POINTS"==e)this.Ja=o,this.Ia=this.za=r;else if("VERTICES"==e)this.za=o,this.Ia=this.Ja=r,a=parseInt(c[1],10),3<=a?this.X=Cd:1==a?this.X="POINTS":g(Error("VTK file not supported!")),this.D=[];else if("TRIANGLE_STRIPS"==e)this.za=o,this.Ia=this.Ja=r,this.X="TRIANGLE_STRIPS",this.D=[];else if("LINES"==e)this.za=o,this.Ia=this.Ja=r,this.X=Zc,this.D=[];else if("POLYGONS"==e)this.za=o,this.Ia=this.Ja=r,
this.X="POLYGONS",this.D=[];else if("POINT_DATA"==e)this.Ia=o,this.za=this.Ja=r;else if(this.Ja)if(1==d||isNaN(parseFloat(e)))this.Ja=r;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]);a.add(e,f,h)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),a.add(e,f,h));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,e,c))}else this.za?1==d||isNaN(parseFloat(e))?this.za=r:this.D.push(c.slice(1)):this.Ia&&("NORMALS"==e?this.ed=o:1==d||isNaN(parseFloat(e))?
this.ed=this.Ia=r:this.ed&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]),b.add(e,f,h)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),b.add(e,f,h)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,e,c))))};A("X.parserVTK",Gd);A("X.parserVTK.prototype.parse",Gd.prototype.parse);A("X.parserVTK.prototype.parseLine",Gd.prototype.q);function Hd(){Tc.call(this);this._className="parserFSM"}C(Hd,Tc);
Hd.prototype.parse=function(a,b){var c=a.j,d=a.l,e=new Q,f;f=3;var h=0,i;do i=this.r(b,f++),h++;while(200>h&&10!=i);f++;var j=Xc(this,b,f);f+=4;h=Xc(this,b,f);f+=4;i=[];for(var p=0,p=0;p<j;p++){var l=Uc(this,b,f);f+=4;var n=Uc(this,b,f);f+=4;var m=Uc(this,b,f);f+=4;i[p]=0;e.add(l,n,m)}j=[];p=[];for(l=0;l<h;l++){var s=Xc(this,b,f);f+=4;m=Xc(this,b,f);f+=4;n=Xc(this,b,f);f+=4;i[s]+=1;i[m]+=1;i[n]+=1;j.push([s,m,n]);p.push(new O(0,0,0))}for(l=0;l<h;l++){var s=j[l][0],m=j[l][1],n=j[l][2],u=e.get(s);f=
e.get(m);var x=e.get(n),u=new O(u[0],u[1],u[2]),x=new O(x[0],x[1],x[2]);f=(new O(f[0],f[1],f[2])).c().ka(u);u=x.c().ka(u);f=Rc(f,u).normalize();p[s]=p[s].add(f);p[m]=p[m].add(f);p[n]=p[n].add(f)}for(l=0;l<h;l++)s=j[l][0],m=j[l][1],n=j[l][2],u=e.get(s),f=e.get(m),x=e.get(n),c.add(u[0],u[1],u[2]),c.add(f[0],f[1],f[2]),c.add(x[0],x[1],x[2]),s=p[s].scale(1/i[s]).normalize(),m=p[m].scale(1/i[m]).normalize(),n=p[n].scale(1/i[n]).normalize(),d.add(s.x,s.y,s.b),d.add(m.x,m.y,m.b),d.add(n.x,n.y,n.b);a.tb(Cd);
c=new Nc;c.Ga=a;this.dispatchEvent(c)};A("X.parserFSM",Hd);A("X.parserFSM.prototype.parse",Hd.prototype.parse);function Id(a){function b(){fc+=8;return ze<sd.length?sd.charCodeAt(ze++)&255:-1}function c(){var a;fc++;a=Da&1;Da>>=1;0==Da&&(Da=b(),a=Da&1,Da=Da>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=fa[b]>>8-a);return b}function e(a){ka++;W[L++]=a;s.push(String.fromCharCode(a));32768==L&&(L=0)}function f(){this.Ma=this.La=0;this.Dc=q;this.Me=-1}function h(){for(;;){if(Ab[ma]>=Ae)return-1;if(Be[Ab[ma]]==ma)return Ab[ma]++;Ab[ma]++}}function i(){var a=Bb[Cb],b;u&&document.write("<br>len:"+
ma+" treepos:"+Cb);if(17==ma)return-1;Cb++;ma++;b=h();u&&document.write("<br>IsPat "+b);if(0<=b)a.La=b,u&&document.write("<br>b0 "+a.La);else if(a.La=32768,u&&document.write("<br>b0 "+a.La),i())return-1;b=h();if(0<=b)a.Ma=b,u&&document.write("<br>b1 "+a.Ma),a.Dc=q;else if(a.Ma=32768,u&&document.write("<br>b1 "+a.Ma),a.Dc=Bb[Cb],a.Me=Cb,i())return-1;ma--;return 0}function j(a,b,c){u&&document.write("currentTree "+a+" numval "+b+" lengths "+c+" show 0");Bb=a;Cb=0;Be=c;Ae=b;for(a=0;17>a;a++)Ab[a]=0;
ma=0;if(i())return u&&window.console.log("invalid huffman tree\n"),-1;if(u){document.write("<br>Tree: "+Bb.length);for(a=0;32>a;a++)document.write("Places["+a+"].b0="+Bb[a].La+"<br>"),document.write("Places["+a+"].b1="+Bb[a].Ma+"<br>")}return 0}function p(a){for(var b,d,e=0,f=a[e];;)if(b=c(),u&&document.write("b="+b),b){if(!(f.Ma&32768))return u&&document.write("ret1"),f.Ma;f=f.Dc;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.La&32768))return u&&document.write("ret2"),f.La;e++;f=
a[e]}}function l(){var a,h,i,n;do{a=c();h=d(2);switch(h){case 0:u&&window.console.log("Stored\n");break;case 1:u&&window.console.log("Fixed Huffman codes\n");break;case 2:u&&window.console.log("Dynamic Huffman codes\n");break;case 3:u&&window.console.log("Reserved block type!!\n");break;default:u&&window.console.log("Unexpected value %d!\n",h)}if(0==h){var m;Da=1;m=b();m|=b()<<8;h=b();h|=b()<<8;for((m^~h)&65535&&document.write("BlockLen checksum mismatch\n");m--;)h=b(),e(h)}else if(1==h)for(var l;;)if(l=
fa[d(7)]>>1,23<l?(l=l<<1|c(),199<l?(l-=128,l=l<<1|c()):(l-=48,143<l&&(l+=136))):l+=256,256>l)e(l);else if(256==l)break;else{l-=257;n=d(cc[l])+la[l];l=fa[d(5)]>>3;8<Db[l]?(m=d(8),m|=d(Db[l]-8)<<8):m=d(Db[l]);m+=Ce[l];for(l=0;l<n;l++)h=W[L-m&32767],e(h)}else if(2==h){var s=Array(320);h=257+d(5);m=1+d(5);i=4+d(4);for(l=0;19>l;l++)s[l]=0;for(l=0;l<i;l++)s[Of[l]]=d(3);n=pa.length;for(i=0;i<n;i++)pa[i]=new f;if(j(pa,19,s)){L=0;return}if(u){document.write("<br>distanceTree");for(l=0;l<pa.length;l++)document.write("<br>"+
pa[l].La+" "+pa[l].Ma+" "+pa[l].Dc+" "+pa[l].Me)}n=h+m;i=0;var x=-1;for(u&&document.write("<br>n="+n+" bits: "+fc+"<br>");i<n;)if(x++,l=p(pa),u&&document.write("<br>"+x+" i:"+i+" decode: "+l+"    bits "+fc+"<br>"),16>l)s[i++]=l;else if(16==l){var B;l=3+d(2);if(i+l>n){L=0;return}for(B=i?s[i-1]:0;l--;)s[i++]=B}else{l=17==l?3+d(3):11+d(7);if(i+l>n){L=0;return}for(;l--;)s[i++]=0}n=gc.length;for(i=0;i<n;i++)gc[i]=new f;if(j(gc,h,s)){L=0;return}n=gc.length;for(i=0;i<n;i++)pa[i]=new f;l=[];n=s.length;for(i=
h;i<n;i++)l[i-h]=s[i];if(j(pa,m,l)){L=0;return}for(u&&document.write("<br>literalTree");;)if(l=p(gc),256<=l){l-=256;if(0==l)break;l--;n=d(cc[l])+la[l];l=p(pa);8<Db[l]?(m=d(8),m|=d(Db[l]-8)<<8):m=d(Db[l]);for(m+=Ce[l];n--;)h=W[L-m&32767],e(h)}else e(l)}}while(!a);L=0;Da=1}function n(){u&&window.console.log("NEXTFILE");s=[];var a=[];J=r;a[0]=b();a[1]=b();u&&window.console.log("type: "+a[0]+" "+a[1]);120==a[0]&&218==a[1]&&(u&&window.console.log("GEONExT-GZIP"),l(),u&&window.console.log(s.join("")),F[B]=
Array(2),F[B][0]=s.join(""),F[B][1]="geonext.gxt",B++);31==a[0]&&139==a[1]&&(u&&window.console.log("GZIP"),m(),u&&window.console.log(s.join("")),F[B]=Array(2),F[B][0]=s.join(""),F[B][1]="file",B++);if(80==a[0]&&75==a[1]&&(J=o,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u&&window.console.log("ZIP-Version: "+a[1]+" "+a[0]/10+"."+a[0]%10);x=b();x|=b()<<8;u&&window.console.log("gpflags: "+x);a=b();a|=b()<<8;u&&window.console.log("method: "+a);b();b();b();b();var c=b(),c=c|b()<<8,c=c|b()<<16,
c=c|b()<<24,d=b(),d=d|b()<<8,d=d|b()<<16,d=d|b()<<24,e=b(),e=e|b()<<8,e=e|b()<<16,e=e|b()<<24;u&&window.console.log("local CRC: "+c+"\nlocal Size: "+e+"\nlocal CompSize: "+d);c=b();c|=b()<<8;d=b();d|=b()<<8;u&&window.console.log("filelen "+c);e=0;for(Ua=[];c--;){var f=b();"/"==f|":"==f?e=0:e<De-1&&(Ua[e++]=String.fromCharCode(f))}u&&window.console.log("nameBuf: "+Ua);Ee||(Ee=Ua);for(e=0;e<d;)b(),e++;ka=0;8==a&&(l(),u&&window.console.log(s.join("")),F[B]=Array(2),F[B][0]=s.join(""),F[B][1]=Ua.join(""),
B++);m()}}function m(){var a=[],c;x&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b(),u&&window.console.log("CRC:"));J&&n();a[0]=b();if(8!=a[0])u&&window.console.log("Unknown compression method!");else{x=b();u&&x&-32&&window.console.log("Unknown flags set!");b();b();b();b();b();b();if(x&4){a[0]=b();a[2]=b();ma=a[0]+256*a[1];u&&window.console.log("Extra field size: "+ma);for(a=0;a<ma;a++)b()}if(x&8){a=0;for(Ua=[];c=b();){if("7"==
c||":"==c)a=0;a<De-1&&(Ua[a++]=c)}u&&window.console.log("original file name: "+Ua)}if(x&16)for(;b(););x&2&&(b(),b());l();b();b();b();b();b();b();b();b();J&&n()}}var s=[],u=r,x,B=0,F=[],W=Array(32768),L=0,J=r,ka,fa=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,
138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,
123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],la=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cc=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],Ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Db=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Of=[16,17,18,0,8,7,9,6,
10,5,11,4,12,3,13,2,14,1,15],sd=a,ze=0,Da=1,fc=0,De=256,Ua=[],Ee,gc=Array(288),pa=Array(32),Cb=0,Bb=q,ma=0,Ab=Array(17);Ab[0]=0;var Be,Ae;Id.prototype.bh=function(){u&&window.console.log(sd);n();return F}};function Jd(){Tc.call(this);this._className="parserNRRD"}C(Jd,Tc);
Jd.prototype.parse=function(a,b){var c=0,d=b.match(/^([\s\S]*?)\r?\n\r?\n/),c=d[0].length,e,f,h,i,j,p,d=d[1].split(/\r?\n/);for(j=0,p=d.length;j<p;j++)if(e=d[j],e.match(/NRRD\d+/))this.mg=o;else if(!e.match(/^#/)&&(i=e.match(/(.*):(.*)/)))f=i[1].trim(),e=i[2].trim(),(h=this.Zf[f])?h.call(this,e):this[f]=e;this.mg||g(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding&&g(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Ud&&(this.Ud=[new O(1,0,0),
new O(0,1,0),new O(0,0,1)],this.Qd)){d=[];for(i=0;2>=i;i++)d.push(!isNaN(this.Qd[i])?this.Ud[i].scale(this.Qd[i]):k)}i=0;i="gzip"==this.encoding||"gz"==this.encoding?(new Id(b.substr(c))).bh()[0][0]:b.substr(c);a.ea=[this.ab[2],this.ab[1],this.ab[0]];a.pa();j=this.ab[0]*this.ab[1]*this.ab[2];c=Array(j);d=-Infinity;p=Infinity;for(e=0;e<j;e++)f=this.Jc(i,0+e*this.Ic),c[e]=f,d=Math.max(d,f),p=Math.min(p,f);j=this.ab;e=d;i=j[2];d=j[1];j=j[0];f=d*j;p=Array(i);for(h=0;h<i;h++){p[h]=Array(d);for(var l=0;l<
d;l++)p[h][l]=new Uint8Array(j)}for(l=l=0;l<i;l++){h=c.slice(l*f,(l+1)*f);for(var n=new Uint8Array(4*f),m=0,s=0,u=0,m=0;m<d;m++)for(s=0;s<j;s++){var x=h[u],x=255*(x/e),B=4*u;n[B]=x;n[++B]=x;n[++B]=x;n[++B]=255;p[l][m][s]=x;u++}m=h=new Bd;m.Ib=n;m.d=o;n=h;n.rc=j;n.d=o;n=h;n.qc=d;n.d=o;a.ge.children()[l].Pc(h)}for(m=0;m<d;m++){n=new Uint8Array(4*i*j);for(l=u=0;l<i;l++)for(s=0;s<j;s++)x=p[l][m][s],B=4*u,n[B]=x,n[++B]=x,n[++B]=x,n[++B]=255,u++;c=h=new Bd;c.Ib=n;c.d=o;c=h;c.rc=j;c.d=o;c=h;c.qc=i;c.d=o;
a.he.children()[d-1-m].Pc(h)}for(s=0;s<j;s++){n=new Uint8Array(4*i*d);for(l=u=0;l<i;l++)for(m=0;m<d;m++)x=p[l][m][s],B=4*u,n[B]=x,n[++B]=x,n[++B]=x,n[++B]=255,u++;c=h=new Bd;c.Ib=n;c.d=o;c=h;c.rc=d;c.d=o;c=h;c.qc=i;c.d=o;a.ie.children()[j-1-s].Pc(h)}c=new Nc;c.Ga=a;this.dispatchEvent(c)};
Jd.prototype.Zf={type:function(a){switch(a){case "unsigned char":case "uint8":this.Jc=this.r;this.Ic=1;break;case "signed char":case "int8":this.Jc=this.yg;this.Ic=1;break;case "short":case "signed short":case "unsigned short":case "short int":case "int16":this.Jc=this.Kc;this.Ic=2;break;case "int":case "int32":break;case "float":this.Jc=this.dc;this.Ic=4;break;default:g(Error("Only short/int/int8/float data is allowed. Found "+a))}return this.type=a},endian:function(a){return a},encoding:function(a){return this.encoding=
a},dimension:function(a){return parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.ab=e},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Ud=function(){var a,f,h;h=[];for(a=0,f=c.length;a<f;a++)d=c[a],h.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];for(a=0,c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return h}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.Qd=e}};A("X.parserNRRD",Jd);A("X.parserNRRD.prototype.parse",Jd.prototype.parse);function Kd(){P.call(this);this._className="loader";this.zb=q;this.Hb=0}C(Kd,P);function Ld(a){w(a.zb)||(a.zb=new I);return a.zb}function Md(a){return!w(a.zb)?o:!a.zb.pd(r)}Kd.prototype.qg=function(a){Nd(this,1.7);setTimeout(function(){a.S.file().ua();a.ac();Ld(this).set(a.id(),o)}.bind(this),100)};function Nd(a,b){a.Hb+=b/Ld(a).$()/3;1<a.Hb&&(a.Hb=1);var c=new Oc;c.ke=a.Hb;a.dispatchEvent(c)}Kd.prototype.Oe=function(){g(Error("Could not get the file."))};
Kd.prototype.pg=function(a,b){Nd(this,1);setTimeout(function(){var c=b.file().path().split(".").pop().toLowerCase();"stl"==c?(c=new $c,lc(c,rc,this.cc.bind(this)),c.parse(b,a.response)):"vtk"==c?(c=new Gd,lc(c,rc,this.cc.bind(this)),c.parse(b,a.response)):"trk"==c?(c=new Yc,lc(c,rc,this.cc.bind(this)),c.parse(b,a.response)):"fsm"==c?(c=new Hd,lc(c,rc,this.cc.bind(this)),c.parse(b,a.response)):"nrrd"==c&&(c=new Jd,lc(c,rc,this.cc.bind(this)),c.parse(b,a.response))}.bind(this),100)};
Kd.prototype.cc=function(a){Nd(this,1);setTimeout(function(){var b=a.Ga;b.file().ua();b.ac();Ld(this).set(b.id(),o)}.bind(this),100)};A("X.loader",Kd);function Od(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Od.prototype.c=function(){return new Od(this.top,this.right,this.bottom,this.left)};Od.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Od.prototype.contains=function(a){return!this||!a?r:a instanceof Od?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Pd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}v=Pd.prototype;v.c=function(){return new Pd(this.left,this.top,this.width,this.height)};v.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
v.Ke=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,o}return r};v.contains=function(a){return a instanceof Pd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
v.L=function(){return new ld(this.width,this.height)};var Qd;function Rd(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=rb(arguments,1),e;e=c;for(var f=0,h=0;h<d.length;h++)0<=jb(e,d[h])||(e.push(d[h]),f++);e=f==d.length;a.className=c.join(" ");return e};var Sd=!D||db(9);!Pa&&!D||D&&db(9)||Pa&&G("1.9.1");D&&G("9");function Td(a){return a?new Ud(Vd(a)):Qd||(Qd=new Ud)}function Wd(a){return y(a)?document.getElementById(a):a}function Xd(a,b){eb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Yd?a.setAttribute(Yd[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var Yd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function Zd(a,b,c){return $d(document,arguments)}
function $d(a,b){var c=b[0],d=b[1];if(!Sd&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',wa(d.name),'"');if(d.type){c.push(' type="',wa(d.type),'"');var e={};ib(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);d&&(y(d)?c.className=d:ga(d)?Rd.apply(q,[c].concat(d)):Xd(c,d));2<b.length&&ae(a,c,b);return c}
function ae(a,b,c){function d(c){c&&b.appendChild(y(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ha(f)&&!(ja(f)&&0<f.nodeType)?kb(be(f)?qb(f):f,d):d(f)}}function ce(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function de(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function ee(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Vd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function be(a){if(a&&"number"==typeof a.length){if(ja(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return r}function Ud(a){this.t=a||ba.document||document}v=Ud.prototype;
v.Sb=Td;v.e=function(a){return y(a)?this.t.getElementById(a):a};v.Va=function(a,b,c){return $d(this.t,arguments)};v.createElement=function(a){return this.t.createElement(a)};v.createTextNode=function(a){return this.t.createTextNode(a)};function fe(a){return"CSS1Compat"==a.t.compatMode}function ge(a){var b=a.t,a=!E&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new U(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}v.appendChild=function(a,b){a.appendChild(b)};
v.contains=ee;function he(a,b){var c=Vd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,q))?c[b]||c.getPropertyValue(b):""}function ie(a,b){return a.currentStyle?a.currentStyle[b]:q}function je(a,b){return he(a,b)||ie(a,b)||a.style&&a.style[b]}function ke(a){a=a?9==a.nodeType?a:Vd(a):document;return D&&!db(9)&&!fe(Td(a))?a.body:a.documentElement}
function le(a){var b=a.getBoundingClientRect();D&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function me(a){if(D&&!db(8))return a.offsetParent;for(var b=Vd(a),c=je(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=je(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return q}
function ne(a){for(var b=new Od(0,Infinity,Infinity,0),c=Td(a),d=c.t.body,e=c.t.documentElement,f=!E&&"CSS1Compat"==c.t.compatMode?c.t.documentElement:c.t.body;a=me(a);)if((!D||0!=a.clientWidth)&&(!E||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=je(a,"overflow")){var h=oe(a),i;i=a;if(Pa&&!G("1.9")){var j=parseFloat(he(i,"borderLeftWidth"));if(pe(i))var p=i.offsetWidth-i.clientWidth-j-parseFloat(he(i,"borderRightWidth")),j=j+p;i=new U(j,parseFloat(he(i,"borderTopWidth")))}else i=new U(i.clientLeft,
i.clientTop);h.x+=i.x;h.y+=i.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.t.parentWindow||c.t.defaultView||window;e=c.document;E&&!G("500")&&!Qa?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new ld(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new ld(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:q}
function oe(a){var b,c=Vd(a),d=je(a,"position"),e=Pa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new U(0,0),h=ke(c);if(a==h)return f;if(a.getBoundingClientRect)b=le(a),a=ge(Td(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(E&&"fixed"==je(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Oa||E&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=me(b))&&b!=c.body&&b!=h;)if(f.x-=b.scrollLeft,!Oa||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function qe(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function re(a){if("none"!=je(a,"display"))return se(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=se(a);b.display=c;b.position=e;b.visibility=d;return a}function se(a){var b=a.offsetWidth,c=a.offsetHeight,d=E&&!b&&!c;return(!ea(b)||d)&&a.getBoundingClientRect?(a=le(a),new ld(a.right-a.left,a.bottom-a.top)):new ld(b,c)}function te(a,b){a.style.display=b?"":"none"}function pe(a){return"rtl"==je(a,"direction")}
function ue(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var ve={thin:2,medium:4,thick:6};function we(a,b){if("none"==ie(a,b+"Style"))return 0;var c=ie(a,b+"Width");return c in ve?ve[c]:ue(a,c)};function xe(a){this.ba=a;this.k=[]}C(xe,Lb);var ye=[];function Fe(a,b,c,d,e){ga(c)||(ye[0]=c,c=ye);for(var f=0;f<c.length;f++)a.k.push(K(b,c[f],d||a,e||r,a.ba||a))}xe.prototype.Lc=function(){kb(this.k,nc);this.k.length=0};xe.prototype.s=function(){xe.A.s.call(this);this.Lc()};xe.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function Ge(){}(function(a){a.Ae=function(){return a.jg||(a.jg=new a)}})(Ge);Ge.prototype.Ed=0;Ge.Ae();function He(a){this.U=a||Td()}C(He,Sc);v=He.prototype;v.ig=Ge.Ae();v.He=q;v.Ya=r;v.f=q;v.ob=q;v.lb=q;v.Nb=q;v.hh=r;v.e=t("f");v.Od=function(a){this.ob&&this.ob!=a&&g(Error("Method not supported"));He.A.Od.call(this,a)};v.Sb=t("U");v.Va=function(){this.f=this.U.createElement("div")};v.rb=function(a){this.sb(a)};v.sb=function(a,b){this.Ya&&g(Error("Component already rendered"));this.f||this.Va();a?a.insertBefore(this.f,b||q):this.U.t.body.appendChild(this.f);(!this.ob||this.ob.Ya)&&this.yc()};
v.yc=function(){this.Ya=o;Ie(this,function(a){!a.Ya&&a.e()&&a.yc()})};v.Qb=function(){Ie(this,function(a){a.Ya&&a.Qb()});this.Ac&&this.Ac.Lc();this.Ya=r};v.s=function(){He.A.s.call(this);this.Ya&&this.Qb();this.Ac&&(this.Ac.Z(),delete this.Ac);Ie(this,function(a){a.Z()});!this.hh&&this.f&&ce(this.f);this.ob=this.f=this.Nb=this.lb=q};v.Wb=function(){return!!this.lb&&0!=this.lb.length};function Ie(a,b){a.lb&&kb(a.lb,b,k)}
v.removeChild=function(a,b){if(a){var c=y(a)?a:a.He||(a.He=":"+(a.ig.Ed++).toString(36)),a=this.Nb&&c?(c in this.Nb?this.Nb[c]:k)||q:q;if(c&&a){var d=this.Nb;c in d&&delete d[c];ob(this.lb,a);b&&(a.Qb(),a.f&&ce(a.f));c=a;c==q&&g(Error("Unable to set parent component"));c.ob=q;He.A.Od.call(c,q)}}a||g(Error("Child is not in parent component"));return a};function Je(){}C(Je,Sc);v=Je.prototype;v.Sd=0;v.$b=0;v.Dd=100;v.ze=0;v.Rd=1;v.lg=r;v.tg=r;v.Qc=function(a){a=Ke(this,a);this.Sd!=a&&(this.Sd=a+this.ze>this.Dd?this.Dd-this.ze:a<this.$b?this.$b:a,!this.lg&&!this.tg&&this.dispatchEvent("change"))};v.zc=function(){return Ke(this,this.Sd)};v.Vb=function(){return Ke(this,this.$b)};v.Ub=function(){return Ke(this,this.Dd)};function Ke(a,b){return a.Rd==q?b:a.$b+Math.round((b-a.$b)/a.Rd)*a.Rd};function Le(a){this.U=a||Td();this.pb=new Je;K(this.pb,"change",this.fg,r,this)}C(Le,He);var Me={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};v=Le.prototype;v.Va=function(){this.ca=this.Sb().Va("div","progress-bar-thumb");var a=Me[this.hf];this.f=this.Sb().Va("div",a,this.ca);Ne(this);this.e().setAttribute("aria-valuemin",this.Vb());this.e().setAttribute("aria-valuemax",this.Ub())};
v.yc=function(){Le.A.yc.call(this);D&&7>Va&&K(this.e(),"resize",this.Sc,r,this);this.Sc();var a=this.e();a.setAttribute("role","progressbar");a.Nh="progressbar";this.e().setAttribute("aria-live","polite")};v.Qb=function(){Le.A.Qb.call(this);Oe(this)};function Oe(a){D&&7>Va&&mc(a.e(),"resize",a.Sc,r,a)}v.zc=function(){return this.pb.zc()};v.Qc=function(a){this.pb.Qc(a);this.e()&&Ne(this)};function Ne(a){var b=a.zc();a.e().setAttribute("aria-valuenow",b)}v.Vb=function(){return this.pb.Vb()};v.Ub=function(){return this.pb.Ub()};
v.hf="horizontal";v.fg=function(){this.Sc();this.dispatchEvent("change")};v.Sc=function(){if(this.ca){var a=this.Vb(),b=this.Ub(),a=(this.zc()-a)/(b-a),b=Math.round(100*a);"vertical"==this.hf?D&&7>Va?(this.ca.style.top=0,this.ca.style.height="100%",b=this.ca.offsetHeight,a=Math.round(a*b),this.ca.style.top=b-a+"px",this.ca.style.height=a+"px"):(this.ca.style.top=100-b+"%",this.ca.style.height=b+"%"):this.ca.style.width=b+"%"}};v.s=function(){Oe(this);Le.A.s.call(this);this.ca=q;this.pb.Z()};function Pe(a,b){w(a)||g(Error("No valid parent element."));w(b)||g(Error("Invalid initial value."));Le.call(this);this._className="progressbar";this.Ha=a;this.mc=this.oa=q;this.Oa=[];this.Oa=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.Qc(b);this.zd()}C(Pe,Le);
Pe.prototype.zd=function(){this.Ha.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Zd("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Oa[0]),d=document.createTextNode(this.Oa[1]),e=document.createTextNode(this.Oa[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.oa=b;this.rb(this.Ha);a=this.e();a.style.position="absolute";a.style.top=(this.Ha.clientHeight-5)/2;a.style.left=(this.Ha.clientWidth-100)/2};
Pe.prototype.xe=function(){var a=this.e().style.top,b=this.e().style.left;ce(this.e());var c=new Pe(this.Ha,100),d=c.e();d.style.position="absolute";d.style.top=a;d.style.left=b;(d.firstElementChild!=k?d.firstElementChild:de(d.firstChild)).classList.add("progress-bar-thumb-done");this.mc=c};Pe.prototype.Yb=function(){this.oa&&ce(this.oa);this.e()&&ce(this.e());this.mc&&ce(this.mc.e());this.mc=this.oa=q};A("X.progressbar",Pe);A("X.progressbar.prototype.done",Pe.prototype.xe);
A("X.progressbar.prototype.kill",Pe.prototype.Yb);function Qe(a,b,c,d,e){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!w(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid front direction."));(!w(c)||!(c instanceof Array)||3!=c.length)&&g(Error("Invalid up direction."));z(d)||g(Error("Invalid width."));z(e)||g(Error("Invalid height."));N.call(this);this._className="slice";this.o=a;this.Tc=b;this.Ta=c;this.Mb=d;this.hb=e;this.Sa=[0,1,0,0,1,1,1,1,1,0,0,0];this.pa()}C(Qe,N);
Qe.prototype.pa=function(){this.j.clear();var a=new O(this.Tc[0],this.Tc[1],this.Tc[2]),b=new O(this.Ta[0],this.Ta[1],this.Ta[2]),c=Rc(b,a),d=new O(this.o[0],this.o[1],this.o[2]),e=new O(1,1,1);1==a.x?e=new O(this.o[2],this.hb/2,this.Mb/2):1==a.y?(e=new O(this.Mb/2,this.o[2],this.hb/2),this.Sa=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.b&&(e=new O(this.Mb/2,this.hb/2,this.o[2]),this.Sa=[1,0,0,0,1,1,1,1,0,1,0,0]);var f=Qc(c.c().w(),b.c().w()),f=new O(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var h=Qc(c.c().w(),b),h=
new O(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var i=Qc(c,b.c().w()),i=new O(i.x*e.x,i.y*e.y,i.b*e.b);i.add(d);var j=i,b=Qc(c,b),b=new O(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=h;this.j.add(f.x,f.y,f.b);this.j.add(h.x,h.y,h.b);this.j.add(i.x,i.y,i.b);this.j.add(j.x,j.y,j.b);this.j.add(b.x,b.y,b.b);this.j.add(d.x,d.y,d.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b)};A("X.slice",Qe);function Re(){P.call(this);this._className="shader";this.Lb="";this.Lb="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.yb="";this.yb="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform sampler2D textureSampler;\nuniform float objectOpacity;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   gl_FragColor = texture2D(textureSampler,   vec2(fragmentTexturePos.s,fragmentTexturePos.t));\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
C(Re,P);var Se={Fh:"vertexPosition",Eh:"vertexNormal",Dh:"vertexColor",Gh:"vertexTexturePos"},Te={Hh:"view",rh:"perspective",ih:"center",ph:"objectTransform",Ah:"useObjectColor",nh:"objectColor",sh:"pointSize",oh:"objectOpacity",mh:"normal",Bh:"usePicking",Ch:"useTexture",zh:"textureSampler"};Re.prototype.eh=t("Lb");Re.prototype.cg=t("yb");
Re.prototype.Bf=function(){var a=Object.keys(Te);Object.keys(Se).every(function(a){a=eval("X.shaders.attributes."+a);return-1!=this.Lb.search(a)||-1!=this.yb.search(a)}.bind(this))||g(Error("Could not find all attributes in the shader sources."));a.every(function(a){a=eval("X.shaders.uniforms."+a);return-1!=this.Lb.search(a)||-1!=this.yb.search(a)}.bind(this))||g(Error("Could not find all uniforms in the shader sources."));return o};A("X.shaders",Re);A("X.shaders.attributes",Se);
A("X.shaders.uniforms",Te);A("X.shaders.prototype.vertex",Re.prototype.eh);A("X.shaders.prototype.fragment",Re.prototype.cg);A("X.shaders.prototype.validate",Re.prototype.Bf);D||Pa&&G("1.9.3");var Ue=ba.window;function Ve(a,b,c){ia(a)?c&&(a=ta(a,c)):a&&"function"==typeof a.handleEvent?a=ta(a.handleEvent,a):g(Error("Invalid listener argument"));return 2147483647<b?-1:Ue.setTimeout(a,b||0)};function We(a,b){this.ba=new xe(this);this.Nd(a||q);b&&this.tb(b)}C(We,Sc);v=We.prototype;v.f=q;v.Pf=o;v.me=q;v.M=r;v.Sg=r;v.Ad=-1;v.hg=r;v.Yf=o;v.ub="toggle_display";v.tb=aa("ub");v.e=t("f");v.Nd=function(a){this.M&&g(Error("Can not change this state of the popup while showing."));this.f=a};
v.J=function(a){this.hc&&this.hc.stop();this.Xb&&this.Xb.stop();if(a){if(!this.M&&this.Hd()){this.f||g(Error("Caller must call setElement before trying to show the popup"));this.ja();a=Vd(this.f);this.hg&&Fe(this.ba,a,"keydown",this.vg,o);if(this.Pf)if(Fe(this.ba,a,"mousedown",this.Ve,o),D){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}Fe(this.ba,a,"mousedown",this.Ve,o);Fe(this.ba,a,
"deactivate",this.Ue)}else Fe(this.ba,a,"blur",this.Ue);"toggle_display"==this.ub?(this.f.style.visibility="visible",te(this.f,o)):"move_offscreen"==this.ub&&this.ja();this.M=o;this.hc?(lc(this.hc,"end",this.ff,r,this),this.hc.play()):this.ff()}}else Xe(this)};v.ja=ca;function Xe(a,b){if(!a.M||!a.dispatchEvent({type:"beforehide",target:b}))return r;a.ba&&a.ba.Lc();a.Xb?(lc(a.Xb,"end",ua(a.pe,b),r,a),a.Xb.play()):a.pe(b);return o}
v.pe=function(a){"toggle_display"==this.ub?this.Sg?Ve(this.Ge,0,this):this.Ge():"move_offscreen"==this.ub&&(this.f.style.left="-200px",this.f.style.top="-200px");this.M=r;this.Id(a)};v.Ge=function(){this.f.style.visibility="hidden";te(this.f,r)};v.Hd=function(){return this.dispatchEvent("beforeshow")};v.ff=function(){this.Ad=va();this.dispatchEvent("show")};v.Id=function(a){va();this.dispatchEvent({type:"hide",target:a})};
v.Ve=function(a){a=a.target;!ee(this.f,a)&&(!this.me||ee(this.me,a))&&!(150>va()-this.Ad)&&Xe(this,a)};v.vg=function(a){27==a.keyCode&&Xe(this,a.target)&&(a.preventDefault(),a.stopPropagation())};v.Ue=function(a){if(this.Yf){var b=Vd(this.f);if(D||Oa){if(a=b.activeElement,!a||ee(this.f,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>va()-this.Ad||Xe(this)}};v.s=function(){We.A.s.call(this);this.ba.Z();Nb(this.hc);Nb(this.Xb);delete this.f;delete this.ba};function Ye(a){this.U=a||Td();I.call(this)}C(Ye,I);v=Ye.prototype;v.Rf="goog-buttonset";v.te=q;v.f=q;v.set=function(a,b,c){I.prototype.set.call(this,a,b);c&&(this.te=a);return this};function Ze(a,b,c,d){return a.set(b.key,b.caption,c,d)}v.rb=function(){if(this.f){this.f.innerHTML="";var a=Td(this.f);vb(this,function(b,c){var d=a.Va("button",{name:c},b);c==this.te&&(d.className=this.Rf+"-default");this.f.appendChild(d)},this)}};v.e=t("f");v.Sb=t("U");
var $e={key:"ok",caption:"OK"},af={key:"cancel",caption:"Cancel"},bf={key:"yes",caption:"Yes"},cf={key:"no",caption:"No"},df={key:"save",caption:"Save"},ef={key:"continue",caption:"Continue"};"undefined"!=typeof document&&(Ze(new Ye,$e,o,o),Ze(Ze(new Ye,$e,o),af,r,o),Ze(Ze(new Ye,bf,o),cf,r,o),Ze(Ze(Ze(new Ye,bf),cf,o),af,r,o),Ze(Ze(Ze(new Ye,ef),df),af,o,o));function ff(a){this.Ua=a||gf}function gf(a,b){return""+a<""+b?-1:""+a>""+b?1:0}v=ff.prototype;v.O=q;v.Ua=q;v.ta=q;v.sa=q;v.h=0;
v.add=function(a){if(this.O==q)return this.sa=this.ta=this.O=new hf(a),this.h=1,o;var b=r;jf(this,function(c){var d=q;if(0<this.Ua(c.value,a)){if(d=c.left,c.left==q){var e=new hf(a,c);c.left=e;c==this.ta&&(this.ta=e);b=o;kf(this,c)}}else 0>this.Ua(c.value,a)&&(d=c.right,c.right==q&&(e=new hf(a,c),c.right=e,c==this.sa&&(this.sa=e),b=o,kf(this,c)));return d});b&&(this.h+=1);return b};
v.remove=function(a){var b=q;jf(this,function(c){var d=q;if(0<this.Ua(c.value,a))d=c.left;else if(0>this.Ua(c.value,a))d=c.right;else if(b=c.value,c.left!=q||c.right!=q){var e=q,f;if(c.left!=q){f=lf(this,c.left);if(f!=c.left){if(f.parent.right=f.left)f.left.parent=f.parent;f.left=c.left;f.left.parent=f;e=f.parent}f.parent=c.parent;f.right=c.right;f.right&&(f.right.parent=f);c==this.sa&&(this.sa=f)}else{f=mf(this,c.right);if(f!=c.right){if(f.parent.left=f.right)f.right.parent=f.parent;f.right=c.right;
f.right.parent=f;e=f.parent}f.parent=c.parent;f.left=c.left;f.left&&(f.left.parent=f);c==this.ta&&(this.ta=f)}nf(c)?c.parent.left=f:of(c)?c.parent.right=f:this.O=f;kf(this,e?e:f)}else nf(c)?(c.parent.left=q,c==this.ta&&(this.ta=c.parent),kf(this,c.parent)):of(c)?(c.parent.right=q,c==this.sa&&(this.sa=c.parent),kf(this,c.parent)):this.clear();return d});b&&(this.h=this.O?this.h-1:0);return b};v.clear=function(){this.sa=this.ta=this.O=q;this.h=0};
v.contains=function(a){var b=r;jf(this,function(c){var d=q;0<this.Ua(c.value,a)?d=c.left:0>this.Ua(c.value,a)?d=c.right:b=o;return d});return b};v.$=t("h");v.Vb=function(){return mf(this).value};v.Ub=function(){return lf(this).value};v.aa=function(){var a=[];pf(this,function(b){a.push(b)});return a};
function pf(a,b){if(a.O){var c,d=c=mf(a);for(c=c.left?c.left:c;d!=q;)if(d.left!=q&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=d.right!=q&&d.right!=c?d.right:d.parent;c=e}}}function jf(a,b,c){for(c=c?c:a.O;c&&c!=q;)c=b.call(a,c)}
function kf(a,b){jf(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&qf(this,a.left),rf(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&rf(this,a.right),qf(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function qf(a,b){nf(b)?(b.parent.left=b.right,b.right.parent=b.parent):of(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.O=b.right,a.O.parent=q);var c=b.right;b.right=b.right.left;b.right!=q&&(b.right.parent=b);c.left=b;b.parent=c}function rf(a,b){nf(b)?(b.parent.left=b.left,b.left.parent=b.parent):of(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.O=b.left,a.O.parent=q);var c=b.left;b.left=b.left.right;b.left!=q&&(b.left.parent=b);c.right=b;b.parent=c}
function mf(a,b){if(!b)return a.ta;var c=b;jf(a,function(a){var b=q;a.left&&(b=c=a.left);return b},b);return c}function lf(a,b){if(!b)return a.sa;var c=b;jf(a,function(a){var b=q;a.right&&(b=c=a.right);return b},b);return c}function hf(a,b){this.value=a;this.parent=b?b:q}hf.prototype.left=q;hf.prototype.right=q;hf.prototype.height=1;function of(a){return!!a.parent&&a.parent.right==a}function nf(a){return!!a.parent&&a.parent.left==a};function sf(a,b,c){w(a)||g(Error("Invalid GL Buffer."));w(b)||g(Error("Invalid number of items."));w(c)||g(Error("Invalid item size."));P.call(this);this._className="buffer";this.K=a;this.na=b;this.Ra=c}C(sf,P);sf.prototype.eg=t("K");sf.prototype.ng=t("na");sf.prototype.og=t("Ra");A("X.buffer",sf);A("X.buffer.prototype.glBuffer",sf.prototype.eg);A("X.buffer.prototype.itemCount",sf.prototype.ng);A("X.buffer.prototype.itemSize",sf.prototype.og);function tf(a,b,c,d,e,f,h,i){var j,p=c.offsetParent;if(p){var l="HTML"==p.tagName||"BODY"==p.tagName;if(!l||"static"!=je(p,"position"))j=oe(p),l||(j=kd(j,new U(p.scrollLeft,p.scrollTop)))}p=oe(a);l=re(a);p=new Pd(p.x,p.y,l.width,l.height);(l=ne(a))&&p.Ke(new Pd(l.left,l.top,l.right-l.left,l.bottom-l.top));var l=Td(a),n=Td(c);if(l.t!=n.t){var m=l.t.body,n=n.t.parentWindow||n.t.defaultView,s=new U(0,0),u=Vd(m)?Vd(m).parentWindow||Vd(m).defaultView:window,x=m;do{var B;if(u==n)B=oe(x);else{var F=x;B=
new U;if(1==F.nodeType)if(F.getBoundingClientRect)F=le(F),B.x=F.left,B.y=F.top;else{var W=ge(Td(F)),F=oe(F);B.x=F.x-W.x;B.y=F.y-W.y}else{var W=ia(F.dg),L=F;F.targetTouches?L=F.targetTouches[0]:W&&F.ga.targetTouches&&(L=F.ga.targetTouches[0]);B.x=L.clientX;B.y=L.clientY}}s.x+=B.x;s.y+=B.y}while(u&&u!=n&&(x=u.frameElement)&&(u=u.parent));m=kd(s,oe(m));D&&!fe(l)&&(m=kd(m,ge(l)));p.left+=m.x;p.top+=m.y}a=(b&4&&pe(a)?b^2:b)&-5;b=new U(a&2?p.left+p.width:p.left,a&1?p.top+p.height:p.top);j&&(b=kd(b,j));
e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var J;if(h&&(J=ne(c))&&j)J.top-=j.y,J.right-=j.x,J.bottom-=j.y,J.left-=j.x;return uf(b,c,d,f,J,h,i)}
function uf(a,b,c,d,e,f,h){var a=a.c(),i=0,j=(c&4&&pe(b)?c^2:c)&-5,c=re(b),h=h?h.c():c.c();if(d||0!=j)j&2?a.x-=h.width+(d?d.right:0):d&&(a.x+=d.left),j&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){i=a;d=0;if(65==(f&65)&&(i.x<e.left||i.x>=e.right))f&=-2;if(132==(f&132)&&(i.y<e.top||i.y>=e.bottom))f&=-5;i.x<e.left&&f&1&&(i.x=e.left,d|=1);i.x<e.left&&i.x+h.width>e.right&&f&16&&(h.width=Math.max(h.width-(i.x+h.width-e.right),0),d|=4);i.x+h.width>e.right&&f&1&&(i.x=Math.max(e.right-h.width,
e.left),d|=1);f&2&&(d|=(i.x<e.left?16:0)|(i.x+h.width>e.right?32:0));i.y<e.top&&f&4&&(i.y=e.top,d|=2);i.y>=e.top&&i.y+h.height>e.bottom&&f&32&&(h.height=Math.max(h.height-(i.y+h.height-e.bottom),0),d|=8);i.y+h.height>e.bottom&&f&4&&(i.y=Math.max(e.bottom-h.height,e.top),d|=2);f&8&&(d|=(i.y<e.top?64:0)|(i.y+h.height>e.bottom?128:0));i=d}else i=256;if(i&496)return i}f=a;e=Pa&&(Ia||Ta)&&G("1.9");f instanceof U?(a=f.x,f=f.y):(a=f,f=k);b.style.left=qe(a,e);b.style.top=qe(f,e);md(c,h)||(a=fe(Td(Vd(b))),
D&&(!a||!G("8"))?(c=b.style,a?(D?(a=ue(b,ie(b,"paddingLeft")),e=ue(b,ie(b,"paddingRight")),f=ue(b,ie(b,"paddingTop")),d=ue(b,ie(b,"paddingBottom")),a=new Od(f,e,d,a)):(a=he(b,"paddingLeft"),e=he(b,"paddingRight"),f=he(b,"paddingTop"),d=he(b,"paddingBottom"),a=new Od(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),D?(e=we(b,"borderLeft"),f=we(b,"borderRight"),d=we(b,"borderTop"),b=we(b,"borderBottom"),b=new Od(d,f,b,e)):(e=he(b,"borderLeftWidth"),f=he(b,"borderRightWidth"),d=he(b,"borderTopWidth"),
b=he(b,"borderBottomWidth"),b=new Od(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=h.width-b.left-a.left-a.right-b.right,c.pixelHeight=h.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=h.width,c.pixelHeight=h.height)):(b=b.style,Pa?b.MozBoxSizing="border-box":E?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(h.width,0)+"px",b.height=Math.max(h.height,0)+"px"));return i};function vf(){}vf.prototype.ja=function(){};function wf(a,b){this.element=a;this.qe=b}C(wf,vf);wf.prototype.ja=function(a,b,c){tf(this.element,this.qe,a,b,k,c)};function xf(a,b){this.qd=a instanceof U?a:new U(a,b)}C(xf,vf);xf.prototype.ja=function(a,b,c,d){tf(ke(a),0,a,b,this.qd,c,q,d)};function yf(a,b){this.Bg=4;this.Md=b||k;We.call(this,a)}C(yf,We);yf.prototype.Oc=function(a){this.Md=a||k;this.M&&this.ja()};yf.prototype.ja=function(){if(this.Md){var a=!this.M&&"move_offscreen"!=this.ub,b=this.e();a&&(b.style.visibility="hidden",te(b,o));this.Md.ja(b,this.Bg,this.Lh);a&&te(b,r)}};function zf(a,b,c){this.U=c||(a?Td(Wd(a)):Td());yf.call(this,this.U.Va("div",{style:"position:absolute;display:none;"}));this.rd=new U(1,1);this.Xa=new Ib;a&&Af(this,a);if(b!=q)if(a=this.e(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Vd(a).createTextNode(b))}}C(zf,yf);var Bf=[];v=zf.prototype;v.H=q;v.className="goog-tooltip";
v.sf=500;v.gg=0;v.Sb=t("U");function Af(a,b){b=Wd(b);a.Xa.add(b);K(b,"mouseover",a.De,r,a);K(b,"mouseout",a.Bc,r,a);K(b,"mousemove",a.Ce,r,a);K(b,"focus",a.Be,r,a);K(b,"blur",a.Bc,r,a)}v.detach=function(a){if(a)a=Wd(a),Cf(this,a),this.Xa.remove(a);else{for(var b=this.Xa.aa(),c=0;a=b[c];c++)Cf(this,a);this.Xa.clear()}};function Cf(a,b){mc(b,"mouseover",a.De,r,a);mc(b,"mouseout",a.Bc,r,a);mc(b,"mousemove",a.Ce,r,a);mc(b,"focus",a.Be,r,a);mc(b,"blur",a.Bc,r,a)}
v.Nd=function(a){var b=this.e();b&&ce(b);zf.A.Nd.call(this,a);a&&(b=this.U.t.body,b.insertBefore(a,b.lastChild))};v.Hd=function(){if(!We.prototype.Hd.call(this))return r;if(this.anchor)for(var a,b=0;a=Bf[b];b++)ee(a.e(),this.anchor)||a.J(r);0<=jb(Bf,this)||Bf.push(this);a=this.e();a.className=this.className;Df(this);K(a,"mouseover",this.Fe,r,this);K(a,"mouseout",this.Ee,r,this);Ef(this);return o};
v.Id=function(){ob(Bf,this);for(var a=this.e(),b,c=0;b=Bf[c];c++)b.anchor&&ee(a,b.anchor)&&b.J(r);this.kf&&Ff(this.kf);mc(a,"mouseover",this.Fe,r,this);mc(a,"mouseout",this.Ee,r,this);this.anchor=k;if(0==(this.va?this.M?4:1:this.mb?3:this.M?2:0))this.Nc=r;We.prototype.Id.call(this)};v.Se=function(a,b){this.anchor==a&&this.Xa.contains(this.anchor)&&(this.Nc||!this.Mh?(this.J(r),this.M||(this.anchor=a,this.Oc(b||Gf(this,0)),this.J(o))):this.anchor=k);this.va=k};
v.sg=function(a){this.mb=k;a==this.anchor&&(this.H==q||this.H!=this.e()&&!this.Xa.contains(this.H))&&(!this.ne||!this.ne.H)&&this.J(r)};function Hf(a,b){var c=ge(a.U);a.rd.x=b.clientX+c.x;a.rd.y=b.clientY+c.y}v.De=function(a){var b=If(this,a.target);this.H=b;Df(this);b!=this.anchor&&(this.anchor=b,this.va||(this.va=Ve(ta(this.Se,this,b,k),this.sf)),Jf(this),Hf(this,a))};function If(a,b){try{for(;b&&!a.Xa.contains(b);)b=b.parentNode;return b}catch(c){return q}}v.Ce=function(a){Hf(this,a);this.Nc=o};
v.Be=function(a){this.H=a=If(this,a.target);this.Nc=o;if(this.anchor!=a){this.anchor=a;var b=Gf(this,1);Df(this);this.va||(this.va=Ve(ta(this.Se,this,a,b),this.sf));Jf(this)}};function Gf(a,b){if(0==b){var c=a.rd.c();return new Kf(c)}return new Lf(a.H)}function Jf(a){if(a.anchor)for(var b,c=0;b=Bf[c];c++)ee(b.e(),a.anchor)&&(b.ne=a,a.kf=b)}
v.Bc=function(a){var b=If(this,a.target),c=If(this,a.relatedTarget);b!=c&&(b==this.H&&(this.H=q),Ef(this),this.Nc=r,this.M&&(!a.relatedTarget||!ee(this.e(),a.relatedTarget))?Ff(this):this.anchor=k)};v.Fe=function(){var a=this.e();this.H!=a&&(Df(this),this.H=a)};v.Ee=function(a){var b=this.e();if(this.H==b&&(!a.relatedTarget||!ee(b,a.relatedTarget)))this.H=q,Ff(this)};function Ef(a){a.va&&(Ue.clearTimeout(a.va),a.va=k)}
function Ff(a){if(2==(a.va?a.M?4:1:a.mb?3:a.M?2:0))a.mb=Ve(ta(a.sg,a,a.anchor),a.gg)}function Df(a){a.mb&&(Ue.clearTimeout(a.mb),a.mb=k)}v.s=function(){this.J(r);Ef(this);this.detach();this.e()&&ce(this.e());this.H=q;delete this.U;zf.A.s.call(this)};function Kf(a,b){xf.call(this,a,b)}C(Kf,xf);Kf.prototype.ja=function(a,b,c){b=ke(a);b=ne(b);c=c?new Od(c.top+10,c.right,c.bottom,c.left+10):new Od(10,0,0,10);uf(this.qd,a,4,c,b,9)&496&&uf(this.qd,a,4,c,b,5)};function Lf(a){wf.call(this,a,3)}C(Lf,wf);
Lf.prototype.ja=function(a,b,c){var d=new U(10,0);tf(this.element,this.qe,a,b,d,c,9)&496&&tf(this.element,2,a,1,d,c,5)};function Mf(a){this.f=a;this.Ne=K(this.f,Pa?"DOMMouseScroll":"mousewheel",this)}C(Mf,Sc);
Mf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.ga;if("mousewheel"==a.type){c=1;if(D||E&&(Ja||G("532.0")))c=40;d=E&&Ia&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ea(a.wheelDeltaX)?(b=E&&Ia&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=E&&Ia&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ea(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;z(this.Qe)&&Math.min(Math.max(b,-this.Qe),this.Qe);z(this.Re)&&(c=Math.min(Math.max(c,-this.Re),
this.Re));b=new Nf(d,a,0,c);try{this.dispatchEvent(b)}finally{b.Z()}};Mf.prototype.s=function(){Mf.A.s.call(this);nc(this.Ne);delete this.Ne};function Nf(a,b,c,d){b&&this.ha(b,k);this.type="mousewheel";this.detail=a;this.sd=d}C(Nf,bc);D||E&&G("525");function Pf(a){(!w(a)||!(a instanceof Element))&&g(Error("Could not add interactor to the given element."));P.call(this);this._className="interactor";this.fb=a;this.cd=this.Zd=this.Yd=this.$d=this.Xd=this.ae=q;this.bd=o;this.Jb=this.Db=this.ib=r;this.Yc=new Gc(0,0);this.config={MOUSEWHEEL_ENABLED:o,MOUSECLICKS_ENABLED:o,KEYBOARD_ENABLED:o,HOVERING_ENABLED:o,CONTEXTMENU_ENABLED:r}}C(Pf,P);v=Pf.prototype;
v.ha=function(){this.config.MOUSEWHEEL_ENABLED?(this.cd=new Mf(this.fb),this.ae=K(this.cd,"mousewheel",this.bf.bind(this))):(nc(this.ae),this.cd=q);this.config.MOUSEWHEEL_ENABLED?(this.Xd=K(this.fb,"mousedown",this.Ye.bind(this)),this.$d=K(this.fb,"mouseup",this.af.bind(this))):(nc(this.Xd),nc(this.$d));this.fb.oncontextmenu=this.config.CONTEXTMENU_ENABLED?q:function(){return r};window.onkeydown=this.config.KEYBOARD_ENABLED?this.Jd.bind(this):q;nc(this.Yd);nc(this.Zd);this.Yd=K(this.fb,"mousemove",
this.Ze.bind(this));this.Zd=K(this.fb,"mouseout",this.$e.bind(this))};v.Ye=function(a){0==a.button?this.ib=o:1==a.button?this.Db=o:2==a.button&&(this.Jb=o);Qf(this);a.preventDefault()};v.af=function(a){0==a.button?this.ib=r:1==a.button?this.Db=r:2==a.button&&(this.Jb=r);Qf(this);a.preventDefault()};v.$e=function(a){this.bd=r;this.config.KEYBOARD_ENABLED&&(window.onkeydown=q);this.Jb=this.Db=this.ib=r;Qf(this);this.Yc=new Gc(0,0);a.preventDefault()};v.wg=function(){};
v.Ze=function(a){eval("this.onMouseMove(event)");this.bd=o;this.config.KEYBOARD_ENABLED&&window.onkeydown==q&&(window.onkeydown=this.Jd.bind(this));a.preventDefault();var b=a.shiftKey,c=new Gc(a.offsetX,a.offsetY),a=this.Yc.ka(c);this.Yc=c.c();this.config.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Db||this.ib||this.Jb)&&Qf(this),this.Uc=setTimeout(function(){Qf(this);var a=new Kc;a.tc=c.x;a.uc=c.y;this.dispatchEvent(a);this.Uc=q}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&
(a.y=0);0!=a.Fc()&&(this.ib&&!b?(b=new Hc,b.eb=a,b.Jh=0,window.console.log("fire ev"+this),this.dispatchEvent(b)):this.Db||this.ib&&b?(b=new Fc,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.eb=a,this.dispatchEvent(b)):this.Jb&&(b=new Ic,b.Qa=0<a.y,b.ya=r,this.dispatchEvent(b)))};function Qf(a){a.Uc&&clearTimeout(a.Uc);a.dispatchEvent(new Lc)}v.bf=function(a){Qf(this);a.preventDefault();var b=new Ic;w(a.sd)||(a.sd=0);b.Qa=0>a.sd;b.ya=o;this.dispatchEvent(b)};
v.Jd=function(a){if(this.bd){Qf(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;if(82==f&&!b&&!c&&!d&&!e)a.preventDefault(),a=new Mc,this.dispatchEvent(a);else if(37<=f&&40>=f&&(a.preventDefault(),a=e?new Fc:b?new Ic:new Hc))c=new Gc(0,0),37==f?(c.x=5,b&&(a.Qa=o,a.ya=r)):39==f?(c.x=-5,b&&(a.Qa=r,a.ya=r)):38==f?(c.y=5,b&&(a.Qa=o,a.ya=o)):40==f&&(c.y=-5,b&&(a.Qa=r,a.ya=o)),a.eb=c,this.dispatchEvent(a)}};A("X.interactor",Pf);A("X.interactor.prototype.init",Pf.prototype.ha);
A("X.interactor.prototype.onMouseDown",Pf.prototype.Ye);A("X.interactor.prototype.onMouseUp",Pf.prototype.af);A("X.interactor.prototype.onMouseMove",Pf.prototype.wg);A("X.interactor.prototype.onMouseMovementOutside",Pf.prototype.$e);A("X.interactor.prototype.onMouseMovementInside",Pf.prototype.Ze);A("X.interactor.prototype.onMouseWheel",Pf.prototype.bf);A("X.interactor.prototype.onKey",Pf.prototype.Jd);function Rf(a,b,c,d){w(a)||g(Error("No valid parent element."));(!z(b)||!z(c))&&g(Error("Invalid coordinates."));(!w(d)||!(d instanceof Pf))&&g(Error("Invalid interactor."));zf.call(this);this._className="caption";this.Ha=a;this.tc=b;this.uc=c;this.oc=d;this.oa=q;this.Oa=[];this.Oa=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];lc(d,Dc,this.Yb.bind(this));this.zd()}C(Rf,zf);
Rf.prototype.zd=function(){this.Ha.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Zd("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Oa[0]);a.appendChild(b);b.appendChild(c);this.oa=b;this.Oc(new xf(this.tc,this.uc));this.J(o);Af(this,this.Ha);this.e().classList.add("x-tooltip")};Rf.prototype.Yb=function(){this.J(r);this.oa&&ce(this.oa);this.e()&&ce(this.e());this.oa=q};A("X.caption",Rf);A("X.caption.prototype.kill",Rf.prototype.Yb);function Z(a,b){(!z(a)||!z(b))&&g(Error("A camera needs valid width and height values."));P.call(this);this._className="camera";this.If=45;this.pc=new O(0,0,100);this.nc=new O(0,0,0);this.Ta=new O(0,1,0);var c=Float32Array,d;d=a/b;var e=1*Math.tan(this.If*Math.PI/360),f=-e;d=new Y([[2/(e*d-f*d),0,(e*d+f*d)/(e*d-f*d),0],[0,2/(e-f),(e+f)/(e-f),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]]);this.ce=new c(d.z());this.m=Sf(this,this.pc,this.nc);this.gb=new Float32Array(this.m.z())}C(Z,P);v=Z.prototype;
v.Gd=function(a){(!w(a)||!(a instanceof Pf))&&g(Error("Could not observe the interactor."));K(a,wc,this.cf.bind(this));K(a,xc,this.ef.bind(this));K(a,yc,this.gf.bind(this))};v.gf=function(a){a instanceof Ic||g(Error("Received no valid zoom event."));a.Qa?this.Cf(a.ya):this.Df(a.ya)};v.cf=function(a){a instanceof Fc||g(Error("Received no valid pan event."));this.jf(a.eb)};v.ef=function(a){a instanceof Hc||g(Error("Received no valid rotate event."));this.rotate(a.eb)};v.zg=t("ce");v.view=t("m");
v.position=t("pc");v.Oc=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The position was invalid."));this.pc=new O(a,b,c);this.reset()};v.reset=function(){this.m=Sf(this,this.pc,this.nc);this.gb=new Float32Array(this.m.z())};v.focus=t("nc");v.Jg=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The focus was invalid."));this.nc=new O(a,b,c);this.reset()};v.dh=t("Ta");v.Qg=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The up-vector was invalid."));this.Ta=new O(a,b,c);this.reset()};
v.jf=function(a){a instanceof Gc||g(Error("Invalid distance vector for pan operation."));a=new O(-a.x,a.y,0);a=wd(4).translate(a);this.m=new Y(a.multiply(this.m));this.gb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};
v.rotate=function(a){a instanceof Array&&2==a.length?a=new Gc(a[0],a[1]):a instanceof Gc||g(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=wd(4),d=new O(parseFloat(td(this.m,0,0)),parseFloat(td(this.m,0,1)),parseFloat(td(this.m,0,2))),b=c.rotate(b,new O(parseFloat(td(this.m,1,0)),parseFloat(td(this.m,1,1)),parseFloat(td(this.m,1,2)))),a=c.rotate(a,d);this.m=new Y(this.m.multiply(a.multiply(b)));this.gb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};
v.Cf=function(a){var b=20;w(a)&&!a&&(b=1);a=new O(0,0,b);a=wd(4).translate(a);this.m=new Y(a.multiply(this.m));this.gb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};v.Df=function(a){var b=30;w(a)&&!a&&(b=1);a=new O(0,0,-b);a=wd(4).translate(a);this.m=new Y(a.multiply(this.m));this.gb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};
function Sf(a,b,c){(!(b instanceof O)||!(c instanceof O))&&g(Error("3D vectors required for calculating the view."));var d=wd(4),c=new O(b.x-c.x,b.y-c.y,b.b-c.b),c=c.normalize(),a=a.Ta.c();a.Ob(c)&&(a.b+=1.0E-6);var e=Rc(a,c),a=Rc(c,e),e=e.normalize(),a=a.normalize();V(d,0,0,e.x);V(d,0,1,e.y);V(d,0,2,e.b);V(d,0,3,0);V(d,1,0,a.x);V(d,1,1,a.y);V(d,1,2,a.b);V(d,1,3,0);V(d,2,0,c.x);V(d,2,1,c.y);V(d,2,2,c.b);V(d,2,3,0);V(d,3,0,0);V(d,3,1,0);V(d,3,2,0);V(d,3,3,1);b=b.c();return d.translate(b.w())}
A("X.camera",Z);A("X.camera.prototype.observe",Z.prototype.Gd);A("X.camera.prototype.onZoom",Z.prototype.gf);A("X.camera.prototype.onPan",Z.prototype.cf);A("X.camera.prototype.onRotate",Z.prototype.ef);A("X.camera.prototype.perspective",Z.prototype.zg);A("X.camera.prototype.view",Z.prototype.view);A("X.camera.prototype.position",Z.prototype.position);A("X.camera.prototype.setPosition",Z.prototype.Oc);A("X.camera.prototype.focus",Z.prototype.focus);A("X.camera.prototype.setFocus",Z.prototype.Jg);
A("X.camera.prototype.up",Z.prototype.dh);A("X.camera.prototype.setUp",Z.prototype.Qg);A("X.camera.prototype.pan",Z.prototype.jf);A("X.camera.prototype.rotate",Z.prototype.rotate);A("X.camera.prototype.zoomIn",Z.prototype.Cf);A("X.camera.prototype.zoomOut",Z.prototype.Df);A("X.camera.prototype.observe",Z.prototype.Gd);function $(a){w(a)||g(Error("An ID to a valid container (<div>..) is required."));a=Wd(a);(!(ja(a)&&1==a.nodeType)||0==a.clientWidth||0==a.clientHeight)&&g(Error("Could not find the given container or it has an undefined size."));P.call(this);this._className="renderer";this.cb=a;this.Mb=this.cb.clientWidth;this.hb=this.cb.clientHeight;this.oc=this.da=this.gd=this.a=this.Na=q;this.jb=new ff(Fd);this.Of=[];this.Cb=this.Gb=this.Bb=this.Fb=this.Ab=this.Eb=q;this.o=[0,0,0];this.de=q;this.xa=new I;this.F=
new I;this.Kb=new I;this.dd=new I;this.lc=new I;this.sc=new I;this.jd=new I;this.fa=this.Zc=q;this.$c=r;this.config={PROGRESSBAR_ENABLED:o,PICKING_ENABLED:o,ORDERING_ENABLED:o,STATISTICS_ENABLED:r};window.console.log("XTK Release 2 -- 2/12/12 -- http://www.goXTK.com")}C($,P);v=$.prototype;v.width=t("Mb");v.height=t("hb");v.canvas=function(){w(this.Na)||(this.Na=Zd("canvas"));return this.Na};v.Uf=t("cb");v.Qf=t("da");v.kg=t("oc");
v.ra=function(){w(this.Zc)||(this.Zc=new Kd,K(this.ra(),Bc,this.df.bind(this)));return this.Zc};v.df=function(a){this.fa&&this.fa.Qc(100*a.ke)};v.Xe=function(a){w(a)&&a instanceof Nc&&Tf(this,a.Ga)};v.We=function(a){if(w(a)&&a instanceof Kc){var b=a.tc,c=a.uc;if((a=this.get(this.lf(b,c)))&&a.caption())b=new Rf(this.cb,b+10,c+10,this.oc),a=a.caption(),b.e().innerHTML=a}};v.Dg=function(){this.Cb=this.Gb=this.Bb=this.Fb=this.Ab=this.Eb=q;this.o=[0,0,0]};
function Uf(a){a.config.PROGRESSBAR_ENABLED&&a.fa&&!a.fe&&(a.fa.xe(),a.fe=Ve(function(){this.fe=q;this.fa&&(this.fa.Yb(),this.fa=q);this.rb()}.bind(a),700))}v.of=function(){this.da.reset();this.sb(r,r)};
v.ha=function(){var a=this.canvas();a.width=this.width();a.height=this.height();this.cb.appendChild(a);try{var b=a.getContext("experimental-webgl");b||g(Error())}catch(c){alert("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."),g(Error("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."))}try{if(b.clearColor(0,0,0,0),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.enable(b.DEPTH_TEST),
b.depthFunc(b.LEQUAL),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.config.PICKING_ENABLED){var d=b.createFramebuffer(),e=b.createRenderbuffer(),f=b.createTexture();b.bindTexture(b.TEXTURE_2D,f);b.texImage2D(b.TEXTURE_2D,0,b.RGB,this.width(),this.height(),0,b.RGB,b.UNSIGNED_BYTE,q);b.bindFramebuffer(b.FRAMEBUFFER,d);b.bindRenderbuffer(b.RENDERBUFFER,e);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,this.width(),this.height());b.bindRenderbuffer(b.RENDERBUFFER,q);b.framebufferTexture2D(b.FRAMEBUFFER,
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,f,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,e);b.bindFramebuffer(b.FRAMEBUFFER,q);this.de=d}}catch(h){g(Error("Exception while accessing GL Context!\n"+h))}d=new Pf(a);d.ha();K(d,Ac,this.of.bind(this));K(d,Cc,this.We.bind(this));e=new Z(this.width(),this.height());e.Gd(d);K(e,zc,this.sb.bind(this,r,r));this.Na=a;this.a=b;this.da=e;this.oc=d;this.le(new Re)};
v.le=function(a){(!w(this.Na)||!w(this.a)||!w(this.da))&&g(Error("Renderer was not initialized properly."));(!w(a)||!(a instanceof Re))&&g(Error("Could not add shaders."));a.Bf();var b=this.a.createShader(this.a.FRAGMENT_SHADER),c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.yb);this.a.shaderSource(c,a.Lb);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||g(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));
this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||g(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));a=this.a.createProgram();this.a.attachShader(a,c);this.a.attachShader(a,b);this.a.linkProgram(a);this.a.getProgramParameter(a,this.a.LINK_STATUS)||g(Error("Could not create shader program!\n"+this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(a)));this.a.useProgram(a);this.gd=a;Object.keys(Se).forEach(function(a){a=eval("X.shaders.attributes."+
a);this.xa.set(a,this.a.getAttribLocation(this.gd,a));this.a.enableVertexAttribArray(this.xa.get(a))}.bind(this));Object.keys(Te).forEach(function(a){a=eval("X.shaders.uniforms."+a);this.F.set(a,this.a.getUniformLocation(this.gd,a))}.bind(this))};v.add=function(a){this.Of.push(a);Tf(this,a)};
function Tf(a,b){(!w(a.Na)||!w(a.a)||!w(a.da))&&g(Error("Renderer was not initialized properly."));(!w(b)||!(b instanceof N))&&g(Error("Illegal object."));var c=r;a.get(b.id())&&(c=o);qc(b)||K(b,rc,a.Xe.bind(a));var d=b.id(),e=b.j,f=b.l,h=b.W,i=b.S,j=b.file(),p=b.transform();if(w(i)&&w(i.file())&&i.file().d)c=a.ra(),w(b.S)||g(Error("Internal error during texture loading.")),d=new Image,i=b.S.file().path(),d.src=i,b.S.Wd=d,lc(d,"load",c.qg.bind(c,b)),Ld(c).set(b.id(),r),Nd(c,0.3);else if(w(j)&&j.d)c=
a.ra(),w(b.file())||g(Error("Internal error during file loading.")),b.j.clear(),b.l.clear(),d=b.file().path(),i=d.split(".").pop(),i=i.toUpperCase(),"TRK"==i||"STL"==i||"FSM"==i||"VTK"==i||"NRRD"==i||g(Error("The "+i+" file format is not supported.")),i=new XMLHttpRequest,K(i,"abort",c.Oe.bind(c,i,b)),K(i,"error",c.Oe.bind(c,i,b)),K(i,"load",c.pg.bind(c,i,b)),i.open("GET",d,o),i.overrideMimeType("text/plain; charset=x-user-defined"),i.setRequestHeader("Content-Type","text/plain"),i.send(q),Ld(c).set(b.id(),
r);else{if(b.d&&b.Wb()){for(var j=b.children(),l=j.length,n=0,n=0;n<l;n++)Tf(a,j[n]);b.ua()}if(0!=e.count()){for(j=0;a.$c;)j++;a.$c=o;if(e.d||p.d){l=p.g;j=l.bc(new O(e.Da,e.Ea,e.Fa));l=l.bc(new O(e.Aa,e.Ba,e.Ca));if(a.Eb===q||j.x<a.Eb)a.Eb=j.x;if(a.Ab===q||l.x>a.Ab)a.Ab=l.x;if(a.Fb===q||j.y<a.Fb)a.Fb=j.y;if(a.Bb===q||l.y>a.Bb)a.Bb=l.y;if(a.Gb===q||j.b<a.Gb)a.Gb=j.b;if(a.Cb===q||l.b>a.Cb)a.Cb=l.b;a.o=[(a.Eb+a.Ab)/2,(a.Fb+a.Bb)/2,(a.Gb+a.Cb)/2];p.ua()}c&&e.d&&(p=a.Kb.get(d),w(p)&&a.a.isBuffer(p.K)&&
a.a.deleteBuffer(p.K));p=q;!c||e.d?(p=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,p),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(e.all()),a.a.STATIC_DRAW),p=new sf(p,e.count(),3),e.ua()):p=a.Kb.get(d);Nd(a.ra(),0.3);c&&f.d&&(j=a.Kb.get(d),w(j)&&a.a.isBuffer(j.K)&&a.a.deleteBuffer(j.K));j=q;!c||f.d?(j=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,j),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(f.all()),a.a.STATIC_DRAW),j=new sf(j,f.count(),3),f.ua()):j=a.dd.get(d);Nd(a.ra(),0.3);
c&&h.d&&(f=a.lc.get(d),w(f)&&a.a.isBuffer(f.K)&&a.a.deleteBuffer(f.K));f=q;0<h.length()&&(!c||h.d?(h.length()!=e.length()&&g(Error("Mismatch between points and point colors.")),e=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,e),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h.all()),a.a.STATIC_DRAW),f=new sf(e,h.count(),3),h.ua()):f=a.lc.get(d));Nd(a.ra(),0.3);c&&w(i)&&i.d&&(h=a.sc.get(d),w(h)&&a.a.isBuffer(h.K)&&a.a.deleteBuffer(h.K));h=q;w(i)&&(!c||i.d?(h=b.Sa,w(h)||g(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),
e=a.a.createTexture(),e.yd=i.yd(),a.jd.set(i.id(),e),a.a.pixelStorei(a.a.UNPACK_FLIP_Y_WEBGL,r),a.a.bindTexture(a.a.TEXTURE_2D,e),i.Ib?(a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,i.rc,i.qc,0,a.a.RGBA,a.a.UNSIGNED_BYTE,i.Ib),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_S,a.a.CLAMP_TO_EDGE),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_T,a.a.CLAMP_TO_EDGE)):a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,a.a.RGBA,a.a.UNSIGNED_BYTE,e.yd),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.LINEAR),
a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.LINEAR),a.a.bindTexture(a.a.TEXTURE_2D,q),e=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,e),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h),a.a.STATIC_DRAW),h=new sf(e,h.length,2),i.ua()):h=a.sc.get(d));Nd(a.ra(),0.1);!c&&!a.jb.add(b)&&g(Error("Could not add object to this renderer."));a.Kb.set(d,p);a.dd.set(d,j);a.lc.set(d,f);a.sc.set(d,h);a.$c=r}}}
v.rb=function(){(!this.Na||!this.a||!this.da)&&g(Error("The renderer was not initialized properly."));w(this.ee)||(Md(this.ra())?this.fa?(Uf(this),eval("this.onShowtime()")):this.sb(r,o):(this.config.PROGRESSBAR_ENABLED&&!this.fa&&(this.fa=new Pe(this.cb,0)),this.ee=Ve(function(){this.ee=q;this.rb()}.bind(this),100)))};v.xg=function(){};v.get=function(a){w(a)||g(Error("Invalid object id."));for(var b=this.jb.aa(),c=0,d=b.length,c=0;c<d;c++)if(b[c].id()==a)return b[c];return q};
v.lf=function(a,b){if(this.config.PICKING_ENABLED){this.sb(o,r);var c=new Uint8Array(4);this.a.readPixels(a,this.hb-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);var d=Math.round(10*(c[0]/255)),e=Math.round(10*(c[1]/255)),c=Math.round(10*(c[2]/255));return 100*d+10*e+c}return-1};
v.sb=function(a,b){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.de):this.a.bindFramebuffer(this.a.FRAMEBUFFER,q);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var c=this.da.ce,d=this.da.gb;this.a.uniformMatrix4fv(this.F.get("perspective"),r,c);this.a.uniformMatrix4fv(this.F.get("view"),r,d);c=this.o;this.a.uniform3f(this.F.get("center"),parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]));if(this.config.ORDERING_ENABLED){var e=r,c=this.jb.aa(),d=c.length,f;for(f=0;f<d;++f){var h=
c[f];if(1!=h.opacity()){var e=h.j.kc,e=new O(e[0],e[1],e[2]),h=h.transform().g.bc(e),i=this.da.view().bc(h),j=this.da.focus(),h=j.x-i.x,e=j.y-i.y,i=j.b-i.b;c[f].xc=Math.sqrt(h*h+e*e+i*i);e=o}}if(e){this.jb.clear();for(f=0;f<d;++f)this.jb.add(c[f])}}if(c=!a&&w(b)&&b&&this.config.STATISTICS_ENABLED)var p=0,l=0,n=0,m=0;d=this.jb.aa();f=d.length;for(h=0;h<f;++h)if(e=d[h]){if(e.Vd()){var j=e.id(),s=e.Cd(),i=this.Kb.get(j),u=this.dd.get(j),x=this.lc.get(j),B=this.sc.get(j);this.a.bindBuffer(this.a.ARRAY_BUFFER,
i.K);this.a.vertexAttribPointer(this.xa.get("vertexPosition"),i.Ra,this.a.FLOAT,r,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,u.K);this.a.vertexAttribPointer(this.xa.get("vertexNormal"),u.Ra,this.a.FLOAT,r,0,0);a?this.a.uniform1i(this.F.get("usePicking"),o):this.a.uniform1i(this.F.get("usePicking"),r);w(x)&&!a&&!s?(this.a.uniform1i(this.F.get("useObjectColor"),r),this.a.bindBuffer(this.a.ARRAY_BUFFER,x.K),this.a.vertexAttribPointer(this.xa.get("vertexColor"),x.Ra,this.a.FLOAT,r,0,0)):(u=o,s&&!a&&(window.console.log("magicmode"),
u=r),this.a.uniform1i(this.F.get("useObjectColor"),u),s=e.color(),a&&(999<j&&g(Error("Id out of bounds.")),s=Math.floor(0.01*j),u=Math.floor(0.1*j)-10*s,s=[s/10,u/10,(j-100*s-10*u)/10]),this.a.uniform3f(this.F.get("objectColor"),parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2])),this.a.vertexAttribPointer(this.xa.get("vertexColor"),i.Ra,this.a.FLOAT,r,0,0));this.a.uniform1f(this.F.get("objectOpacity"),parseFloat(e.opacity()));w(e.S)&&w(B)&&!a?(this.a.uniform1i(this.F.get("useTexture"),o),this.a.activeTexture(this.a.TEXTURE0),
this.a.bindTexture(this.a.TEXTURE_2D,this.jd.get(e.S.id())),this.a.uniform1i(this.F.get("textureSampler"),0),this.a.bindBuffer(this.a.ARRAY_BUFFER,B.K),this.a.vertexAttribPointer(this.xa.get("vertexTexturePos"),B.Ra,this.a.FLOAT,r,0,0)):(this.a.uniform1i(this.F.get("useTexture"),r),this.a.vertexAttribPointer(this.xa.get("vertexTexturePos"),i.Ra,this.a.FLOAT,r,0,0));this.a.uniformMatrix4fv(this.F.get("objectTransform"),r,yd(e.transform()));j=1;"POINTS"==e.type()&&(j=e.Ld());this.a.uniform1f(this.F.get("pointSize"),
j);j=-1;e.type()==Cd?(j=this.a.TRIANGLES,c&&(l+=i.na/3)):e.type()==Zc?(this.a.lineWidth(e.lineWidth()),j=this.a.LINES,c&&(n+=i.na/2)):"POINTS"==e.type()?(j=this.a.POINTS,c&&(m+=i.na)):"TRIANGLE_STRIPS"==e.type()?(j=this.a.TRIANGLE_STRIP,c&&(l+=i.na/3)):"POLYGONS"==e.type()&&(j=0==i.na%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,c&&(l+=i.na/3));c&&(p+=i.na);this.a.drawArrays(j,0,i.na)}}else g(Error("Could not retrieve object for (re-)drawing!"));c&&(p="Objects: "+f+" | "+("Vertices: "+p+" | ")+("Triangles: "+
Math.round(l)+" | "),p=p+("Lines: "+n+" | ")+("Points: "+m+" | ")+("Textures: "+this.jd.$()),window.console.log(p))};A("X.renderer",$);A("X.renderer.prototype.width",$.prototype.width);A("X.renderer.prototype.height",$.prototype.height);A("X.renderer.prototype.canvas",$.prototype.canvas);A("X.renderer.prototype.container",$.prototype.Uf);A("X.renderer.prototype.camera",$.prototype.Qf);A("X.renderer.prototype.interactor",$.prototype.kg);A("X.renderer.prototype.loader",$.prototype.ra);
A("X.renderer.prototype.onProgress",$.prototype.df);A("X.renderer.prototype.onModified",$.prototype.Xe);A("X.renderer.prototype.onHover",$.prototype.We);A("X.renderer.prototype.resetBoundingBox",$.prototype.Dg);A("X.renderer.prototype.resetViewAndRender",$.prototype.of);A("X.renderer.prototype.init",$.prototype.ha);A("X.renderer.prototype.addShaders",$.prototype.le);A("X.renderer.prototype.add",$.prototype.add);A("X.renderer.prototype.onShowtime",$.prototype.xg);A("X.renderer.prototype.get",$.prototype.get);
A("X.renderer.prototype.pick",$.prototype.lf);A("X.renderer.prototype.render",$.prototype.rb);function Vf(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new R(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));h.push(new S(c.Za(e.wa(d)),e))}this.i=[];for(var a=a||{},c=new R(a.nd||[0,0,0]),d=a.ia||1,e=a.Pd||16,a=a.Tg||8,f=[],h,i=0;i<e;i++)for(var j=0;j<a;j++)h=[],b(i/e,j/a),0<j&&b((i+1)/e,j/a),j<a-1&&b((i+1)/e,(j+1)/a),b(i/e,(j+1)/a),f.push(new hd(h));return jd(f)}C(Vf,T);A("CSG.sphere",Vf);function Wf(a,b){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));z(b)||g(Error("Invalid radius."));N.call(this);this._className="Sphere";this.o=a;this.fd=b;this.hd=32;this.Mf=16;this.pa()}C(Wf,N);Wf.prototype.pa=function(){Ed(this,new Vf({nd:this.o,ia:this.fd,Pd:this.hd,Tg:this.Mf}))};A("X.sphere",Wf);function Xf(){N.call(this);this._className="volume";this.o=[0,0,0];this.ea=[10,10,10];this.G=[1,1,1];this.Xc=this._indexZ=this.Wc=this._indexY=this.Vc=this._indexX=0;this.ge=new N;this.he=new N;this.ie=new N}C(Xf,N);
Xf.prototype.pa=function(){this.children().length=0;this.children().push(this.ge);this.children().push(this.he);this.children().push(this.ie);for(var a=0,a=0;3>a;a++){for(var b=(this.ea[a]-1)/2,c=b,d=0,d=0;d<this.ea[a];d++){var e=-b*this.G[a]+d*this.G[a],f=[[e,this.o[1],this.o[2]],[this.o[0],e,this.o[2]],[this.o[0],this.o[1],e]],e=this.children()[a].children(),h=0,i=0;0==a?(h=this.ea[2]*this.G[2]-this.G[2],i=this.ea[1]*this.G[1]-this.G[1]):1==a?(h=this.ea[0]*this.G[0]-this.G[0],i=this.ea[2]*this.G[2]-
this.G[2]):2==a&&(h=this.ea[0]*this.G[0]-this.G[0],i=this.ea[1]*this.G[1]-this.G[1]);f=new Qe(f[a],[[1,0,0],[0,1,0],[0,0,1]][a],[[0,1,0],[0,0,-1],[0,1,0]][a],h,i);f.J(d==c);e.push(f)}0==a?this.Vc=this._indexX=c:1==a?this.Wc=this._indexY=c:2==a&&(this.Xc=this._indexZ=c)}this.d=o};
Xf.prototype.ac=function(){for(var a=0,a=0;3>a;a++){var b=0,c=0;0==a?(b=this._indexX,c=this.Vc,this.Vc=this._indexX):1==a?(b=this._indexY,c=this.Wc,this.Wc=this._indexY):2==a&&(b=this._indexZ,c=this.Xc,this.Xc=this._indexZ);this.children()[a].children()[parseInt(c,10)].J(r);this.children()[a].children()[parseInt(b,10)].J(o)}Xf.A.ac.call(this)};Xf.prototype.Wf=t("ea");A("X.volume",Xf);A("X.volume.prototype.dimensions",Xf.prototype.Wf);A("X.volume.prototype.modified",Xf.prototype.ac);function Yf(a){function b(a,b,d){b=2*b*Math.PI;b=j.wa(Math.cos(b)).Za(p.wa(Math.sin(b)));a=c.Za(e.wa(a)).Za(b.wa(f));d=b.wa(1-Math.abs(d)).Za(h.wa(d));return new S(a,d)}this.i=[];for(var a=a||{},c=new R(a.start||[0,-1,0]),d=new R(a.end||[0,1,0]),e=d.nb(c),f=a.ia||1,a=a.Pd||16,h=e.vb(),i=0.5<Math.abs(h.y()),j=(new R(i,!i,0)).wc(h).vb(),p=j.wc(h).vb(),i=new S(c,h.Gc()),d=new S(d,h.vb()),l=[],n=0;n<a;n++){var m=n/a,s=(n+1)/a;l.push(new hd([i,b(0,m,-1),b(0,s,-1)]));l.push(new hd([b(0,s,0),b(0,m,0),b(1,
m,0),b(1,s,0)]));l.push(new hd([d,b(1,s,1),b(1,m,1)]))}return jd(l)}C(Yf,T);A("CSG.cylinder",Yf);function Zf(a,b,c){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid start position."));(!w(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid end position."));z(c)||g(Error("Invalid radius."));N.call(this);this._className="cylinder";this.Nf=a;this.Hf=b;this.fd=c;this.hd=32;this.pa()}C(Zf,N);Zf.prototype.pa=function(){Ed(this,new Yf({start:this.Nf,end:this.Hf,ia:this.fd,Pd:this.hd}))};A("X.cylinder",Zf);function $f(a){this.i=[];var a=a||{},b=new R(a.nd||[0,0,0]),c=!a.ia?[1,1,1]:a.ia.length?a.ia:[a.ia,a.ia,a.ia];return jd([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new hd(a[0].map(function(e){e=new R(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new S(e,new R(a[1]))}))}))}C($f,T);A("CSG.cube",$f);function ag(a,b,c,d){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!z(b)||!z(c)||!z(d))&&g(Error("Invalid radii."));N.call(this);this._className="cube";this.o=a;this.Jf=b;this.Kf=c;this.Lf=d;this.Sa=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];this.pa()}C(ag,N);ag.prototype.pa=function(){Ed(this,new $f({nd:this.o,ia:[this.Jf,this.Kf,this.Lf]}))};A("X.cube",ag);
