/** @license Copyright (c) 2013 The X Toolkit Developers <dev@goXTK.com>, http://goXTK.com, MIT licensed. **/(function() {function k(){return function(){}}function aa(a){return function(){return this[a]}}var n,ba=ba||{},s=this;function ca(){}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"array"==ia(a)}function ja(a){var b=ia(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}function w(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return x.apply(null,arguments)}var oa=Date.now||function(){return+new Date};
function y(a,b){var c=a.split("."),d=s;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function z(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c};function pa(a){eval("X.DEV === undefined")||window.console.time(a)}function qa(a){eval("X.DEV === undefined")||window.console.timeEnd(a)}var ra=window.Zb;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d});y("$",ra);y("Function.prototype.bind",Function.prototype.bind);y("X.io.version","0.0.1");y("X.io.onloading",k());y("X.io.onload",k());y("X.io.onparsing",k());y("X.io.onparse",k());y("X.io.oncomplete",k());function A(){0!=sa&&(this.fc=Error().stack,ta[w(this)]=this)}var sa=0,ta={};A.prototype.Ma=!1;A.prototype.W=function(){if(!this.Ma&&(this.Ma=!0,this.f(),0!=sa)){var a=w(this);delete ta[a]}};A.prototype.f=function(){if(this.ob)for(;this.ob.length;)this.ob.shift()()};var ua="closure_listenable_"+(1E6*Math.random()|0);function Ha(a){return!(!a||!a[ua])}var Ia=0;function Ja(a,b,c,d,e,f){this.r=a;this.qb=b;this.src=c;this.type=d;this.capture=!!e;this.P=f;this.key=++Ia;this.o=this.U=!1};function Ka(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function La(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ma="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ma.length;f++)c=Ma[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var B,Oa,Pa,Qa;function Ra(){return s.navigator?s.navigator.userAgent:null}Qa=Pa=Oa=B=!1;var Sa;if(Sa=Ra()){var Ta=s.navigator;B=0==Sa.indexOf("Opera");Oa=!B&&-1!=Sa.indexOf("MSIE");Pa=!B&&-1!=Sa.indexOf("WebKit");Qa=!B&&!Pa&&"Gecko"==Ta.product}var Ua=B,C=Oa,Va=Qa,D=Pa,Wa=s.navigator,Xa=-1!=(Wa&&Wa.platform||"").indexOf("Mac");function Ya(){var a=s.document;return a?a.documentMode:void 0}var Za;
a:{var $a="",ab;if(Ua&&s.opera)var bb=s.opera.version,$a="function"==typeof bb?bb():bb;else if(Va?ab=/rv\:([^\);]+)(\)|;)/:C?ab=/MSIE\s+([^\);]+)(\)|;)/:D&&(ab=/WebKit\/(\S+)/),ab)var cb=ab.exec(Ra()),$a=cb?cb[1]:"";if(C){var db=Ya();if(db>parseFloat($a)){Za=String(db);break a}}Za=$a}var eb={};
function E(a){var b;if(!(b=eb[a])){b=0;for(var c=String(Za).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var q=m.exec(g)||["","",""],p=l.exec(h)||["","",""];if(0==q[0].length&&0==p[0].length)break;b=((0==q[1].length?0:parseInt(q[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==q[1].length?0:parseInt(q[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==q[2].length)<(0==p[2].length)?-1:(0==q[2].length)>(0==p[2].length)?1:0)||(q[2]<p[2]?-1:q[2]>p[2]?1:0)}while(0==b)}b=eb[a]=0<=b}return b}var fb=s.document,gb=fb&&C?Ya()||("CSS1Compat"==fb.compatMode?parseInt(Za,10):5):void 0;var hb;(hb=!C)||(hb=C&&9<=gb);var ib=hb,jb=C&&!E("9");!D||E("528");Va&&E("1.9b")||C&&E("8")||Ua&&E("9.5")||D&&E("528");Va&&!E("8")||C&&E("9");var F=Array.prototype,kb=F.indexOf?function(a,b,c){return F.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(v(a))return v(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},lb=F.forEach?function(a,b,c){F.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function mb(a){var b;a:{b=nb;for(var c=a.length,d=v(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:v(a)?a.charAt(b):a[b]}function ob(a){if(!u(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function pb(a,b){var c=kb(a,b),d;(d=0<=c)&&F.splice.call(a,c,1);return d};function G(a,b){this.type=a;this.currentTarget=this.target=b}n=G.prototype;n.f=k();n.W=k();n.R=!1;n.defaultPrevented=!1;n.tb=!0;n.preventDefault=function(){this.defaultPrevented=!0;this.tb=!1};function qb(a){qb[" "](a);return a}qb[" "]=ca;function rb(a,b){a&&sb(this,a,b)}z(rb,G);n=rb.prototype;n.target=null;n.relatedTarget=null;n.offsetX=0;n.offsetY=0;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.button=0;n.keyCode=0;n.charCode=0;n.ctrlKey=!1;n.altKey=!1;n.shiftKey=!1;n.metaKey=!1;n.Ub=!1;n.pa=null;
function sb(a,b,c){var d=a.type=b.type;G.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(Va){var e;a:{try{qb(c.nodeName);e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=D||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=D||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||0;
a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.Ub=Xa?b.metaKey:b.ctrlKey;a.state=b.state;a.pa=b;b.defaultPrevented&&a.preventDefault();delete a.R}n.preventDefault=function(){rb.q.preventDefault.call(this);var a=this.pa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,jb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};
n.f=k();var tb={},H={},ub={},vb={};function I(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)I(a,b[f],c,d,e);return null}c=wb(c);return Ha(a)?a.Sa(b,c,d,e):xb(a,b,c,!1,d,e)}
function xb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=H;b in g||(g[b]={d:0,C:0});g=g[b];e in g||(g[e]={d:0,C:0},g.d++);var g=g[e],h=w(a),m;g.C++;if(g[h]){m=g[h];for(var l=0;l<m.length;l++)if(g=m[l],g.r==c&&g.P==f){if(g.o)break;d||(m[l].U=!1);return m[l]}}else m=g[h]=[],g.d++;l=yb();g=new Ja(c,l,a,b,e,f);g.U=d;l.src=a;l.r=g;m.push(g);ub[h]||(ub[h]=[]);ub[h].push(g);a.addEventListener?a.addEventListener(b,l,e):a.attachEvent(b in vb?vb[b]:vb[b]="on"+b,l);return tb[g.key]=g}
function yb(){var a=zb,b=ib?function(c){return a.call(b.src,b.r,c)}:function(c){c=a.call(b.src,b.r,c);if(!c)return c};return b}function Ab(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)Ab(a,b[f],c,d,e);return null}c=wb(c);return Ha(a)?a.Ta(b,c,d,e):xb(a,b,c,!0,d,e)}function Bb(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Bb(a,b[f],c,d,e);else if(c=wb(c),Ha(a))a.ha(b,c,d,e);else if(d=!!d,a=Cb(a,b,d))for(f=0;f<a.length;f++)if(a[f].r==c&&a[f].capture==d&&a[f].P==e){Db(a[f]);break}}
function Db(a){if("number"==typeof a||!a||a.o)return!1;var b=a.src;if(Ha(b))return Eb(b,a);var c=a.type,d=a.qb,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in vb?vb[c]:vb[c]="on"+c,d);b=w(b);ub[b]&&(d=ub[b],pb(d,a),0==d.length&&delete ub[b]);a.o=!0;a.r=null;a.qb=null;a.src=null;a.P=null;if(d=H[c][e][b])d.nb=!0,Fb(c,e,b,d);delete tb[a.key];return!0}
function Fb(a,b,c,d){if(!d.va&&d.nb){for(var e=0,f=0;e<d.length;e++)d[e].o||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.nb=!1;0==f&&(delete H[a][b][c],H[a][b].d--,0==H[a][b].d&&(delete H[a][b],H[a].d--),0==H[a].d&&delete H[a])}}function Cb(a,b,c){var d=H;return b in d&&(d=d[b],c in d&&(d=d[c],a=w(a),d[a]))?d[a]:null}
function Gb(a,b,c,d,e){var f=1;b=w(b);if(a[b]){var g=--a.C,h=a[b];h.va?h.va++:h.va=1;try{for(var m=h.length,l=0;l<m;l++){var q=h[l];q&&!q.o&&(f&=!1!==Hb(q,e))}}finally{a.C=Math.max(g,a.C),h.va--,Fb(c,d,b,h)}}return Boolean(f)}function Hb(a,b){var c=a.r,d=a.P||a.src;a.U&&Db(a);return c.call(d,b)}
function zb(a,b){if(a.o)return!0;var c=a.type,d=H;if(!(c in d))return!0;var d=d[c],e,f;if(!ib){var g;if(!(g=b))a:{g=["window","event"];for(var h=s;e=g.shift();)if(null!=h[e])h=h[e];else{g=null;break a}g=h}e=g;g=!0 in d;h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var m=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(l){m=!0}if(m||void 0==e.returnValue)e.returnValue=!0}}m=new rb;sb(m,e,this);e=!0;try{if(g){for(var q=[],p=m.currentTarget;p;p=p.parentNode)q.push(p);f=d[!0];f.C=
f.d;for(var r=q.length-1;!m.R&&0<=r&&f.C;r--)m.currentTarget=q[r],e&=Gb(f,q[r],c,!0,m);if(h)for(f=d[!1],f.C=f.d,r=0;!m.R&&r<q.length&&f.C;r++)m.currentTarget=q[r],e&=Gb(f,q[r],c,!1,m)}else e=Hb(a,m)}finally{q&&(q.length=0)}return e}c=new rb(b,this);return e=Hb(a,c)}var Ib="__closure_events_fn_"+(1E9*Math.random()>>>0);function wb(a){return"function"==ia(a)?a:a[Ib]||(a[Ib]=function(b){return a.handleEvent(b)})};function J(){A.call(this);this.n={};this.zb=this}z(J,A);J.prototype[ua]=!0;n=J.prototype;n.Va=null;n.addEventListener=function(a,b,c,d){I(this,a,b,c,d)};n.removeEventListener=function(a,b,c,d){Bb(this,a,b,c,d)};
n.dispatchEvent=function(a){var b,c=this.Va;if(c)for(b=[];c;c=c.Va)b.push(c);var c=this.zb,d=a.type||a;if(v(a))a=new G(a,c);else if(a instanceof G)a.target=a.target||c;else{var e=a;a=new G(d,c);Na(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.R&&0<=g;g--)f=a.currentTarget=b[g],e=Jb(f,d,!0,a)&&e;a.R||(f=a.currentTarget=c,e=Jb(f,d,!0,a)&&e,a.R||(e=Jb(f,d,!1,a)&&e));if(b)for(g=0;!a.R&&g<b.length;g++)f=a.currentTarget=b[g],e=Jb(f,d,!1,a)&&e;return e};
n.f=function(){J.q.f.call(this);var a=0,b;for(b in this.n){for(var c=this.n[b],d=0;d<c.length;d++)++a,delete tb[c[d].key],c[d].o=!0;c.length=0}this.Va=null};n.Sa=function(a,b,c,d){return Kb(this,a,b,!1,c,d)};n.Ta=function(a,b,c,d){return Kb(this,a,b,!0,c,d)};function Kb(a,b,c,d,e,f){var g=a.n[b]||(a.n[b]=[]),h=Lb(g,c,e,f);if(-1<h)return a=g[h],d||(a.U=!1),a;a=new Ja(c,null,a,b,!!e,f);a.U=d;g.push(a);return a}
n.ha=function(a,b,c,d){if(!(a in this.n))return!1;a=this.n[a];b=Lb(a,b,c,d);return-1<b?(c=a[b],delete tb[c.key],c.o=!0,1==F.splice.call(a,b,1).length):!1};function Eb(a,b){var c=b.type;if(!(c in a.n))return!1;if(c=pb(a.n[c],b))delete tb[b.key],b.o=!0;return c}
function Jb(a,b,c,d){if(!(b in a.n))return!0;var e=!0;b=a.n[b];var f=b.length;if(0<f){for(var g=Array(f),h=0;h<f;h++)g[h]=b[h];b=g}else b=[];for(f=0;f<b.length;++f)if((g=b[f])&&!g.o&&g.capture==c){var h=g.r,m=g.P||g.src;g.U&&Eb(a,g);e=!1!==h.call(m,d)&&e}return e&&!1!=d.tb}function Lb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.r==b&&f.capture==!!c&&f.P==d)return e}return-1};function Mb(){J.call(this);this.D="io.base";this.L=0;this.Ya=!1}z(Mb,J);Object.defineProperty(Mb.prototype,"classname",{get:aa("D")});Object.defineProperty(Mb.prototype,"id",{get:aa("L")});Object.defineProperty(Mb.prototype,"dirty",{get:aa("Ya"),set:function(a){this.Ya=a}});function Nb(a){G.call(this,a);this.D="event"}z(Nb,G);function Ob(a,b){Nb.call(this,"a");this.yb=b;this.M=a}z(Ob,Nb);function Pb(a){Nb.call(this,"b");this.M=a}z(Pb,Nb);function Qb(){Mb.call(this);this.D="io.parser";this.F=null;this.ja=0;this.wb=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.vb=!0;this.bc=-Infinity;this.ac=Infinity}z(Qb,Mb);Qb.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};
function K(a,b,c){null!=c||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array;d=4;break;case "complex":e=Float64Array;d=8;break;case "double":e=Float64Array,d=8}b=new e(a.F.slice(a.ja,a.ja+=c*d));if(a.wb!=a.vb){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-
1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b};function Rb(a,b,c){var d="number"===typeof b?b:b=0,e="number"===typeof c?c:a.length;c=-1;for(d=e&7;d--;++b)c=c>>>8^L[(c^a[b])&255];for(d=e>>3;d--;b+=8)c=c>>>8^L[(c^a[b])&255],c=c>>>8^L[(c^a[b+1])&255],c=c>>>8^L[(c^a[b+2])&255],c=c>>>8^L[(c^a[b+3])&255],c=c>>>8^L[(c^a[b+4])&255],c=c>>>8^L[(c^a[b+5])&255],c=c>>>8^L[(c^a[b+6])&255],c=c>>>8^L[(c^a[b+7])&255];return(c^4294967295)>>>0}
var L=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Sb(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,m,l,q,p,r;for(p=0;p<b;++p)a[p]>c&&(c=a[p]),a[p]<d&&(d=a[p]);e=1<<c;f=new Uint32Array(e);g=1;h=0;for(m=2;g<=c;){for(p=0;p<b;++p)if(a[p]===g){l=0;q=h;for(r=0;r<g;++r)l=l<<1|q&1,q>>=1;for(r=l;r<e;r+=m)f[r]=g<<16|p;++h}++g;h<<=1;m<<=1}return[f,c,d]};function Tb(a,b){this.Ea=[];this.Fa=32768;this.m=this.da=this.h=this.Wa=0;this.input=new Uint8Array(a);this.$a=!1;this.Ga=Ub;this.sb=!1;if(b||!(b={}))b.index&&(this.h=b.index),b.bufferSize&&(this.Fa=b.bufferSize),b.bufferType&&(this.Ga=b.bufferType),b.resize&&(this.sb=b.resize);switch(this.Ga){case Vb:this.c=32768;this.j=new Uint8Array(32768+this.Fa+258);break;case Ub:this.c=0;this.j=new Uint8Array(this.Fa);this.O=this.Ib;this.cb=this.Cb;this.Ja=this.Fb;break;default:throw Error("invalid inflate mode");
}}var Vb=0,Ub=1;
Tb.prototype.Ka=function(){for(;!this.$a;){var a=M(this,3);a&1&&(this.$a=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.h,c=this.j,d=this.c,e=void 0,f=void 0,g=void 0,h=c.length,e=void 0;this.m=this.da=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");f=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");f|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");g=e;e=a[b++];
if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");g|=e<<8;if(f===~g)throw Error("invalid uncompressed block header: length verify");if(b+f>a.length)throw Error("input buffer is broken");switch(this.Ga){case Vb:for(;d+f>c.length;)e=h-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.c=d,c=this.O(),d=this.c;break;case Ub:for(;d+f>c.length;)c=this.O({fb:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+f),d);d+=f;this.h=b+=f;this.c=d;this.j=c;
break;case 1:this.Ja(Wb,Xb);break;case 2:Yb(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.cb()};
var $b=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ac=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),bc=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),cc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),dc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ec=new Uint8Array(288),
N,fc;N=0;for(fc=ec.length;N<fc;++N)ec[N]=143>=N?8:255>=N?9:279>=N?7:8;var Wb=Sb(ec),gc=new Uint8Array(30),hc,ic;hc=0;for(ic=gc.length;hc<ic;++hc)gc[hc]=5;var Xb=Sb(gc);function M(a,b){for(var c=a.da,d=a.m,e=a.input,f=a.h,g;d<b;){g=e[f++];if(void 0===g)throw Error("input buffer is broken");c|=g<<d;d+=8}g=c&(1<<b)-1;a.da=c>>>b;a.m=d-b;a.h=f;return g}
function jc(a,b){for(var c=a.da,d=a.m,e=a.input,f=a.h,g=b[0],h=b[1],m;d<h;){m=e[f++];if(void 0===m)break;c|=m<<d;d+=8}e=g[c&(1<<h)-1];g=e>>>16;a.da=c>>g;a.m=d-g;a.h=f;return e&65535}
function Yb(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=jc(this,b),d){case 16:for(d=3+M(this,2);d--;)c[f++]=e;break;case 17:for(d=3+M(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+M(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=M(a,5)+257,d=M(a,5)+1,e=M(a,4)+4,f=new Uint8Array($b.length),g;for(g=0;g<e;++g)f[$b[g]]=M(a,3);e=Sb(f);f=new Uint8Array(c);g=new Uint8Array(d);a.Ja(Sb(b.call(a,c,e,f)),Sb(b.call(a,d,e,g)))}n=Tb.prototype;
n.Ja=function(a,b){var c=this.j,d=this.c;this.eb=a;for(var e=c.length-258,f,g,h;256!==(f=jc(this,a));)if(256>f)d>=e&&(this.c=d,c=this.O(),d=this.c),c[d++]=f;else for(f-=257,h=ac[f],0<bc[f]&&(h+=M(this,bc[f])),f=jc(this,b),g=cc[f],0<dc[f]&&(g+=M(this,dc[f])),d>=e&&(this.c=d,c=this.O(),d=this.c);h--;)c[d]=c[d++-g];for(;8<=this.m;)this.m-=8,this.h--;this.c=d};
n.Fb=function(a,b){var c=this.j,d=this.c;this.eb=a;for(var e=c.length,f,g,h;256!==(f=jc(this,a));)if(256>f)d>=e&&(c=this.O(),e=c.length),c[d++]=f;else for(f-=257,h=ac[f],0<bc[f]&&(h+=M(this,bc[f])),f=jc(this,b),g=cc[f],0<dc[f]&&(g+=M(this,dc[f])),d+h>e&&(c=this.O(),e=c.length);h--;)c[d]=c[d++-g];for(;8<=this.m;)this.m-=8,this.h--;this.c=d};
n.O=function(){var a=new Uint8Array(this.c-32768),b=this.c-32768,c=this.j;a.set(c.subarray(32768,a.length));this.Ea.push(a);this.Wa+=a.length;c.set(c.subarray(b,b+32768));this.c=32768;return c};n.Ib=function(a){var b=this.input.length/this.h+1|0,c=this.input,d=this.j;a&&("number"===typeof a.fb&&(b=a.fb),"number"===typeof a.Ab&&(b+=a.Ab));2>b?(a=(c.length-this.h)/this.eb[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.j=a};
n.cb=function(){var a=0,b=this.j,c=this.Ea,d,e=new Uint8Array(this.Wa+(this.c-32768)),f,g,h,m;if(0===c.length)return this.j.subarray(32768,this.c);f=0;for(g=c.length;f<g;++f)for(d=c[f],h=0,m=d.length;h<m;++h)e[a++]=d[h];f=32768;for(g=this.c;f<g;++f)e[a++]=b[f];this.Ea=[];return this.buffer=e};n.Cb=function(){var a,b=this.c;this.sb?(a=new Uint8Array(b),a.set(this.j.subarray(0,b))):a=this.j.subarray(0,b);return this.buffer=a};new Uint8Array(256);var kc;for(kc=0;256>kc;++kc)for(var lc=kc,mc=7,lc=lc>>>1;lc;lc>>>=1)--mc;var nc=[],O;for(O=0;288>O;O++)switch(!0){case 143>=O:nc.push([O+48,8]);break;case 255>=O:nc.push([O-144+400,9]);break;case 279>=O:nc.push([O-256+0,7]);break;case 287>=O:nc.push([O-280+192,8]);break;default:throw"invalid literal: "+O;}
var oc=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(oc);function pc(){};function qc(a){this.input=a;this.h=0;this.lb=[];this.Gb=!1}
qc.prototype.Ka=function(){for(var a=this.input.length;this.h<a;){var b=new pc,c=void 0,d=void 0,e=void 0,f=c=e=void 0,g=void 0,c=c=void 0,h=this.input,d=this.h;b.gb=h[d++];b.hb=h[d++];if(31!==b.gb||139!==b.hb)throw Error("invalid file signature:"+b.gb+","+b.hb);b.ab=h[d++];switch(b.ab){case 8:break;default:throw Error("unknown compression method: "+b.ab);}b.qa=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.hc=new Date(1E3*c);b.jc=h[d++];b.ic=h[d++];0<(b.qa&4)&&(b.Yb=h[d++]|h[d++]<<8,d+=b.Yb);
if(0<(b.qa&8)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.name=g.join("")}if(0<(b.qa&16)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.dc=g.join("")}if(0<(b.qa&2)&&(b.Eb=Rb(h,0,d)&65535,b.Eb!==(h[d++]|h[d++]<<8)))throw Error("invalid header crc16");c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new Tb(h,{index:d,bufferSize:e});b.data=e=d.Ka();d=d.h;b.ec=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;if(Rb(e,void 0,void 0)!==
c)throw Error("invalid CRC-32 checksum: 0x"+Rb(e,void 0,void 0).toString(16)+" / 0x"+c.toString(16));b.gc=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.lb.push(b);this.h=d}this.Gb=!0;a=this.lb;b=e=d=0;for(h=a.length;b<h;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<h;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function R(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}R.prototype.BYTES_PER_ELEMENT=8;R.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};R.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{R.BYTES_PER_ELEMENT=8}catch(rc){}R.prototype.BYTES_PER_ELEMENT=R.prototype.BYTES_PER_ELEMENT;R.prototype.set=R.prototype.set;R.prototype.toString=R.prototype.toString;y("Float64Array",R)};function S(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}S.prototype.BYTES_PER_ELEMENT=4;S.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};S.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(S.BYTES_PER_ELEMENT=4,S.prototype.BYTES_PER_ELEMENT=S.prototype.BYTES_PER_ELEMENT,S.prototype.set=S.prototype.set,S.prototype.toString=S.prototype.toString,y("Float32Array",S));function T(a,b,c,d,e,f){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function U(){Qb.call(this);this.D="io.parserNII"}z(U,Qb);
U.prototype.parse=function(a){pa(this.D+".parse");var b=a.k[0].F,c=-1,c="undefined"==typeof DataView?(new Int32Array(b,0,1))[0]:(new DataView(b,0)).getInt32(0,!0);348!=c&&(b=(new qc(new Uint8Array(b))).Ka(),b=b.buffer);this.F=b;this.dispatchEvent(new Ob(a,20));b={sizeof_hdr:K(this,"uint"),data_type:K(this,"uchar",10),db_name:K(this,"uchar",18),extents:K(this,"uint"),session_error:K(this,"ushort"),regular:K(this,"uchar"),dim_info:K(this,"uchar"),dim:K(this,"ushort",8),intent_p1:K(this,"float"),intent_p2:K(this,
"float"),intent_p3:K(this,"float"),intent_code:K(this,"ushort"),datatype:K(this,"ushort"),bitpix:K(this,"ushort"),slice_start:K(this,"ushort"),pixdim:K(this,"float",8),vox_offset:K(this,"float"),scl_slope:K(this,"float"),scl_inter:K(this,"float"),slice_end:K(this,"ushort"),slice_code:K(this,"uchar"),xyzt_units:K(this,"uchar"),cal_max:K(this,"float"),cal_min:K(this,"float"),slice_duration:K(this,"float"),toffset:K(this,"float"),glmax:K(this,"uint",1),glmin:K(this,"uint",1),descrip:K(this,"uchar",80),
aux_file:K(this,"uchar",24),qform_code:K(this,"ushort"),sform_code:K(this,"ushort"),quatern_b:K(this,"float"),quatern_c:K(this,"float"),quatern_d:K(this,"float"),qoffset_x:K(this,"float"),qoffset_y:K(this,"float"),qoffset_z:K(this,"float"),srow_x:K(this,"float",4),srow_y:K(this,"float",4),srow_z:K(this,"float",4),intent_name:K(this,"uchar",16),magic:K(this,"uchar",4)};this.dispatchEvent(new Ob(a,20));c=null;this.ja=parseInt(b.vox_offset,10);c=b.dim[1]*b.dim[2]*b.dim[3];switch(b.datatype){case 2:c=
K(this,"uchar",c);break;case 4:c=K(this,"sshort",c);break;case 8:c=K(this,"sint",c);break;case 16:c=K(this,"float",c);break;case 32:c=K(this,"complex",c);break;case 64:c=K(this,"double",c);break;case 256:c=K(this,"schar",c);break;case 512:c=K(this,"ushort",c);break;case 768:c=K(this,"uint",c);break;default:throw Error("Unsupported NII data type: "+b.datatype);}for(var d=c.length,e=Infinity,f=-Infinity,g=c.length,h=0,h=0;h<g;h++)var m=c[h],e=Math.min(e,m),f=Math.max(f,m);e=f;f=new Uint8Array(d);for(g=
0;g<d;g++)f[g]=255*(c[g]/e);c=f;this.dispatchEvent(new Ob(a,20));var l=new Float32Array(16);l[0]=l[5]=l[10]=l[15]=1;d=[];if(0==b.qform_code)T(l,0,b.pixdim[1],0,0,0),T(l,0,0,b.pixdim[2],0,0),T(l,0,0,0,b.pixdim[3],0),d.push(b.pixdim[1]),d.push(0),d.push(0),d.push(0),d.push(b.pixdim[2]),d.push(0),d.push(0),d.push(0),d.push(b.pixdim[3]);else if(0<b.qform_code){var e=0,f=b.quatern_b,g=b.quatern_c,h=b.quatern_d,q=m=1,p=1,r=b.qoffset_x,P=b.qoffset_y,Q=b.qoffset_z,e=1-(f*f+g*g+h*h);1E-7>e?(e=1/Math.sqrt(f*
f+g*g+h*h),f*=e,g*=e,h*=e,e=0):e=Math.sqrt(e);0<b.pixdim[1]&&(m=b.pixdim[1]);0<b.pixdim[2]&&(q=b.pixdim[2]);0<b.pixdim[2]&&(p=b.pixdim[3]);0>b.pixdim[0]&&(p=-p);T(l,0,(e*e+f*f-g*g-h*h)*m,2*(f*g-e*h)*q,2*(f*h+e*g)*p,r);T(l,1,2*(f*g+e*h)*m,(e*e+g*g-f*f-h*h)*q,2*(g*h-e*f)*p,P);T(l,2,2*(f*h-e*g)*m,2*(g*h+e*f)*q,(e*e+h*h-g*g-f*f)*p,Q);d.push((e*e+f*f-g*g-h*h)*m);d.push(2*(f*g+e*h)*m);d.push(2*(f*h+e*g)*p);d.push(2*(f*g-e*h)*q);d.push((e*e+g*g-f*f-h*h)*q);d.push(2*(g*h-e*f)*p);d.push(2*(f*h+e*g)*p);d.push(2*
(g*h+e*f)*q);d.push((e*e+h*h-g*g-f*f)*p)}else 0<b.sform_code&&(d=b.srow_x,e=b.srow_y,f=b.srow_z,T(l,0,d[0],d[1],d[2],d[3]),T(l,0,e[0],e[1],e[2],e[3]),T(l,0,f[0],f[1],f[2],f[3]));var d=new Float32Array(16),e=l[0],f=l[1],g=l[2],h=l[3],m=l[4],q=l[5],p=l[6],r=l[7],P=l[8],Q=l[9],da=l[10],ea=l[11],fa=l[12],ga=l[13],ha=l[14],l=l[15],va=e*q-f*m,wa=e*p-g*m,xa=e*r-h*m,ya=f*p-g*q,za=f*r-h*q,Aa=g*r-h*p,Ba=P*ga-Q*fa,Ca=P*ha-da*fa,Da=P*l-ea*fa,Ea=Q*ha-da*ga,Fa=Q*l-ea*ga,Ga=da*l-ea*ha,t=va*Ga-wa*Fa+xa*Ea+ya*Da-
za*Ca+Aa*Ba;0!=t&&(t=1/t,d[0]=(q*Ga-p*Fa+r*Ea)*t,d[1]=(-f*Ga+g*Fa-h*Ea)*t,d[2]=(ga*Aa-ha*za+l*ya)*t,d[3]=(-Q*Aa+da*za-ea*ya)*t,d[4]=(-m*Ga+p*Da-r*Ca)*t,d[5]=(e*Ga-g*Da+h*Ca)*t,d[6]=(-fa*Aa+ha*xa-l*wa)*t,d[7]=(P*Aa-da*xa+ea*wa)*t,d[8]=(m*Fa-q*Da+r*Ba)*t,d[9]=(-e*Fa+f*Da-h*Ba)*t,d[10]=(fa*za-ga*xa+l*va)*t,d[11]=(-P*za+Q*xa-ea*va)*t,d[12]=(-m*Ea+q*Ca-p*Ba)*t,d[13]=(e*Ea-f*Ca+g*Ba)*t,d[14]=(-fa*ya+ga*wa-ha*va)*t,d[15]=(P*ya-Q*wa+da*va)*t);d=b.dim.subarray(1,4);pa(this.D+".reslice");e=d[0]*d[1];f=Array(d[2]);
for(g=g=0;g<d[2];g++)f[g]=c.buffer.slice(g*e,(g+1)*e);qa(this.D+".reslice");this.dispatchEvent(new Ob(a,40));a.F={header:b,data:{image:f}};qa(this.D+".parse");this.dispatchEvent(new Pb(a))};y("X.io.parserNII",U);y("X.io.parserNII.prototype.parse",U.prototype.parse);function sc(a,b){this.M=a;this.cc=b;this.i=this.H=this.l=0;this.F=null};var tc="StopIteration"in s?s.StopIteration:Error("StopIteration");function uc(){}uc.prototype.next=function(){throw tc;};uc.prototype.t=function(){return this};function vc(a){if(a instanceof uc)return a;if("function"==typeof a.t)return a.t(!1);if(ja(a)){var b=0,c=new uc;c.next=function(){for(;;){if(b>=a.length)throw tc;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function wc(a,b){if(ja(a))try{lb(a,b,void 0)}catch(c){if(c!==tc)throw c;}else{a=vc(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==tc)throw d;}}};function V(a,b){this.e={};this.b=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Da(a)}n=V.prototype;n.d=0;n.ia=0;n.g=aa("d");n.w=function(){xc(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.e[this.b[b]]);return a};n.X=function(){xc(this);return this.b.concat()};n.J=function(){return 0==this.d};n.clear=function(){this.e={};this.ia=this.d=this.b.length=0};
n.remove=function(a){return Object.prototype.hasOwnProperty.call(this.e,a)?(delete this.e[a],this.d--,this.ia++,this.b.length>2*this.d&&xc(this),!0):!1};function xc(a){if(a.d!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Object.prototype.hasOwnProperty.call(a.e,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.d!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Object.prototype.hasOwnProperty.call(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}
n.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.e,a)?this.e[a]:b};n.set=function(a,b){Object.prototype.hasOwnProperty.call(this.e,a)||(this.d++,this.b.push(a),this.ia++);this.e[a]=b};n.Da=function(a){var b;a instanceof V?(b=a.X(),a=a.w()):(b=La(a),a=Ka(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};n.na=function(){return new V(this)};
n.t=function(a){xc(this);var b=0,c=this.b,d=this.e,e=this.ia,f=this,g=new uc;g.next=function(){for(;;){if(e!=f.ia)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw tc;var g=c[b++];return a?g:d[g]}};return g};function yc(a,b,c){this.L=a;this.$b=b;this.xb=c;this.l=0;this.k=[];this.F=null;this.u=this.H=this.i=0};function zc(a){A.call(this);this.Oa=a;this.b={}}z(zc,A);var Ac=[];n=zc.prototype;n.Sa=function(a,b,c,d,e){u(b)||(Ac[0]=b,b=Ac);for(var f=0;f<b.length;f++){var g=I(a,b[f],c||this,d||!1,e||this.Oa||this);this.b[g.key]=g}return this};n.Ta=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.Ta(a,b[f],c,d,e);else a=Ab(a,b,c||this,d,e||this.Oa||this),this.b[a.key]=a;return this};
n.ha=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.ha(a,b[f],c,d,e);else{a:if(e=e||this.Oa||this,d=!!d,c=wb(c||this),Ha(a))a=a.n[b],b=-1,a&&(b=Lb(a,c,d,e)),e=-1<b?a[b]:null;else{if(a=Cb(a,b,d))for(b=0;b<a.length;b++)if(!a[b].o&&a[b].r==c&&a[b].capture==d&&a[b].P==e){e=a[b];break a}e=null}e&&(Db(e),delete this.b[e.key])}return this};n.rb=function(){var a=this.b,b=Db,c;for(c in a)b.call(void 0,a[c],c,a);this.b={}};n.f=function(){zc.q.f.call(this);this.rb()};
n.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Bc(a){if("function"==typeof a.w)return a.w();if(v(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ka(a)}function Cc(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ja(a)||v(a))lb(a,b,c);else{var d;if("function"==typeof a.X)d=a.X();else if("function"!=typeof a.w)if(ja(a)||v(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=La(a);else d=void 0;for(var e=Bc(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};var Dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),Ec=D;function Fc(a,b){if(Ec){Ec=!1;var c=s.location;if(c){var d=c.href;if(d&&(d=(d=Fc(3,d))&&decodeURIComponent(d))&&d!=c.hostname)throw Ec=!0,Error();}}return b.match(Dc)[a]||null};function Gc(){}Gc.prototype.ma=null;var Hc;function Ic(){}z(Ic,Gc);function Jc(a){return(a=Kc(a))?new ActiveXObject(a):new XMLHttpRequest}function Lc(a){var b={};Kc(a)&&(b[0]=!0,b[1]=!0);return b}
function Kc(a){if(!a.ib&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.ib=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.ib}Hc=new Ic;function Mc(a){this.e=new V;a&&this.Da(a)}function Nc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+w(a):b.substr(0,1)+a}n=Mc.prototype;n.g=function(){return this.e.g()};n.add=function(a){this.e.set(Nc(a),a)};n.Da=function(a){a=Bc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};n.rb=function(a){a=Bc(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};n.remove=function(a){return this.e.remove(Nc(a))};n.clear=function(){this.e.clear()};n.J=function(){return this.e.J()};n.w=function(){return this.e.w()};
n.na=function(){return new Mc(this)};n.t=function(){return this.e.t(!1)};function Oc(){};function Pc(a){J.call(this);this.headers=new V;this.ba=a||null;this.I=!1;this.Ba=this.a=null;this.kb=this.ua="";this.Y=0;this.fa="";this.Q=this.Qa=this.ta=this.Na=!1;this.K=0;this.T=null;this.Z=Qc;this.Xb=!1}z(Pc,J);var Qc="",Rc=/^https?$/i,Sc=["POST","PUT"];n=Pc.prototype;n.ub=function(a){this.K=Math.max(0,a)};
n.send=function(a,b,c,d){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.ua+"; newUri="+a);b=b?b.toUpperCase():"GET";this.ua=a;this.fa="";this.Y=0;this.kb=b;this.Na=!1;this.I=!0;this.a=this.ba?Jc(this.ba):Jc(Hc);this.Ba=this.ba?this.ba.ma||(this.ba.ma=Lc(this.ba)):Hc.ma||(Hc.ma=Lc(Hc));this.a.onreadystatechange=x(this.pb,this);try{Oc(W(this,"Opening Xhr")),this.Qa=!0,this.a.open(b,a,!0),this.Qa=!1}catch(e){Oc(W(this,"Error opening Xhr: "+e.message));Tc(this,e);
return}a=c||"";var f=this.headers.na();d&&Cc(d,function(a,b){f.set(b,a)});d=mb(f.X());c=s.FormData&&a instanceof s.FormData;!(0<=kb(Sc,b))||(d||c)||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Cc(f,function(a,b){this.a.setRequestHeader(b,a)},this);this.Z&&(this.a.responseType=this.Z);"withCredentials"in this.a&&(this.a.withCredentials=this.Xb);try{this.T&&(s.clearTimeout(this.T),this.T=null),0<this.K&&(Oc(W(this,"Will abort after "+this.K+"ms if incomplete")),this.T=s.setTimeout(x(this.Vb,
this),this.K)),Oc(W(this,"Sending request")),this.ta=!0,this.a.send(a),this.ta=!1}catch(g){Oc(W(this,"Send error: "+g.message)),Tc(this,g)}};function nb(a){return"content-type"==a.toLowerCase()}n.Vb=function(){"undefined"!=typeof ba&&this.a&&(this.fa="Timed out after "+this.K+"ms, aborting",this.Y=8,W(this,this.fa),this.dispatchEvent("timeout"),this.abort(8))};function Tc(a,b){a.I=!1;a.a&&(a.Q=!0,a.a.abort(),a.Q=!1);a.fa=b;a.Y=5;Uc(a);Vc(a)}
function Uc(a){a.Na||(a.Na=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}n.abort=function(a){this.a&&this.I&&(W(this,"Aborting"),this.I=!1,this.Q=!0,this.a.abort(),this.Q=!1,this.Y=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Vc(this))};n.f=function(){this.a&&(this.I&&(this.I=!1,this.Q=!0,this.a.abort(),this.Q=!1),Vc(this,!0));Pc.q.f.call(this)};n.pb=function(){this.Qa||this.ta||this.Q?Wc(this):this.Mb()};n.Mb=function(){Wc(this)};
function Wc(a){if(a.I&&"undefined"!=typeof ba)if(a.Ba[1]&&4==Xc(a)&&2==Yc(a))W(a,"Local request error detected and ignored");else if(a.ta&&4==Xc(a))s.setTimeout(x(a.pb,a),0);else if(a.dispatchEvent("readystatechange"),4==Xc(a)){W(a,"Request complete");a.I=!1;try{if(Zc(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Y=6;var b;try{b=2<Xc(a)?a.a.statusText:""}catch(c){b=""}a.fa=b+" ["+Yc(a)+"]";Uc(a)}}finally{Vc(a)}}}
function Vc(a,b){if(a.a){var c=a.a,d=a.Ba[0]?ca:null;a.a=null;a.Ba=null;a.T&&(s.clearTimeout(a.T),a.T=null);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function Zc(a){var b=Yc(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=Fc(1,String(a.ua)),!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Rc.test(a?a.toLowerCase():"");c=b}return c}
function Xc(a){return a.a?a.a.readyState:0}function Yc(a){try{return 2<Xc(a)?a.a.status:-1}catch(b){return-1}}function $c(a){try{if(!a.a)return null;if("response"in a.a)return a.a.response;switch(a.Z){case Qc:case "text":return a.a.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.a)return a.a.mozResponseArrayBuffer}return null}catch(b){return null}}function W(a,b){return b+" ["+a.kb+" "+a.ua+" "+Yc(a)+"]"};function ad(){this.N=[]}n=ad.prototype;n.A=0;n.S=0;n.oa=function(a){this.N[this.S++]=a};n.V=function(){if(this.A!=this.S){var a=this.N[this.A];delete this.N[this.A];this.A++;return a}};n.g=function(){return this.S-this.A};n.J=function(){return 0==this.S-this.A};n.clear=function(){this.S=this.A=this.N.length=0};n.remove=function(a){a=kb(this.N,a);if(0>a)return!1;a==this.A?this.V():(F.splice.call(this.N,a,1),this.S--);return!0};n.w=function(){return this.N.slice(this.A,this.S)};function bd(a,b){A.call(this);this.mb=a||0;this.wa=b||10;if(this.mb>this.wa)throw Error(cd);this.v=new ad;this.B=new Mc;this.La=0;this.Ra=null;this.ka()}z(bd,A);var cd="[goog.structs.Pool] Min can not be greater than max";n=bd.prototype;n.ra=function(){var a=oa();if(!(null!=this.Ra&&a-this.Ra<this.La)){for(var b;0<this.v.g()&&(b=this.v.V(),!this.Ua(b));)this.ka();!b&&this.g()<this.wa&&(b=this.Ia());b&&(this.Ra=a,this.B.add(b));return b}};
n.ca=function(a){this.B.remove(a);this.Ua(a)&&this.g()<this.wa?this.v.oa(a):dd(a)};n.ka=function(){for(var a=this.v;this.g()<this.mb;)a.oa(this.Ia());for(;this.g()>this.wa&&0<this.v.g();)dd(a.V())};n.Ia=function(){return{}};function dd(a){if("function"==typeof a.W)a.W();else for(var b in a)a[b]=null}n.Ua=function(a){return"function"==typeof a.Bb?a.Bb():!0};n.g=function(){return this.v.g()+this.B.g()};n.J=function(){return this.v.J()&&this.B.J()};
n.f=function(){bd.q.f.call(this);if(0<this.B.g())throw Error("[goog.structs.Pool] Objects not released");delete this.B;for(var a=this.v;!a.J();)dd(a.V());delete this.v};function ed(a,b){this.jb=a;this.Xa=b}ed.prototype.getKey=aa("jb");ed.prototype.na=function(){return new ed(this.jb,this.Xa)};function fd(a){this.s=[];if(a)a:{var b,c;if(a instanceof fd){if(b=a.X(),c=a.w(),0>=a.g()){a=this.s;for(var d=0;d<b.length;d++)a.push(new ed(b[d],c[d]));break a}}else b=La(a),c=Ka(a);for(d=0;d<b.length;d++)gd(this,b[d],c[d])}}function gd(a,b,c){var d=a.s;d.push(new ed(b,c));b=d.length-1;a=a.s;for(c=a[b];0<b;)if(d=b-1>>1,a[d].getKey()>c.getKey())a[b]=a[d],b=d;else break;a[b]=c}n=fd.prototype;
n.remove=function(){var a=this.s,b=a.length,c=a[0];if(!(0>=b)){if(1==b)ob(a);else{a[0]=a.pop();for(var a=0,b=this.s,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].getKey()<b[f].getKey()?g:f;if(b[f].getKey()>e.getKey())break;b[a]=b[f];a=f}b[a]=e}return c.Xa}};n.w=function(){for(var a=this.s,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].Xa);return b};n.X=function(){for(var a=this.s,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].getKey());return b};n.na=function(){return new fd(this)};n.g=function(){return this.s.length};
n.J=function(){return 0==this.s.length};n.clear=function(){ob(this.s)};function hd(){fd.call(this)}z(hd,fd);hd.prototype.oa=function(a,b){gd(this,a,b)};hd.prototype.V=function(){return this.remove()};function Y(a,b){this.ya=new hd;bd.call(this,a,b)}z(Y,bd);n=Y.prototype;n.ra=function(a,b){if(!a){var c=Y.q.ra.call(this);c&&this.La&&(this.Hb=s.setTimeout(x(this.sa,this),this.La));return c}this.ya.oa(void 0!==b?b:100,a);this.sa()};n.sa=function(){for(var a=this.ya;0<a.g();){var b=this.ra();if(b)a.V().apply(this,[b]);else break}};n.ca=function(a){Y.q.ca.call(this,a);this.sa()};n.ka=function(){Y.q.ka.call(this);this.sa()};
n.f=function(){Y.q.f.call(this);s.clearTimeout(this.Hb);this.ya.clear();this.ya=null};function id(a,b,c){Y.call(this,b,c);this.Pa=a}z(id,Y);id.prototype.Ia=function(){var a=new Pc,b=this.Pa;b&&Cc(b,function(b,d){a.headers.set(d,b)});return a};id.prototype.Ua=function(a){return!a.Ma&&!a.a};function jd(a,b,c,d,e){J.call(this);this.ga=void 0!==a?a:1;this.K=void 0!==e?Math.max(0,e):0;this.aa=new id(b,c,d);this.p=new V;this.ea=new zc(this)}z(jd,J);var kd="ready complete success error abort timeout".split(" ");n=jd.prototype;n.ub=function(a){this.K=Math.max(0,a)};n.send=function(a,b,c,d,e,f,g,h,m){if(this.p.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new ld(b,x(this.Kb,this,a),c,d,e,g,void 0!==h?h:this.ga,m);this.p.set(a,b);a=x(this.Jb,this,a);this.aa.ra(a,f);return b};
n.abort=function(a,b){var c=this.p.get(a);if(c){var d=c.$;c.Za=!0;b&&(d&&(this.ea.ha(d,kd,c.Aa),Ab(d,"ready",function(){var a=this.aa;a.B.remove(d)&&a.ca(d)},!1,this)),this.p.remove(a));d&&d.abort()}};n.Jb=function(a,b){var c=this.p.get(a);c&&!c.$?(this.ea.Sa(b,kd,c.Aa),b.ub(this.K),b.Z=c.Z,c.$=b,this.dispatchEvent(new md("ready",this,a,b)),nd(this,a,b),c.Za&&b.abort()):(c=this.aa,c.B.remove(b)&&c.ca(b))};
n.Kb=function(a,b){var c=b.target;switch(b.type){case "ready":nd(this,a,c);break;case "complete":a:{var d=this.p.get(a);if(7==c.Y||Zc(c)||d.la>d.ga)if(this.dispatchEvent(new md("complete",this,a,c)),d&&(d.bb=!0,d.Ha)){c=d.Ha.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new md("success",this,a,c));break;case "timeout":case "error":d=this.p.get(a);d.la>d.ga&&this.dispatchEvent(new md("error",this,a,c));break;case "abort":this.dispatchEvent(new md("abort",this,a,c))}return null};
function nd(a,b,c){var d=a.p.get(b);!d||d.bb||d.la>d.ga?(d&&(a.ea.ha(c,kd,d.Aa),a.p.remove(b)),a=a.aa,a.B.remove(c)&&a.ca(c)):(d.la++,c.send(d.Wb,d.Lb,d.Db,d.Pa))}n.f=function(){jd.q.f.call(this);this.aa.W();this.aa=null;this.ea.W();this.ea=null;var a=this.p;Cc(a,function(a){a.W()});a.clear();this.p=null};function md(a,b,c,d){G.call(this,a,b);this.id=c;this.$=d}z(md,G);
function ld(a,b,c,d,e,f,g,h){A.call(this);this.Wb=a;this.Lb=c||"GET";this.Db=d;this.Pa=e||null;this.ga=void 0!==g?g:1;this.la=0;this.Za=this.bb=!1;this.Aa=b;this.Ha=f;this.Z=h||Qc;this.$=null}z(ld,A);ld.prototype.f=function(){ld.q.f.call(this);delete this.Aa;delete this.Ha};var od={DICOM:{za:"arraybuffer",xa:U},NII:{za:"arraybuffer",xa:U},GZ:{za:"arraybuffer",xa:U},TRK:{za:"arraybuffer",xa:U}};y("X.io.extensions",od);function Z(){this.Ca=new jd;I(this.Ca,"success",Z.prototype.Pb.bind(this));I(this.Ca,"ready",Z.prototype.Ob.bind(this));this.G=new V;this.k=new V;this.u=this.i=0}n=Z.prototype;
n.load=function(a,b){var c=a;u(a)?c=a[0]:a=[a];var d=c.split(".").pop().toUpperCase();null!=b&&(d=b.toUpperCase());if(!(d in od))throw Error("The "+d+" file format is not supported.");for(var e=new yc(c,d,od[d].xa),f=a.length,g=0;g<f;g++){var g=a[g],h=new sc(e,g);this.k.set(g,h);e.k.push(h);this.Ca.send(g,g,void 0,void 0,void 0,void 0,void 0,void 0,od[d].za)}this.G.set(c,e);return c};n.Ob=function(a){Ab(a.$,"readystatechange",Z.prototype.Nb.bind(this,a.id))};
n.Nb=function(a,b){var c=this.k.get(a);c.l=1;c.M.l=1;I(b.target.a,"progress",Z.prototype.Qb.bind(this,a))};n.Qb=function(a,b){var c=this.k.get(a);c.H=b.pa.total;c.i=b.pa.loaded;c=c.M;c.H=0;c.i=0;for(var d=c.k.length,e=0;e<d;e++)e=c.k[e],c.H+=e.H,c.i+=e.i;d=Math.floor(100*(c.i/c.H));eval("X.io.onloading('"+c.L+"',"+d+")");var f=0,g=0,c=this.G.t(!1);wc(c,function(a){f+=a.H;g+=a.i}.bind(this));d=Math.floor(100*(g/f));d>this.i&&(this.i=d,eval("X.io.onloading(null,"+this.i+")"))};
n.Pb=function(a){var b=this.k.get(a.id);b.l=2;b.F=$c(a.$);a=b.M;for(var b=a.k.length,c=0;c<b;c++)if(c=a.k[c],2!=c.l)return;a.l=2;eval("X.io.onload('"+a.L+"')");setTimeout(Z.prototype.Tb.bind(this,a.L),100);var d=!0;a=this.G.t(!1);wc(a,function(a){1==a.l&&(d=!1)}.bind(this));d&&(this.i=0,eval("X.io.onload(null)"))};n.Tb=function(a){a=this.G.get(a);a.l=3;var b=new a.xb;I(b,"a",Z.prototype.Sb.bind(this));Ab(b,"b",Z.prototype.Rb.bind(this));setTimeout(b.parse.bind(b,a),100)};
n.Sb=function(a){var b=a.M;b.u+=a.yb;eval("X.io.onparsing('"+b.L+"',"+b.u+")");var c=0;a=this.G.t(!1);wc(a,function(a){c+=a.u}.bind(this));c=Math.floor(c/this.G.g());c>this.u&&(this.u=c,eval("X.io.onparsing(null,"+this.u+")"))};n.Rb=function(a){a=a.M;a.l=4;eval("X.io.onparse('"+a.L+"')");var b=!0;a=this.G.t(!1);wc(a,function(a){4!=a.l&&(b=!1)}.bind(this));b&&(this.u=0,eval("X.io.onparse(null)"),eval("X.io.oncomplete()"))};
n.get=function(a){var b=this.G.get(a);if(!b)throw Error("Job "+a+" could not be found.");if(4!=b.l)throw Error("Job "+a+" is not fully parsed yet.");return b.F};var pd=new Z;y("X.io.load",pd.load.bind(pd));y("X.io.get",pd.get.bind(pd));}).call(this);
