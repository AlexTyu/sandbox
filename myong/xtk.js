/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function g(a){throw a;}var k=void 0,o=!0,q=null,r=!1;function aa(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var v,ba=this;function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return a!==k}function w(a){return a!=q}function ga(a){return"array"==da(a)}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){return"string"==typeof a}function z(a){return"number"==typeof a}function la(a){return"function"==da(a)}function ma(a){a=da(a);return"object"==a||"array"==a||"function"==a}function na(a){return a[oa]||(a[oa]=++qa)}
var oa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),qa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(q,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var va=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=ba;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ea(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function C(a,b){function c(){}c.prototype=b.prototype;a.A=b.prototype;a.prototype=new c};window["X.Counter"]=function(){var a=0;return{Je:function(){a+=1},Vh:function(){a+=-1},value:function(){return a}}}();
if(!Function.prototype.bind)Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&g(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b};A("Function.prototype.bind",Function.prototype.bind);function wa(a){if(!xa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ya,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(za,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Aa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ba,"&quot;"));return a}var ya=/&/g,za=/</g,Aa=/>/g,Ba=/\"/g,xa=/[&<>\"]/;var Ca,Ea,Fa,Ga,Ha,Ia,Ja;function Ka(){return ba.navigator?ba.navigator.userAgent:q}function La(){return ba.navigator}Ha=Ga=Fa=Ea=Ca=r;var Ma;if(Ma=Ka()){var Na=La();Ca=0==Ma.indexOf("Opera");Ea=!Ca&&-1!=Ma.indexOf("MSIE");Ga=(Fa=!Ca&&-1!=Ma.indexOf("WebKit"))&&-1!=Ma.indexOf("Mobile");Ha=!Ca&&!Fa&&"Gecko"==Na.product}var Oa=Ca,D=Ea,Pa=Ha,E=Fa,Qa=Ga,Ra,Sa=La();Ra=Sa&&Sa.platform||"";Ia=-1!=Ra.indexOf("Mac");Ja=-1!=Ra.indexOf("Win");var Ta=!!La()&&-1!=(La().appVersion||"").indexOf("X11"),Va;
a:{var Wa="",Xa;if(Oa&&ba.opera)var Ya=ba.opera.version,Wa="function"==typeof Ya?Ya():Ya;else if(Pa?Xa=/rv\:([^\);]+)(\)|;)/:D?Xa=/MSIE\s+([^\);]+)(\)|;)/:E&&(Xa=/WebKit\/(\S+)/),Xa)var Za=Xa.exec(Ka()),Wa=Za?Za[1]:"";if(D){var $a,ab=ba.document;$a=ab?ab.documentMode:k;if($a>parseFloat(Wa)){Va=""+$a;break a}}Va=Wa}var bb={};
function G(a){var b;if(!(b=bb[a])){b=0;for(var c=(""+Va).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",i=d[f]||"",j=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(h)||["","",""],n=p.exec(i)||["","",""];if(0==l[0].length&&0==n[0].length)break;b=((0==l[1].length?0:parseInt(l[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==l[1].length?0:parseInt(l[1],
10))>(0==n[1].length?0:parseInt(n[1],10))?1:0)||((0==l[2].length)<(0==n[2].length)?-1:(0==l[2].length)>(0==n[2].length)?1:0)||(l[2]<n[2]?-1:l[2]>n[2]?1:0)}while(0==b)}b=bb[a]=0<=b}return b}var cb={};function db(a){return cb[a]||(cb[a]=D&&document.documentMode&&document.documentMode>=a)};function eb(a,b){for(var c in a)b.call(k,a[c],c,a)}function fb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function gb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var hb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function ib(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<hb.length;f++)c=hb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var H=Array.prototype,jb=H.indexOf?function(a,b,c){return H.indexOf.call(a,b,c)}:function(a,b,c){c=c==q?0:0>c?Math.max(0,a.length+c):c;if(y(a))return!y(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},kb=H.forEach?function(a,b,c){H.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},lb=H.map?function(a,b,c){return H.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=y(a)?a.split(""):
a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},mb=H.some?function(a,b,c){return H.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return o;return r},nb=H.every?function(a,b,c){return H.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return r;return o};function ob(a,b){var c=jb(a,b);0<=c&&H.splice.call(a,c,1)}
function pb(a){return H.concat.apply(H,arguments)}function qb(a){if(ga(a))return pb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function rb(a,b,c){return 2>=arguments.length?H.slice.call(a,b):H.slice.call(a,b,c)};function sb(a){if("function"==typeof a.aa)a=a.aa();else if(ha(a)||y(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function tb(a){if("function"==typeof a.ba)return a.ba();if(y(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return fb(a)}function ub(a){if("function"==typeof a.Ub)return a.Ub();if("function"!=typeof a.ba){if(ha(a)||y(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return gb(a)}}
function vb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ha(a)||y(a))kb(a,b,c);else for(var d=ub(a),e=tb(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}function wb(a,b){if("function"==typeof a.every)return a.every(b,k);if(ha(a)||y(a))return nb(a,b,k);for(var c=ub(a),d=tb(a),e=d.length,f=0;f<e;f++)if(!b.call(k,d[f],c&&c[f],a))return r;return o};var xb="StopIteration"in ba?ba.StopIteration:Error("StopIteration");function yb(){}yb.prototype.next=function(){g(xb)};yb.prototype.yb=function(){return this};function zb(a){if(a instanceof yb)return a;if("function"==typeof a.yb)return a.yb(r);if(ha(a)){var b=0,c=new yb;c.next=function(){for(;;){b>=a.length&&g(xb);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))}
function Ab(a,b){if(ha(a))try{kb(a,b,k)}catch(c){c!==xb&&g(c)}else{a=zb(a);try{for(;;)b.call(k,a.next(),k,a)}catch(d){d!==xb&&g(d)}}};function I(a,b){this.p={};this.k=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.md(a)}v=I.prototype;v.h=0;v.kc=0;v.aa=t("h");v.ba=function(){Bb(this);for(var a=[],b=0;b<this.k.length;b++)a.push(this.p[this.k[b]]);return a};v.Ub=function(){Bb(this);return this.k.concat()};v.qd=function(a){for(var b=0;b<this.k.length;b++){var c=this.k[b];if(Gb(this.p,c)&&this.p[c]==a)return o}return r};
v.Pb=function(a,b){if(this===a)return o;if(this.h!=a.aa())return r;var c=b||Hb;Bb(this);for(var d,e=0;d=this.k[e];e++)if(!c(this.get(d),a.get(d)))return r;return o};function Hb(a,b){return a===b}v.clear=function(){this.p={};this.kc=this.h=this.k.length=0};v.remove=function(a){return Gb(this.p,a)?(delete this.p[a],this.h--,this.kc++,this.k.length>2*this.h&&Bb(this),o):r};
function Bb(a){if(a.h!=a.k.length){for(var b=0,c=0;b<a.k.length;){var d=a.k[b];Gb(a.p,d)&&(a.k[c++]=d);b++}a.k.length=c}if(a.h!=a.k.length){for(var e={},c=b=0;b<a.k.length;)d=a.k[b],Gb(e,d)||(a.k[c++]=d,e[d]=1),b++;a.k.length=c}}v.get=function(a,b){return Gb(this.p,a)?this.p[a]:b};v.set=function(a,b){Gb(this.p,a)||(this.h++,this.k.push(a),this.kc++);this.p[a]=b};v.md=function(a){var b;a instanceof I?(b=a.Ub(),a=a.ba()):(b=gb(a),a=fb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};v.c=function(){return new I(this)};
v.yb=function(a){Bb(this);var b=0,c=this.k,d=this.p,e=this.kc,f=this,h=new yb;h.next=function(){for(;;){e!=f.kc&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(xb);var h=c[b++];return a?h:d[h]}};return h};function Gb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ib(a){this.p=new I;a&&this.md(a)}function Jb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}v=Ib.prototype;v.aa=function(){return this.p.aa()};v.add=function(a){this.p.set(Jb(a),a)};v.md=function(a){for(var a=tb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};v.Mc=function(a){for(var a=tb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};v.remove=function(a){return this.p.remove(Jb(a))};v.clear=function(){this.p.clear()};
v.contains=function(a){a=Jb(a);return Gb(this.p.p,a)};v.Le=function(a){for(var b=new Ib,a=tb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};v.ba=function(){return this.p.ba()};v.c=function(){return new Ib(this)};v.Pb=function(a){return this.aa()==sb(a)&&Kb(this,a)};
function Kb(a,b){var c=sb(b);if(a.aa()>c)return r;!(b instanceof Ib)&&5<c&&(b=new Ib(b));return wb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.qd)a=b.qd(a);else if(ha(b)||y(b))a=0<=jb(b,a);else a:{for(var c in b)if(b[c]==a){a=o;break a}a=r}return a})}v.yb=function(){return this.p.yb(r)};function Lb(){}Lb.prototype.we=r;Lb.prototype.Z=function(){if(!this.we)this.we=o,this.s()};Lb.prototype.s=function(){this.bg&&Mb.apply(q,this.bg)};function Nb(a){a&&"function"==typeof a.Z&&a.Z()}function Mb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Mb.apply(q,d):Nb(d)}};function Ob(a,b){this.Re=b;this.Sb=[];a>this.Re&&g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Sb.push(this.wc())}C(Ob,Lb);v=Ob.prototype;v.se=q;v.ve=q;function Pb(a,b){a.Sb.length<a.Re?a.Sb.push(b):a.ud(b)}v.wc=function(){return this.se?this.se():{}};v.ud=function(a){if(this.ve)this.ve(a);else if(ma(a))if(la(a.Z))a.Z();else for(var b in a)delete a[b]};v.s=function(){Ob.A.s.call(this);for(var a=this.Sb;a.length;)this.ud(a.pop());delete this.Sb};function Qb(){this.Qb=[];this.Ld=new I;this.Bf=this.Cf=this.Df=this.wf=0;this.jc=new I;this.pe=this.Af=0;this.Fd=1;this.vd=new Ob(0,4E3);this.vd.wc=function(){return new Rb};this.xf=new Ob(0,50);this.xf.wc=function(){return new Sb};var a=this;this.yd=new Ob(0,2E3);this.yd.wc=function(){return""+a.Fd++};this.yd.ud=function(){};this.ag=3}function Sb(){this.Ud=this.yf=this.Y=0}
Sb.prototype.toString=function(){var a=[];a.push(this.type," ",this.Y," (",Math.round(10*this.yf)/10," ms)");this.Ud&&a.push(" [VarAlloc = ",this.Ud,"]");return a.join("")};function Rb(){}function Tb(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(Ub(a.ze-c));e.push(" ",Vb(a.ze-b));0==a.wd?e.push(" Start        "):1==a.wd?(e.push(" Done "),e.push(Ub(a.ci-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.hh&&e.push("[VarAlloc ",a.hh,"] ");return e.join("")}
Rb.prototype.toString=function(){return this.type==q?this.Zf:"["+this.type+"] "+this.Zf};Qb.prototype.reset=function(a){this.ag=a;for(a=0;a<this.Qb.length;a++){var b=this.vd.id;b&&Pb(this.yd,b);Pb(this.vd,this.Qb[a])}this.Qb.length=0;this.Ld.clear();this.wf=va();this.pe=this.Af=this.Bf=this.Cf=this.Df=0;b=this.jc.Ub();for(a=0;a<b.length;a++){var c=this.jc.get(b[a]);c.Y=0;c.yf=0;c.Ud=0;Pb(this.xf,c)}this.jc.clear()};
Qb.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Qb.length;d++){var e=this.Qb[d];1==e.wd&&c.pop();a.push(" ",Tb(e,this.wf,b,c.join("")));b=e.ze;a.push("\n");0==e.wd&&c.push("|  ")}if(0!=this.Ld.aa()){var f=va();a.push(" Unstopped timers:\n");Ab(this.Ld,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Vb(b.startTime),")\n")})}b=this.jc.Ub();for(d=0;d<b.length;d++)c=this.jc.get(b[d]),1<c.Y&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Af,"\n","Total comments created ",
this.pe,"\n","Overhead start: ",this.Df," ms\n","Overhead end: ",this.Cf," ms\n","Overhead comment: ",this.Bf," ms\n");return a.join("")};function Ub(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Vb(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Qb;function Wb(){}var Xb=0;v=Wb.prototype;v.key=0;v.rb=r;v.nd=r;v.ia=function(a,b,c,d,e,f){la(a)?this.Me=o:a&&a.handleEvent&&la(a.handleEvent)?this.Me=r:g(Error("Invalid listener argument"));this.$b=a;this.pf=b;this.src=c;this.type=d;this.capture=!!e;this.xd=f;this.nd=r;this.key=++Xb;this.rb=r};v.handleEvent=function(a){return this.Me?this.$b.call(this.xd||this.src,a):this.$b.handleEvent.call(this.$b,a)};!D||db(9);var Yb=!D||db(9),Zb=D&&!G("8");!E||G("528");Pa&&G("1.9b")||D&&G("8")||Oa&&G("9.5")||E&&G("528");!Pa||G("8");function $b(a,b){this.type=a;this.currentTarget=this.target=b}C($b,Lb);v=$b.prototype;v.s=function(){delete this.type;delete this.target;delete this.currentTarget};v.ab=r;v.fc=o;v.stopPropagation=function(){this.ab=o};v.preventDefault=function(){this.fc=r};function ac(a){ac[" "](a);return a}ac[" "]=ca;function bc(a,b){a&&this.ia(a,b)}C(bc,$b);v=bc.prototype;v.target=q;v.relatedTarget=q;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=r;v.altKey=r;v.shiftKey=r;v.metaKey=r;v.Hg=r;v.ha=q;
v.ia=function(a,b){var c=this.type=a.type;$b.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Pa){var e;a:{try{ac(d.nodeName);e=o;break a}catch(f){}e=r}e||(d=q)}}else if("mouseover"==c)d=a.fromElement;else if("mouseout"==c)d=a.toElement;this.relatedTarget=d;this.offsetX=E||a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=E||a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Hg=Ia?a.metaKey:a.ctrlKey;this.state=a.state;this.ha=a;delete this.fc;delete this.ab};v.stopPropagation=function(){bc.A.stopPropagation.call(this);this.ha.stopPropagation?this.ha.stopPropagation():this.ha.cancelBubble=o};
v.preventDefault=function(){bc.A.preventDefault.call(this);var a=this.ha;if(a.preventDefault)a.preventDefault();else if(a.returnValue=r,Zb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};v.kg=t("ha");v.s=function(){bc.A.s.call(this);this.relatedTarget=this.currentTarget=this.target=this.ha=q};var dc={},ec={},hc={},ic={};
function K(a,b,c,d,e){if(b){if(ga(b)){for(var f=0;f<b.length;f++)K(a,b[f],c,d,e);return q}var d=!!d,h=ec;b in h||(h[b]={h:0,U:0});h=h[b];d in h||(h[d]={h:0,U:0},h.h++);var h=h[d],i=na(a),j;h.U++;if(h[i]){j=h[i];for(f=0;f<j.length;f++)if(h=j[f],h.$b==c&&h.xd==e){if(h.rb)break;return j[f].key}}else j=h[i]=[],h.h++;f=jc();f.src=a;h=new Wb;h.ia(c,f,a,b,d,e);c=h.key;f.key=c;j.push(h);dc[c]=h;hc[i]||(hc[i]=[]);hc[i].push(h);a.addEventListener?(a==ba||!a.te)&&a.addEventListener(b,f,d):a.attachEvent(b in
ic?ic[b]:ic[b]="on"+b,f);return c}g(Error("Invalid event type"))}function jc(){var a=kc,b=Yb?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function lc(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)lc(a,b[f],c,d,e);else a=K(a,b,c,d,e),dc[a].nd=o}
function mc(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)mc(a,b[f],c,d,e);else{d=!!d;a:{f=ec;if(b in f&&(f=f[b],d in f&&(f=f[d],a=na(a),f[a]))){a=f[a];break a}a=q}if(a)for(f=0;f<a.length;f++)if(a[f].$b==c&&a[f].capture==d&&a[f].xd==e){nc(a[f].key);break}}}
function nc(a){if(!dc[a])return r;var b=dc[a];if(b.rb)return r;var c=b.src,d=b.type,e=b.pf,f=b.capture;c.removeEventListener?(c==ba||!c.te)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in ic?ic[d]:ic[d]="on"+d,e);c=na(c);e=ec[d][f][c];if(hc[c]){var h=hc[c];ob(h,b);0==h.length&&delete hc[c]}b.rb=o;e.Ve=o;oc(d,f,c,e);delete dc[a];return o}
function oc(a,b,c,d){if(!d.Fc&&d.Ve){for(var e=0,f=0;e<d.length;e++)d[e].rb?d[e].pf.src=q:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Ve=r;0==f&&(delete ec[a][b][c],ec[a][b].h--,0==ec[a][b].h&&(delete ec[a][b],ec[a].h--),0==ec[a].h&&delete ec[a])}}function pc(a){var b,c=0,d=b==q;b=!!b;if(a==q)eb(hc,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)nc(f.key),c++}});else if(a=na(a),hc[a])for(var a=hc[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)nc(f.key),c++}}
function qc(a){var b=rc,a=na(a),c=hc[a];if(c){var d=ea(b),e=ea(k);return d&&e?(c=ec[b],!!c&&!!c[k]&&a in c[k]):!d&&!e?o:mb(c,function(a){return d&&a.type==b||e&&a.capture==k})}return r}function sc(a,b,c,d,e){var f=1,b=na(b);if(a[b]){a.U--;a=a[b];a.Fc?a.Fc++:a.Fc=1;try{for(var h=a.length,i=0;i<h;i++){var j=a[i];j&&!j.rb&&(f&=tc(j,e)!==r)}}finally{a.Fc--,oc(c,d,b,a)}}return Boolean(f)}function tc(a,b){var c=a.handleEvent(b);a.nd&&nc(a.key);return c}
function kc(a,b){if(!dc[a])return o;var c=dc[a],d=c.type,e=ec;if(!(d in e))return o;var e=e[d],f,h;if(!Yb){var i;if(!(i=b))a:{i="window.event".split(".");for(var j=ba;f=i.shift();)if(w(j[f]))j=j[f];else{i=q;break a}i=j}f=i;i=o in e;j=r in e;if(i){if(0>f.keyCode||f.returnValue!=k)return o;a:{var p=r;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(l){p=o}if(p||f.returnValue==k)f.returnValue=o}}p=new bc;p.ia(f,this);f=o;try{if(i){for(var n=[],m=p.currentTarget;m;m=m.parentNode)n.push(m);h=e[o];h.U=h.h;
for(var s=n.length-1;!p.ab&&0<=s&&h.U;s--)p.currentTarget=n[s],f&=sc(h,n[s],d,o,p);if(j){h=e[r];h.U=h.h;for(s=0;!p.ab&&s<n.length&&h.U;s++)p.currentTarget=n[s],f&=sc(h,n[s],d,r,p)}}else f=tc(c,p)}finally{if(n)n.length=0;p.Z()}return f}d=new bc(b,this);try{f=tc(c,d)}finally{d.Z()}return f}var uc=0;function vc(a){return a+"_"+uc++};function M(a){$b.call(this,a);this._className="event"}C(M,$b);var wc=vc("pan"),xc=vc("rotate"),yc=vc("zoom"),zc=vc("render"),Ac=vc("resetview"),rc=vc("modified"),Bc=vc("progress"),Cc=vc("hover"),Dc=vc("hover_end"),Ec={zh:wc,Fh:xc,Rh:yc,Dh:zc,Eh:Ac,uh:rc,Ch:Bc,sh:Cc,th:Dc};function Fc(){M.call(this,wc);this.fb=new Gc(0,0)}C(Fc,M);function Hc(){M.call(this,xc);this.fb=new Gc(0,0);this.Kf=0}C(Hc,M);function Ic(){M.call(this,yc);this.za=this.Ra=r}C(Ic,M);
function Jc(){M.call(this,zc);this.Uh=Date.now()}C(Jc,M);function Kc(){M.call(this,Cc);this.vc=this.uc=0}C(Kc,M);function Lc(){M.call(this,Dc)}C(Lc,M);function Mc(){M.call(this,Ac)}C(Mc,M);function Nc(){M.call(this,rc);this.Ha=new N}C(Nc,M);function Oc(){M.call(this,Bc);this.le=0}C(Oc,M);A("X.event",M);A("X.event.events",Ec);A("X.event.uniqueId",function(a){return vc(a)});A("X.event.PanEvent",Fc);A("X.event.RotateEvent",Hc);A("X.event.ZoomEvent",Ic);A("X.event.RenderEvent",Jc);
A("X.event.ResetViewEvent",Mc);A("X.event.ModifiedEvent",Nc);A("X.event.HoverEvent",Kc);A("X.event.ProgressEvent",Oc);function Pc(a,b,c){this.x=ea(a)?a:0;this.y=ea(b)?b:0;this.b=ea(c)?c:0}Pc.prototype.c=function(){return new Pc(this.x,this.y,this.b)};Pc.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.b+")"};Pc.prototype.zf=function(){return[this.x,this.y,this.b]};function O(a,b,c){this.x=a;this.y=b;this.b=c}C(O,Pc);v=O.prototype;v.c=function(){return new O(this.x,this.y,this.b)};v.Gc=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};v.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};v.w=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};v.normalize=function(){return this.scale(1/this.Gc())};v.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
v.la=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};v.Pb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Qc(a,b){return new O(a.x+b.x,a.y+b.y,a.b+b.b)}function Rc(a,b){return new O(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Sc(){}C(Sc,Lb);v=Sc.prototype;v.te=o;v.Ic=q;v.Pd=aa("Ic");v.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};v.removeEventListener=function(a,b,c,d){mc(this,a,b,c,d)};
v.dispatchEvent=function(a){var b=a.type||a,c=ec;if(b in c){if(y(a))a=new $b(a,this);else if(a instanceof $b)a.target=a.target||this;else{var d=a,a=new $b(b,this);ib(a,d)}var d=1,e,c=c[b],b=o in c,f;if(b){e=[];for(f=this;f;f=f.Ic)e.push(f);f=c[o];f.U=f.h;for(var h=e.length-1;!a.ab&&0<=h&&f.U;h--)a.currentTarget=e[h],d&=sc(f,e[h],a.type,o,a)&&a.fc!=r}if(r in c)if(f=c[r],f.U=f.h,b)for(h=0;!a.ab&&h<e.length&&f.U;h++)a.currentTarget=e[h],d&=sc(f,e[h],a.type,r,a)&&a.fc!=r;else for(e=this;!a.ab&&e&&f.U;e=
e.Ic)a.currentTarget=e,d&=sc(f,e,a.type,r,a)&&a.fc!=r;a=Boolean(d)}else a=o;return a};v.s=function(){Sc.A.s.call(this);pc(this);this.Ic=q};function P(){this._className="base";this.d=r}C(P,Sc);P.prototype.className=t("_className");P.prototype.print=function(){var a=Object.keys(this),b="",c="<unknown>",d=0;for(d in a){var e="this."+a[d],f=eval(e);"this._className"==e?c=f:b+=e+": "+f+"\n"}return"== X."+c+" ==\n"+b};P.prototype.dg=t("d");P.prototype.va=function(){this.d=r};A("X.base",P);A("X.base.prototype.className",P.prototype.className);A("X.base.prototype.print",P.prototype.print);A("X.base.prototype.dirty",P.prototype.dg);
A("X.base.prototype.setClean",P.prototype.va);function Q(a){P.call(this);this._className="triplets";this.Da=this.Ga=this.Ca=this.Fa=this.Ba=this.Ea=q;this.lc=[0,0,0];this.T=[];if(w(a)&&a instanceof Q)this.T=a.all().slice(),this.Ea=a.Ea,this.Ba=a.Ba,this.Fa=a.Fa,this.Ca=a.Ca,this.Ga=a.Ga,this.Da=a.Da,this.lc=a.lc.slice()}C(Q,P);v=Q.prototype;
v.add=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("Invalid triplet."));if(!this.Ea||a<this.Ea)this.Ea=a;if(!this.Ba||a>this.Ba)this.Ba=a;if(!this.Fa||b<this.Fa)this.Fa=b;if(!this.Ca||b>this.Ca)this.Ca=b;if(!this.Ga||c<this.Ga)this.Ga=c;if(!this.Da||c>this.Da)this.Da=c;this.lc=[(this.Ea+this.Ba)/2,(this.Fa+this.Ca)/2,(this.Ga+this.Da)/2];this.d=o;return this.T.push(a,b,c)/3};v.get=function(a){(!z(a)||3*a>this.T.length)&&g(Error("Invalid id."));a*=3;return[this.T[a],this.T[a+1],this.T[a+2]]};
v.remove=function(a){(!z(a)||3*a>this.T.length)&&g(Error("Invalid id."));this.T.splice(a,3);this.d=o};v.all=t("T");v.clear=function(){this.T=[];this.d=o};v.Y=function(){return this.T.length/3};v.length=function(){return this.T.length};A("X.triplets",Q);A("X.triplets.prototype.add",Q.prototype.add);A("X.triplets.prototype.get",Q.prototype.get);A("X.triplets.prototype.remove",Q.prototype.remove);A("X.triplets.prototype.all",Q.prototype.all);A("X.triplets.prototype.clear",Q.prototype.clear);
A("X.triplets.prototype.count",Q.prototype.Y);A("X.triplets.prototype.length",Q.prototype.length);function Tc(){P.call(this);this._className="parser"}C(Tc,P);v=Tc.prototype;v.parse=function(){g(Error("The function parse() should be overloaded."))};v.ec=function(a,b){var c=this.r(a,b+2),d=this.r(a,b+3),e=(d<<1&255|c>>7)-127,c=(c&127)<<16|this.r(a,b+1)<<8|this.r(a,b);return 0==c&&-127==e?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,e)};
function Uc(a,b,c){var d=a.r(b,c),e=a.r(b,c+1),f=(d<<1&255|e>>7)-127,a=(e&127)<<16|a.r(b,c+2)<<8|a.r(b,c+3);return 0==a&&-127==f?0:(1-2*(d>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,f)}function Vc(a,b,c,d){var e=[],f=0,h=Infinity,i;for(i=0;i<d;i++){var j=a.ec(b,c+4*i);e[i]=j;f=Math.max(f,j);h=Math.min(h,j)}return[e,f,h]}function Wc(a,b,c){return(a.r(b,c+3)<<24)+(a.r(b,c+2)<<16)+(a.r(b,c+1)<<8)+a.r(b,c)}function Xc(a,b,c){return(a.r(b,c)<<24)+(a.r(b,c+1)<<16)+(a.r(b,c+2)<<8)+a.r(b,c+3)}
v.Lc=function(a,b){return(this.r(a,b+1)<<8)+this.r(a,b)};v.Fg=function(a,b){var c=this.r(a,b);return 127<c?c-256:c};v.r=function(a,b){return a.charCodeAt(b)&255};A("X.parser",Tc);A("X.parser.prototype.parse",Tc.prototype.parse);function Yc(){Tc.call(this);this._className="parserTRK"}C(Yc,Tc);
Yc.prototype.parse=function(a,b){var c=a.j,d=a.l,e=a.V,f=0,h=f+6,i=0,j=Infinity,p;for(p=0;3>p;p++)var l=this.Lc(b,h+2*p),i=Math.max(i,l),j=Math.min(j,l);var n=Vc(this,b,f+12,3);Vc(this,b,f+24,3);var m=this.Lc(b,f+36),s=this.Lc(b,f+238);Vc(this,b,f+440,16);Vc(this,b,f+956,6);for(var h=Wc(this,b,f+988),f=Wc(this,b,f+996),i=[],u=q,x=q,B=q,F=q,W=l=q,j=0;j<h;j++){var L=Wc(this,b,f),J=new Q,f=f+4;for(p=0;p<L;p++){var ia=this.ec(b,f),f=f+4,fa=this.ec(b,f),f=f+4,ja=this.ec(b,f),f=f+4;0<m&&(Vc(this,b,f,m),
f+=4*m);ia/=n[0];fa/=n[1];ja/=n[2];J.add(ia,fa,ja)}0<s&&(f+=4*s);p=J.Ea;var L=J.Ba,ia=J.Fa,fa=J.Ca,ja=J.Ga,cc=J.Da;if(!u||p<u)u=p;if(!x||L>x)x=L;if(!B||ia<B)B=ia;if(!F||fa>F)F=fa;if(!l||ja<l)l=ja;if(!W||cc>W)W=cc;i.push(J)}f=(u+x)/2;B=(B+F)/2;l=(l+W)/2;for(j=0;j<h;j++){W=i[j];F=W.Y();for(p=0;p<F-1;p++)m=W.get(p),n=W.get(p+1),c.add(m[0],m[1],m[2]),c.add(n[0],n[1],n[2]),s=m[0]-f,u=m[1]-B,x=m[2]-l,J=Math.sqrt(s*s+u*u+x*x),L=n[0]-f,ia=n[1]-B,fa=n[2]-l,ja=Math.sqrt(L*L+ia*ia+fa*fa),d.add(s/J,u/J,x/J),
d.add(L/ja,ia/ja,fa/ja),n=[Math.abs(n[0]-m[0]),Math.abs(n[1]-m[1]),Math.abs(n[2]-m[2])],m=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),n[0]/=m,n[1]/=m,n[2]/=m,e.add(n[0],n[1],n[2]),e.add(n[0],n[1],n[2])}a.ub(Zc);c=new Nc;c.Ha=a;this.dispatchEvent(c)};A("X.parserTRK",Yc);A("X.parserTRK.prototype.parse",Yc.prototype.parse);function $c(){Tc.call(this);this._className="parserSTL"}C($c,Tc);$c.prototype.parse=function(a,b){for(var c=b.split("\n"),d=c.length,e=a.j,f=a.l,h=0,i=d%8;i--;)this.q(e,f,c[h]),h++;for(i=0.125*d^0;i--;)this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++,this.q(e,f,c[h]),h++;c=new Nc;c.Ha=a;this.dispatchEvent(c)};
$c.prototype.q=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),d=c.split(" ");if("vertex"==d[0]){var c=parseFloat(d[1]),e=parseFloat(d[2]),d=parseFloat(d[3]);a.add(c,e,d)}else"facet"==d[0]&&(c=parseFloat(d[2]),e=parseFloat(d[3]),d=parseFloat(d[4]),b.add(c,e,d),b.add(c,e,d),b.add(c,e,d))};A("X.parserSTL",$c);A("X.parserSTL.prototype.parse",$c.prototype.parse);A("X.parserSTL.prototype.parseLine",$c.prototype.q);function R(a,b,c){this.R=this.Q=this.P=0;3==arguments.length?(this.P=Number(a),this.Q=Number(b),this.R=Number(c)):"x"in a&&"y"in a&&"z"in a?(this.P=Number(a.x()),this.Q=Number(a.y()),this.R=Number(a.b())):(this.P=Number(a[0]),this.Q=Number(a[1]),this.R=Number(a[2]))}
R.prototype={c:function(){return new R(this.P,this.Q,this.R)},Hc:function(){return new R(-this.P,-this.Q,-this.R)},$a:function(a){return new R(this.P+a.x(),this.Q+a.y(),this.R+a.b())},ob:function(a){return new R(this.P-a.x(),this.Q-a.y(),this.R-a.b())},xa:function(a){return new R(this.P*a,this.Q*a,this.R*a)},xe:function(a){return new R(this.P/a,this.Q/a,this.R/a)},Xa:function(a){return this.P*a.x()+this.Q*a.y()+this.R*a.b()},Cd:function(a,b){return this.$a(a.ob(this).xa(b))},length:function(){return Math.sqrt(this.Xa(this))},
wb:function(){return this.xe(this.length())},xc:function(a){return new R(this.Q*a.b()-this.R*a.y(),this.R*a.x()-this.P*a.b(),this.P*a.y()-this.Q*a.x())},x:t("P"),y:t("Q"),b:t("R")};A("csgVector",R);A("csgVector.prototype.clone",R.prototype.c);A("csgVector.prototype.plus",R.prototype.$a);A("csgVector.prototype.minus",R.prototype.ob);A("csgVector.prototype.dividedBy",R.prototype.xe);A("csgVector.prototype.times",R.prototype.xa);A("csgVector.prototype.dot",R.prototype.Xa);
A("csgVector.prototype.lerp",R.prototype.Cd);A("csgVector.prototype.length",R.prototype.length);A("csgVector.prototype.unit",R.prototype.wb);A("csgVector.prototype.cross",R.prototype.xc);A("csgVector.prototype.negated",R.prototype.Hc);A("csgVector.prototype.x",R.prototype.x);A("csgVector.prototype.y",R.prototype.y);A("csgVector.prototype.z",R.prototype.b);function ad(){this.Nc=k}
function bd(a,b,c){switch(typeof b){case "string":cd(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==q){c.push("null");break}if(ga(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],bd(a,a.Nc?a.Nc.call(b,""+f,e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),cd(f,c),c.push(":"),
bd(a,a.Nc?a.Nc.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var dd={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},ed=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function cd(a,b){b.push('"',a.replace(ed,function(a){if(a in dd)return dd[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return dd[a]=e+b.toString(16)}),'"')};function fd(){P.call(this);this._className="indexer";this.ld=[];this.Th=[];this.bd={}}C(fd,P);fd.prototype.add=function(a){w(a)||g(Error("Invalid object."));var b;b=[];bd(new ad,a,b);b=b.join("");if(!(b in this.bd))this.bd[b]=this.ld.length,this.ld.push(a);return this.bd[b]};fd.prototype.unique=t("ld");A("X.indexer.prototype.add",fd.prototype.add);A("X.indexer.prototype.unique",fd.prototype.unique);function S(a,b){this.I=new R(a);this.v=new R(b)}S.prototype={c:function(){return new S(this.I.c(),this.v.c())},ra:function(){this.v=this.v.Hc()},Ke:function(a,b){return new S(this.I.Cd(a.I,b),this.v.Cd(a.v,b))},Kg:t("I"),Gd:t("v")};A("csgVertex",S);A("csgVertex.prototype.clone",S.prototype.c);A("csgVertex.prototype.flip",S.prototype.ra);A("csgVertex.prototype.interpolate",S.prototype.Ke);A("csgVertex.prototype.pos",S.prototype.Kg);A("csgVertex.prototype.normal",S.prototype.Gd);function gd(a,b){this.v=a;this.xb=b}gd.prototype={c:function(){return new gd(this.v.c(),this.xb)},ra:function(){this.v=this.v.Hc();this.xb=-this.xb},ph:t("xb"),Gd:t("v")};A("csgPlane.prototype.w",gd.prototype.ph);A("csgPlane.prototype.normal",gd.prototype.Gd);function hd(a,b){this.ma=a;this.hc=b;var c=a[0].I,d=a[2].I,d=a[1].I.ob(c).xc(d.ob(c)).wb();this.N=new gd(d,d.Xa(c))}
hd.prototype={c:function(){var a=this.ma.map(function(a){return a.c()});return new hd(a,this.hc)},ra:function(){this.ma.reverse().map(function(a){a.ra()});this.N.ra()},oh:t("ma"),$g:t("hc"),vf:function(a,b,c,d,e){for(var f=0,h=[],i=0;i<this.ma.length;i++){var j=a.v.Xa(this.ma[i].I)-a.xb,j=-1.0E-5>j?2:1.0E-5<j?1:0,f=f|j;h.push(j)}switch(f){case 0:(0<a.v.Xa(this.N.v)?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(i=0;i<this.ma.length;i++){var p=(i+1)%
this.ma.length,j=h[i],l=h[p],f=this.ma[i],p=this.ma[p];2!=j&&b.push(f);1!=j&&c.push(2!=j?f.c():f);3==(j|l)&&(j=(a.xb-a.v.Xa(f.I))/a.v.Xa(p.I.ob(f.I)),j=f.Ke(p,j),b.push(j),c.push(j.c()))}3<=b.length&&d.push(new hd(b,this.hc));3<=c.length&&e.push(new hd(c,this.hc))}}};A("csgPolygon",hd);A("csgPolygon.prototype.clone",hd.prototype.c);A("csgPolygon.prototype.flip",hd.prototype.ra);A("csgPolygon.prototype.vertices",hd.prototype.oh);A("csgPolygon.prototype.shared",hd.prototype.$g);function id(a){this.B=this.C=this.N=q;this.i=[];a&&this.lb(a)}
id.prototype={c:function(){var a=new id;a.Xg(this.N&&this.N.c());a.Tg(this.C&&this.C.c());a.Qg(this.B&&this.B.c());a.gc(this.i.map(function(a){return a.c()}));return a},w:function(){for(var a=0;a<this.i.length;a++)this.i[a].ra();this.N.ra();this.C&&this.C.w();this.B&&this.B.w();a=this.C;this.C=this.B;this.B=a},pd:function(a){if(!this.N)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].vf(this.N,b,c,b,c);this.C&&(b=this.C.pd(b));c=this.B?this.B.pd(c):[];return b.concat(c)},X:function(a){this.i=
a.pd(this.i);this.C&&this.C.X(a);this.B&&this.B.X(a)},La:function(){var a=this.i.slice();this.C&&(a=a.concat(this.C.La()));this.B&&(a=a.concat(this.B.La()));return a},lb:function(a){if(a.length){if(!this.N)this.N=a[0].N.c();for(var b=[],c=[],d=0;d<a.length;d++)a[d].vf(this.N,this.i,this.i,b,c);if(b.length){if(!this.C)this.C=new id;this.C.lb(b)}if(c.length){if(!this.B)this.B=new id;this.B.lb(c)}}},Xg:aa("N"),Tg:aa("C"),Qg:aa("B"),of:t("i"),gc:aa("i")};function T(){this.i=[]}function jd(a){var b=new T;b.gc(a);return b}
T.prototype={c:function(){var a=new T;a.gc(this.i.map(function(a){return a.c()}));return a},gh:t("i"),Sc:function(a){var b=new id(this.c().i),a=new id(a.c().i);b.X(a);a.X(b);a.w();a.X(b);a.w();b.lb(a.La());return jd(b.La())},la:function(a){var b=new id(this.c().i),a=new id(a.c().i);b.w();b.X(a);a.X(b);a.w();a.X(b);a.w();b.lb(a.La());b.w();return jd(b.La())},Dc:function(a){var b=new id(this.c().i),a=new id(a.c().i);b.w();a.X(b);a.w();b.X(a);a.X(b);b.lb(a.La());b.w();return jd(b.La())},inverse:function(){var a=
this.c();a.i.map(function(a){a.ra()});return a},of:t("i"),gc:aa("i")};A("CSG",T);A("CSG.fromPolygons",jd);A("CSG.prototype.toPolygons",T.prototype.gh);A("CSG.prototype.union",T.prototype.Sc);A("CSG.prototype.subtract",T.prototype.la);A("CSG.prototype.intersect",T.prototype.Dc);A("CSG.prototype.inverse",T.prototype.inverse);A("CSG.prototype.polygons",T.prototype.of);A("CSG.prototype.setPolygons",T.prototype.gc);function U(a,b){this.x=ea(a)?a:0;this.y=ea(b)?b:0}U.prototype.c=function(){return new U(this.x,this.y)};U.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function kd(a,b){return new U(a.x-b.x,a.y-b.y)};function Gc(a,b){this.x=a;this.y=b}C(Gc,U);v=Gc.prototype;v.c=function(){return new Gc(this.x,this.y)};v.Gc=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};v.scale=function(a){this.x*=a;this.y*=a;return this};v.w=function(){this.x=-this.x;this.y=-this.y;return this};v.normalize=function(){return this.scale(1/this.Gc())};v.add=function(a){this.x+=a.x;this.y+=a.y;return this};v.la=function(a){this.x-=a.x;this.y-=a.y;return this};
v.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};v.Pb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ld(a,b){this.width=a;this.height=b}function md(a,b){return a==b?o:!a||!b?r:a.width==b.width&&a.height==b.height}v=ld.prototype;v.c=function(){return new ld(this.width,this.height)};v.toString=function(){return"("+this.width+" x "+this.height+")"};v.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};v.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
v.scale=function(a){this.width*=a;this.height*=a;return this};function nd(a,b){if(a instanceof nd)this.u=a.zf();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=r;break a}for(var e=0;e<a[d].length;e++)if(!z(a[d][e])){c=r;break a}if(0==c)c=a[d].length}c=0!=c}c?this.u=qb(a):a instanceof ld?this.u=od(a.height,a.width):z(a)&&z(b)&&0<a&&0<b?this.u=od(a,b):g(Error("Invalid argument(s) for Matrix contructor"))}this.n=new ld(this.u[0].length,this.u.length)}
function pd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new nd(b)}function qd(a,b,c){for(var d=0;d<a.L().height;d++)for(var e=0;e<a.L().width;e++)b.call(c,a.u[d][e],d,e,a)}function rd(a,b){var c=new nd(a.L());qd(a,function(d,e,f){c.u[e][f]=b.call(k,d,e,f,a)});return c}function od(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}v=nd.prototype;
v.add=function(a){md(this.n,a.L())||g(Error("Matrix summation is only supported on arrays of equal size"));return rd(this,function(b,c,d){return b+a.u[c][d]})};v.Pb=function(a,b){if(this.n.width!=a.n.width||this.n.height!=a.n.height)return r;for(var c=b||0,d=0;d<this.n.height;d++)for(var e=0;e<this.n.width;e++)if(!(Math.abs(this.u[d][e]-a.u[d][e])<=(c||1.0E-6)))return r;return o};v.L=t("n");function td(a,b,c){return!(0<=b&&b<a.n.height&&0<=c&&c<a.n.width)?q:a.u[b][c]}
function V(a,b,c,d){0<=b&&b<a.n.height&&0<=c&&c<a.n.width||g(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.n.height+","+a.n.width+")"));a.u[b][c]=d}v.multiply=function(a){if(a instanceof nd)return this.n.width!=a.L().height&&g(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),ud(this,a);if(z(a))return vd(this,a);g(Error("A matrix can only be multiplied by a number or another matrix."))};
v.la=function(a){md(this.n,a.L())||g(Error("Matrix subtraction is only supported on arrays of equal size."));return rd(this,function(b,c,d){return b-a.u[c][d]})};v.zf=t("u");v.toString=function(){var a=0;qd(this,function(b){b=(""+b).length;b>a&&(a=b)});var b=[];kb(this.u,function(c){b.push("[ ");kb(c,function(c){c=""+c;b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};
function ud(a,b){var c=new nd(a.n.height,b.L().width);qd(c,function(a,e,f){for(var h=a=0;h<this.n.width;h++)a+=td(this,e,h)*td(b,h,f);V(c,e,f,a)},a);return c}function vd(a,b){return rd(a,function(a){return a*b})};function Y(a,b){nd.call(this,a,b);this._className="matrix"}C(Y,nd);function wd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new Y(b)}v=Y.prototype;v.z=function(){var a=[],b=this.L();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(td(this,c,d));return a};
v.translate=function(a){this.n.width!=this.n.height&&g(Error("Can not translate non-square matrix."));var b=this.L(),c=pd(b.height);a instanceof Gc&&3==b.height?(V(c,0,2,a.x),V(c,1,2,a.y)):a instanceof O&&4==b.height?(V(c,0,3,a.x),V(c,1,3,a.y),V(c,2,3,a.b)):g(Error("Translation failed."));return new Y(this.multiply(c))};
v.rotate=function(a,b){(4!=this.L().height||this.n.width!=this.n.height)&&g(Error("Only 4x4 matrices can be rotated."));(!w(b)||!(b instanceof O))&&g(Error("Invalid axis vector."));z(a)||g(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=pd(4);V(f,0,0,d+c.x*c.x*(1-d));V(f,0,1,c.x*c.y*(1-d)-c.b*e);V(f,0,2,c.x*c.b*(1-d)+c.y*e);V(f,1,0,c.y*c.x*(1-d)+c.b*e);V(f,1,1,d+c.y*c.y*(1-d));V(f,1,2,c.y*c.b*(1-d)-c.x*e);V(f,2,0,c.b*c.x*(1-d)-c.y*e);V(f,2,1,c.b*c.y*(1-d)+c.x*e);V(f,2,2,
d+c.b*c.b*(1-d));return new Y(this.multiply(f))};v.cc=function(a){var b=this.L(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof O&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):g(Error("Multiplication by vector failed."));a=this.multiply(new nd(c));return new O(parseFloat(td(a,0,0)),parseFloat(td(a,1,0)),parseFloat(td(a,2,0)))};v.eh=function(a,b){var c=this.u[a];this.u[a]=this.u[b];this.u[b]=c};
v.dh=function(a,b){for(var c=this.L(),d=0,d=0;d<c.height;d++){var e=td(this,d,a);e||(e=0);var f=td(this,d,b);f||(f=0);V(this,d,a,f);V(this,d,b,e)}};A("X.matrix",Y);A("X.matrix.createIdentityMatrix",wd);A("X.matrix.prototype.flatten",Y.prototype.z);A("X.matrix.prototype.translate",Y.prototype.translate);A("X.matrix.prototype.rotate",Y.prototype.rotate);A("X.matrix.prototype.multiplyByVector",Y.prototype.cc);A("X.matrix.prototype.swapRows",Y.prototype.eh);A("X.matrix.prototype.swapCols",Y.prototype.dh);function xd(){P.call(this);this._className="transform";this.g=wd(4);this.na=new Float32Array(this.g.z())}C(xd,P);v=xd.prototype;v.Ng=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new O(0,1,0));this.na=new Float32Array(this.g.z());this.d=o};v.Og=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new O(1,0,0));this.na=new Float32Array(this.g.z());this.d=o};
v.Pg=function(a){(!z(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new O(0,0,1));this.na=new Float32Array(this.g.z());this.d=o};v.ih=function(a){z(a)||g(Error("Invalid distance."));this.g=this.g.translate(new O(a,0,0));this.na=new Float32Array(this.g.z());this.d=o};v.jh=function(a){z(a)||g(Error("Invalid distance."));this.g=this.g.translate(new O(0,a,0));this.na=new Float32Array(this.g.z());this.d=o};
v.kh=function(a){z(a)||g(Error("Invalid distance."));this.g=this.g.translate(new O(0,0,a));this.na=new Float32Array(this.g.z());this.d=o};v.yg=t("g");v.sf=function(a){var b=wd(4);w(a)&&a instanceof Y&&(b=a);this.g=b;this.na=new Float32Array(this.g.z());this.d=o};function yd(a){return a.na}function zd(a,b,c){var d=td(a.g,b,c);d||(d=0);V(a.g,b,c,-1*d);a.na=new Float32Array(a.g.z());a.d=o}v.gg=function(){zd(this,0,0)};v.hg=function(){zd(this,1,1)};v.ig=function(){zd(this,2,2)};A("X.transform",xd);
A("X.transform.prototype.rotateX",xd.prototype.Ng);A("X.transform.prototype.rotateY",xd.prototype.Og);A("X.transform.prototype.rotateZ",xd.prototype.Pg);A("X.transform.prototype.translateX",xd.prototype.ih);A("X.transform.prototype.translateY",xd.prototype.jh);A("X.transform.prototype.translateZ",xd.prototype.kh);A("X.transform.prototype.matrix",xd.prototype.yg);A("X.transform.prototype.setMatrix",xd.prototype.sf);A("X.transform.prototype.flipX",xd.prototype.gg);A("X.transform.prototype.flipY",xd.prototype.hg);
A("X.transform.prototype.flipZ",xd.prototype.ig);function Ad(a){P.call(this);this._className="file";this.ce=a;this.d=o}C(Ad,P);Ad.prototype.path=t("ce");Ad.prototype.Wg=function(a){this.ce=a;this.d=o};A("X.file",Ad);A("X.file.prototype.path",Ad.prototype.path);A("X.file.prototype.setPath",Ad.prototype.Wg);function Bd(){P.call(this);this._className="texture";var a=window["X.Counter"];a.Je();this._id=a.value();this.Qa=q;this.Sh=Cd;this.Jb=this.Xd=q;this.rc=this.sc=0;this.d=o}C(Bd,P);var Cd="SHARP",Dd={Gh:Cd,Hh:"SMOOTH"};Bd.prototype.id=t("_id");Bd.prototype.file=t("Qa");Bd.prototype.zd=t("Xd");A("X.texture",Bd);A("X.texture.filters",Dd);A("X.texture.prototype.file",Bd.prototype.file);function N(a){P.call(this);this._className="object";var b=window["X.Counter"];b.Je();this._id=b.value();this._type=Ed;this.ke=new xd;this._color=[1,1,1];this.j=new Q;this.l=new Q;this.V=new Q;this.Qa=this.Ta=this.S=q;this._opacity=1;this.cb=q;this._visible=o;this._lineWidth=this._pointSize=1;this._caption=q;this._magicMode=r;if(w(a)){this._type=a.type();this.ke.sf(new Y(a.transform().g));this._color=Array(a.color());this.j=new Q(a.j);this.l=new Q(a.l);this.V=new Q(a.V);this.S=a.S;this.Ta=a.Ta;if(a.file())this.Qa=
new Ad((new String(a.file().path())).toString());this._opacity=a.opacity();this.cb=a.children();this._visible=a.Wd();this._pointSize=a.Md();this._lineWidth=a.lineWidth();a.caption()&&(this._caption=(new String(a.caption())).toString());this._magicMode=a.Dd();this.d=o}this.d=o}C(N,P);var Ed="TRIANGLES",Zc="LINES";v=N.prototype;v.id=t("_id");
function Fd(a){for(var b=a.j.Y(),c=[],d=0,d=0;d<b;d+=3){var e=a.j.get(d),f=a.j.get(d+1),h=a.j.get(d+2),i=a.l.get(d),j=a.l.get(d+1),p=a.l.get(d+2),l=a._color;0<a.V.length()&&(l=a.V.get(d));var n=[];n.push(new S(e,i));n.push(new S(f,j));n.push(new S(h,p));c.push(new hd(n,l))}return jd(c)}
function Gd(a,b){(!w(b)||!(b instanceof T))&&g(Error("Invalid CSG object."));a.j.clear();a.l.clear();a.V.clear();var c=new fd,d=[];lb(b.i,function(a){for(var b=[],h=a.hc,b=lb(a.ma,function(a){a.color=h;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Jf=lb(c.unique(),function(a){return[a.I.x(),a.I.y(),a.I.b()]});a.If=lb(c.unique(),function(a){return[a.v.x(),a.v.y(),a.v.b()]});a.Hf=lb(c.unique(),function(a){return!a.color?q:[a.color[0],a.color[1],a.color[2]]});lb(d,function(a){var b=
a[0],c=a[1],a=a[2],d=this.Jf,j=this.If,p=this.Hf;this.j.add(d[b][0],d[b][1],d[b][2]);this.j.add(d[c][0],d[c][1],d[c][2]);this.j.add(d[a][0],d[a][1],d[a][2]);this.l.add(j[b][0],j[b][1],j[b][2]);this.l.add(j[c][0],j[c][1],j[c][2]);this.l.add(j[a][0],j[a][1],j[a][2]);p[b]&&this.V.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.V.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.V.add(p[a][0],p[a][1],p[a][2])}.bind(a));a.ub(Ed)}v.type=t("_type");v.ub=aa("_type");v.transform=t("ke");v.Ig=t("j");v.Cg=t("l");v.Yf=t("V");
v.color=t("_color");v.fh=t("S");v.Qc=function(a){if(w(a)){if(y(a)){var b=a,c=a=new Bd;w(b)?(y(b)&&(b=new Ad(b)),c.Qa=b):c.Qa=q}a instanceof Bd||g(Error("Invalid texture."));this.S=a}else this.S=q};v.rf=function(a,b,c){(!z(a)&&0>a&&1<a||!z(b)&&0>b&&1<b||!z(c)&&0>c&&1<c)&&g(Error("Invalid color."));if(this.Xb())for(var d=this.children(),e=d.length,f=0,f=0;f<e;f++)d[f].rf(a,b,c);this._color[0]=a;this._color[1]=b;this._color[2]=c;this.d=o};
v.Sc=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Fd(b));a=new N;Gd(a,Fd(this).Sc(b));return a};v.la=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Fd(b));a=new N;Gd(a,Fd(this).la(b));return a};v.Dc=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Fd(b));a=new N;Gd(a,Fd(this).Dc(b));return a};
v.inverse=function(a){(!w(a)||!(a instanceof T)&&!(a instanceof N))&&g(Error("Invalid object."));var b=a;a instanceof N&&(b=Fd(b));a=new N;Gd(a,Fd(this).inverse(b));return a};v.opacity=t("_opacity");v.caption=t("_caption");v.Rg=function(a){this._caption=a;this.d=o};v.J=function(a){if(this.Xb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].J(a);this._visible=a;this.d=o};v.Wd=t("_visible");
v.tf=function(a){(!z(a)||1<a||0>a)&&g(Error("Invalid opacity."));if(this.Xb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].tf(a);this._opacity=a;this.d=o};v.load=function(a){this.Qa=w(a)?new Ad(a):q};v.file=t("Qa");v.bc=function(){var a=new Nc;a.Ha=this;this.dispatchEvent(a)};v.children=function(){if(!this.cb)this.cb=[];return this.cb};v.Xb=function(){return!this.cb?r:0<this.cb.length};v.Ug=function(a){z(a)||g(Error("Invalid line width."));this._lineWidth=a;this.d=o};v.lineWidth=t("_lineWidth");
v.Yg=function(a){z(a)||g(Error("Invalid point size."));this._pointSize=a;this.d=o};v.Md=t("_pointSize");v.Dd=t("_magicMode");v.Vg=function(a){"boolean"!=typeof a&&g(Error("Invalid magicMode setting."));this._magicMode=a};function Hd(a,b){(!w(a)||!w(b)||!(a instanceof N)||!(b instanceof N))&&g(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.opacity()?-1:1==b.opacity()?1:w(a.yc)&&w(b.yc)&&a.yc>b.yc?-1:1}A("X.object",N);A("X.object.prototype.id",N.prototype.id);
A("X.object.prototype.type",N.prototype.type);A("X.object.prototype.transform",N.prototype.transform);A("X.object.prototype.points",N.prototype.Ig);A("X.object.prototype.normals",N.prototype.Cg);A("X.object.prototype.texture",N.prototype.fh);A("X.object.prototype.setTexture",N.prototype.Qc);A("X.object.prototype.colors",N.prototype.Yf);A("X.object.prototype.color",N.prototype.color);A("X.object.prototype.setColor",N.prototype.rf);A("X.object.prototype.opacity",N.prototype.opacity);
A("X.object.prototype.setOpacity",N.prototype.tf);A("X.object.prototype.lineWidth",N.prototype.lineWidth);A("X.object.prototype.setLineWidth",N.prototype.Ug);A("X.object.prototype.pointSize",N.prototype.Md);A("X.object.prototype.setPointSize",N.prototype.Yg);A("X.object.prototype.load",N.prototype.load);A("X.object.prototype.file",N.prototype.file);A("X.object.prototype.caption",N.prototype.caption);A("X.object.prototype.visible",N.prototype.Wd);A("X.object.prototype.setCaption",N.prototype.Rg);
A("X.object.prototype.setVisible",N.prototype.J);A("X.object.prototype.magicMode",N.prototype.Dd);A("X.object.prototype.setMagicMode",N.prototype.Vg);A("X.object.prototype.intersect",N.prototype.Dc);A("X.object.prototype.inverse",N.prototype.inverse);A("X.object.prototype.subtract",N.prototype.la);A("X.object.prototype.union",N.prototype.Sc);A("X.object.OPACITY_COMPARATOR",Hd);A("X.object.prototype.children",N.prototype.children);function Id(){Tc.call(this);this._className="parserVTK"}C(Id,Tc);
Id.prototype.parse=function(a,b){var c=a.j,d=a.l,e=b.split("\n"),f=e.length,h=new Q,i=new Q;this.D=[];this.W=Ed;this.fd=this.Ja=this.Aa=this.Ka=r;for(var j=0,p=f%8;p--;)this.q(h,i,e[j]),j++;for(p=0.125*f^0;p--;)this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++,this.q(h,i,e[j]),j++;if(this.W==Ed){e=i.length();j=f=this.D.length;do{var p=this.D[f-j],l=p.length,n;for(n=0;n<l;n++){var m=parseInt(p[n],10),s=
h.get(m);c.add(s[0],s[1],s[2]);m<e?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b))}j--}while(0<j)}else if("TRIANGLE_STRIPS"==this.W){e=i.length();j=f=this.D.length;do{p=this.D[f-j];l=p.length;for(n=0;n<l;n++)m=parseInt(p[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),(0==n||n==l-1)&&c.add(s[0],s[1],s[2]),m<e?(m=i.get(m),d.add(m[0],m[1],m[2]),(0==n||n==l-1)&&d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b),(0==n||n==l-1)&&d.add(m.x,
m.y,m.b));j--}while(0<j)}else if(this.W==Zc){e=i.length();j=f=this.D.length;do{p=this.D[f-j];l=p.length;for(n=0;n<l-1;n++){var u=parseInt(p[n],10),m=parseInt(p[n+1],10),x=h.get(u),s=h.get(m);c.add(x[0],x[1],x[2]);c.add(s[0],s[1],s[2]);u<e-1?(s=i.get(u),m=i.get(m),d.add(s[0],s[1],s[2]),d.add(m[0],m[1],m[2])):(m=new O(x[0],x[1],x[2]),m.normalize(),d.add(m.x,m.y,m.b),m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b))}j--}while(0<j)}else if("POINTS"==this.W){e=i.length();j=f=this.D.length;do{p=
this.D[f-j];l=p.length;for(n=0;n<l;n++)m=parseInt(p[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),m<e?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b));j--}while(0<j)}else if("POLYGONS"==this.W){e=i.length();j=f=this.D.length;do{p=this.D[f-j];l=p.length;for(n=0;n<l;n++)m=parseInt(p[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),m<e?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new O(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b));j--}while(0<j)}a.ub(this.W);c=new Nc;c.Ha=
a;this.dispatchEvent(c)};
Id.prototype.q=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,e=c[0];if("POINTS"==e)this.Ka=o,this.Ja=this.Aa=r;else if("VERTICES"==e)this.Aa=o,this.Ja=this.Ka=r,a=parseInt(c[1],10),3<=a?this.W=Ed:1==a?this.W="POINTS":g(Error("VTK file not supported!")),this.D=[];else if("TRIANGLE_STRIPS"==e)this.Aa=o,this.Ja=this.Ka=r,this.W="TRIANGLE_STRIPS",this.D=[];else if("LINES"==e)this.Aa=o,this.Ja=this.Ka=r,this.W=Zc,this.D=[];else if("POLYGONS"==e)this.Aa=o,this.Ja=this.Ka=r,
this.W="POLYGONS",this.D=[];else if("POINT_DATA"==e)this.Ja=o,this.Aa=this.Ka=r;else if(this.Ka)if(1==d||isNaN(parseFloat(e)))this.Ka=r;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]);a.add(e,f,h)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),a.add(e,f,h));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,e,c))}else if(this.Aa)1==d||isNaN(parseFloat(e))?this.Aa=r:this.D.push(c.slice(1));else if(this.Ja)"NORMALS"==e?this.fd=o:1==d||
isNaN(parseFloat(e))?this.fd=this.Ja=r:this.fd&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]),b.add(e,f,h)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),b.add(e,f,h)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,e,c)))};A("X.parserVTK",Id);A("X.parserVTK.prototype.parse",Id.prototype.parse);A("X.parserVTK.prototype.parseLine",Id.prototype.q);function Jd(){Tc.call(this);this._className="parserFSM"}C(Jd,Tc);
Jd.prototype.parse=function(a,b){var c=a.j,d=a.l,e=new Q,f;f=3;var h=0,i;do i=this.r(b,f++),h++;while(200>h&&10!=i);f++;var j=Xc(this,b,f);f+=4;h=Xc(this,b,f);f+=4;i=[];for(var p=0,p=0;p<j;p++){var l=Uc(this,b,f);f+=4;var n=Uc(this,b,f);f+=4;var m=Uc(this,b,f);f+=4;i[p]=0;e.add(l,n,m)}j=[];p=[];for(l=0;l<h;l++){var s=Xc(this,b,f);f+=4;m=Xc(this,b,f);f+=4;n=Xc(this,b,f);f+=4;i[s]+=1;i[m]+=1;i[n]+=1;j.push([s,m,n]);p.push(new O(0,0,0))}for(l=0;l<h;l++){var s=j[l][0],m=j[l][1],n=j[l][2],u=e.get(s);f=
e.get(m);var x=e.get(n),u=new O(u[0],u[1],u[2]),x=new O(x[0],x[1],x[2]);f=(new O(f[0],f[1],f[2])).c().la(u);u=x.c().la(u);f=Rc(f,u).normalize();p[s]=p[s].add(f);p[m]=p[m].add(f);p[n]=p[n].add(f)}for(l=0;l<h;l++)s=j[l][0],m=j[l][1],n=j[l][2],u=e.get(s),f=e.get(m),x=e.get(n),c.add(u[0],u[1],u[2]),c.add(f[0],f[1],f[2]),c.add(x[0],x[1],x[2]),s=p[s].scale(1/i[s]).normalize(),m=p[m].scale(1/i[m]).normalize(),n=p[n].scale(1/i[n]).normalize(),d.add(s.x,s.y,s.b),d.add(m.x,m.y,m.b),d.add(n.x,n.y,n.b);a.ub(Ed);
c=new Nc;c.Ha=a;this.dispatchEvent(c)};A("X.parserFSM",Jd);A("X.parserFSM.prototype.parse",Jd.prototype.parse);function Kd(a){function b(){fc+=8;return Ae<sd.length?sd.charCodeAt(Ae++)&255:-1}function c(){var a;fc++;a=Da&1;Da>>=1;0==Da&&(Da=b(),a=Da&1,Da=Da>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=fa[b]>>8-a);return b}function e(a){ia++;W[L++]=a;s.push(String.fromCharCode(a));32768==L&&(L=0)}function f(){this.Na=this.Ma=0;this.Ec=q;this.Ne=-1}function h(){for(;;){if(Cb[ka]>=Be)return-1;if(Ce[Cb[ka]]==ka)return Cb[ka]++;Cb[ka]++}}function i(){var a=Db[Eb],b;u&&document.write("<br>len:"+
ka+" treepos:"+Eb);if(17==ka)return-1;Eb++;ka++;b=h();u&&document.write("<br>IsPat "+b);if(0<=b)a.Ma=b,u&&document.write("<br>b0 "+a.Ma);else if(a.Ma=32768,u&&document.write("<br>b0 "+a.Ma),i())return-1;b=h();if(0<=b)a.Na=b,u&&document.write("<br>b1 "+a.Na),a.Ec=q;else if(a.Na=32768,u&&document.write("<br>b1 "+a.Na),a.Ec=Db[Eb],a.Ne=Eb,i())return-1;ka--;return 0}function j(a,b,c){u&&document.write("currentTree "+a+" numval "+b+" lengths "+c+" show 0");Db=a;Eb=0;Ce=c;Be=b;for(a=0;17>a;a++)Cb[a]=0;
ka=0;if(i())return u&&window.console.log("invalid huffman tree\n"),-1;if(u){document.write("<br>Tree: "+Db.length);for(a=0;32>a;a++)document.write("Places["+a+"].b0="+Db[a].Ma+"<br>"),document.write("Places["+a+"].b1="+Db[a].Na+"<br>")}return 0}function p(a){for(var b,d,e=0,f=a[e];;)if(b=c(),u&&document.write("b="+b),b){if(!(f.Na&32768))return u&&document.write("ret1"),f.Na;f=f.Ec;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.Ma&32768))return u&&document.write("ret2"),f.Ma;e++;f=
a[e]}}function l(){var a,h,i,n;do{a=c();h=d(2);switch(h){case 0:u&&window.console.log("Stored\n");break;case 1:u&&window.console.log("Fixed Huffman codes\n");break;case 2:u&&window.console.log("Dynamic Huffman codes\n");break;case 3:u&&window.console.log("Reserved block type!!\n");break;default:u&&window.console.log("Unexpected value %d!\n",h)}if(0==h){var m;Da=1;m=b();m|=b()<<8;h=b();h|=b()<<8;for((m^~h)&65535&&document.write("BlockLen checksum mismatch\n");m--;)h=b(),e(h)}else if(1==h)for(var l;;)if(l=
fa[d(7)]>>1,23<l?(l=l<<1|c(),199<l?(l-=128,l=l<<1|c()):(l-=48,143<l&&(l+=136))):l+=256,256>l)e(l);else if(256==l)break;else{l-=257;n=d(cc[l])+ja[l];l=fa[d(5)]>>3;8<Fb[l]?(m=d(8),m|=d(Fb[l]-8)<<8):m=d(Fb[l]);m+=De[l];for(l=0;l<n;l++)h=W[L-m&32767],e(h)}else if(2==h){var s=Array(320);h=257+d(5);m=1+d(5);i=4+d(4);for(l=0;19>l;l++)s[l]=0;for(l=0;l<i;l++)s[Qf[l]]=d(3);n=pa.length;for(i=0;i<n;i++)pa[i]=new f;if(j(pa,19,s)){L=0;return}if(u){document.write("<br>distanceTree");for(l=0;l<pa.length;l++)document.write("<br>"+
pa[l].Ma+" "+pa[l].Na+" "+pa[l].Ec+" "+pa[l].Ne)}n=h+m;i=0;var x=-1;for(u&&document.write("<br>n="+n+" bits: "+fc+"<br>");i<n;)if(x++,l=p(pa),u&&document.write("<br>"+x+" i:"+i+" decode: "+l+"    bits "+fc+"<br>"),16>l)s[i++]=l;else if(16==l){var B;l=3+d(2);if(i+l>n){L=0;return}for(B=i?s[i-1]:0;l--;)s[i++]=B}else{l=17==l?3+d(3):11+d(7);if(i+l>n){L=0;return}for(;l--;)s[i++]=0}n=gc.length;for(i=0;i<n;i++)gc[i]=new f;if(j(gc,h,s)){L=0;return}n=gc.length;for(i=0;i<n;i++)pa[i]=new f;l=[];n=s.length;for(i=
h;i<n;i++)l[i-h]=s[i];if(j(pa,m,l)){L=0;return}for(u&&document.write("<br>literalTree");;)if(l=p(gc),256<=l){l-=256;if(0==l)break;l--;n=d(cc[l])+ja[l];l=p(pa);8<Fb[l]?(m=d(8),m|=d(Fb[l]-8)<<8):m=d(Fb[l]);for(m+=De[l];n--;)h=W[L-m&32767],e(h)}else e(l)}}while(!a);L=0;Da=1}function n(){u&&window.console.log("NEXTFILE");s=[];var a=[];J=r;a[0]=b();a[1]=b();u&&window.console.log("type: "+a[0]+" "+a[1]);120==a[0]&&218==a[1]&&(u&&window.console.log("GEONExT-GZIP"),l(),u&&window.console.log(s.join("")),F[B]=
Array(2),F[B][0]=s.join(""),F[B][1]="geonext.gxt",B++);31==a[0]&&139==a[1]&&(u&&window.console.log("GZIP"),m(),u&&window.console.log(s.join("")),F[B]=Array(2),F[B][0]=s.join(""),F[B][1]="file",B++);if(80==a[0]&&75==a[1]&&(J=o,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u&&window.console.log("ZIP-Version: "+a[1]+" "+a[0]/10+"."+a[0]%10);x=b();x|=b()<<8;u&&window.console.log("gpflags: "+x);a=b();a|=b()<<8;u&&window.console.log("method: "+a);b();b();b();b();var c=b(),c=c|b()<<8,c=c|b()<<16,
c=c|b()<<24,d=b(),d=d|b()<<8,d=d|b()<<16,d=d|b()<<24,e=b(),e=e|b()<<8,e=e|b()<<16,e=e|b()<<24;u&&window.console.log("local CRC: "+c+"\nlocal Size: "+e+"\nlocal CompSize: "+d);c=b();c|=b()<<8;d=b();d|=b()<<8;u&&window.console.log("filelen "+c);e=0;for(Ua=[];c--;){var f=b();"/"==f|":"==f?e=0:e<Ee-1&&(Ua[e++]=String.fromCharCode(f))}u&&window.console.log("nameBuf: "+Ua);Fe||(Fe=Ua);for(e=0;e<d;)b(),e++;ia=0;8==a&&(l(),u&&window.console.log(s.join("")),F[B]=Array(2),F[B][0]=s.join(""),F[B][1]=Ua.join(""),
B++);m()}}function m(){var a=[],c;x&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b(),u&&window.console.log("CRC:"));J&&n();a[0]=b();if(8!=a[0])u&&window.console.log("Unknown compression method!");else{x=b();u&&x&-32&&window.console.log("Unknown flags set!");b();b();b();b();b();b();if(x&4){a[0]=b();a[2]=b();ka=a[0]+256*a[1];u&&window.console.log("Extra field size: "+ka);for(a=0;a<ka;a++)b()}if(x&8){a=0;for(Ua=[];c=b();){if("7"==
c||":"==c)a=0;a<Ee-1&&(Ua[a++]=c)}u&&window.console.log("original file name: "+Ua)}if(x&16)for(;b(););x&2&&(b(),b());l();b();b();b();b();b();b();b();b();J&&n()}}var s=[],u=r,x,B=0,F=[],W=Array(32768),L=0,J=r,ia,fa=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,
138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,
123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],ja=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cc=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],De=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Fb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Qf=[16,17,18,0,8,7,9,6,
10,5,11,4,12,3,13,2,14,1,15],sd=a,Ae=0,Da=1,fc=0,Ee=256,Ua=[],Fe,gc=Array(288),pa=Array(32),Eb=0,Db=q,ka=0,Cb=Array(17);Cb[0]=0;var Ce,Be;Kd.prototype.lh=function(){u&&window.console.log(sd);n();return F}};function Ld(){Tc.call(this);this._className="parserNRRD"}C(Ld,Tc);
Ld.prototype.parse=function(a,b){var c=0,d=b.match(/^([\s\S]*?)\r?\n\r?\n/),c=d[0].length,e,f,h,i,j,p,d=d[1].split(/\r?\n/);for(j=0,p=d.length;j<p;j++)if(e=d[j],e.match(/NRRD\d+/))this.tg=o;else if(!e.match(/^#/)&&(i=e.match(/(.*):(.*)/)))f=i[1].trim(),e=i[2].trim(),(h=this.fg[f])?h.call(this,e):this[f]=e;this.tg||g(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding&&g(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Vd&&(this.Vd=[new O(1,0,0),
new O(0,1,0),new O(0,0,1)],this.Rd)){d=[];for(i=0;2>=i;i++)d.push(!isNaN(this.Rd[i])?this.Vd[i].scale(this.Rd[i]):k)}i=0;i="gzip"==this.encoding||"gz"==this.encoding?(new Kd(b.substr(c))).lh()[0][0]:b.substr(c);a.fa=[this.bb[2],this.bb[1],this.bb[0]];a.qa();j=this.bb[0]*this.bb[1]*this.bb[2];c=Array(j);d=-Infinity;p=Infinity;for(e=0;e<j;e++)f=this.Kc(i,0+e*this.Jc),c[e]=f,d=Math.max(d,f),p=Math.min(p,f);j=this.bb;e=d;i=j[2];d=j[1];j=j[0];f=d*j;p=Array(i);for(h=0;h<i;h++){p[h]=Array(d);for(var l=0;l<
d;l++)p[h][l]=new Uint8Array(j)}for(l=l=0;l<i;l++){h=c.slice(l*f,(l+1)*f);for(var n=new Uint8Array(4*f),m=0,s=0,u=0,m=0;m<d;m++)for(s=0;s<j;s++){var x=h[u],x=255*(x/e),B=4*u;n[B]=x;n[++B]=x;n[++B]=x;n[++B]=255;p[l][m][s]=x;u++}m=h=new Bd;m.Jb=n;m.d=o;n=h;n.sc=j;n.d=o;n=h;n.rc=d;n.d=o;a.he.children()[l].Qc(h)}for(m=0;m<d;m++){n=new Uint8Array(4*i*j);for(l=u=0;l<i;l++)for(s=0;s<j;s++)x=p[l][m][s],B=4*u,n[B]=x,n[++B]=x,n[++B]=x,n[++B]=255,u++;c=h=new Bd;c.Jb=n;c.d=o;c=h;c.sc=j;c.d=o;c=h;c.rc=i;c.d=o;
a.ie.children()[d-1-m].Qc(h)}for(s=0;s<j;s++){n=new Uint8Array(4*i*d);for(l=u=0;l<i;l++)for(m=0;m<d;m++)x=p[l][m][s],B=4*u,n[B]=x,n[++B]=x,n[++B]=x,n[++B]=255,u++;c=h=new Bd;c.Jb=n;c.d=o;c=h;c.sc=d;c.d=o;c=h;c.rc=i;c.d=o;a.je.children()[j-1-s].Qc(h)}c=new Nc;c.Ha=a;this.dispatchEvent(c)};
Ld.prototype.fg={type:function(a){switch(a){case "unsigned char":case "uint8":this.Kc=this.r;this.Jc=1;break;case "signed char":case "int8":this.Kc=this.Fg;this.Jc=1;break;case "short":case "signed short":case "unsigned short":case "short int":case "int16":this.Kc=this.Lc;this.Jc=2;break;case "int":case "int32":break;case "float":this.Kc=this.ec;this.Jc=4;break;default:g(Error("Only short/int/int8/float data is allowed. Found "+a))}return this.type=a},endian:function(a){return this.Yh=a},encoding:function(a){return this.encoding=
a},dimension:function(a){return this.Xh=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.bb=e},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Vd=function(){var a,f,h;h=[];for(a=0,f=c.length;a<f;a++)d=c[a],h.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];for(a=0,c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return h}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.Rd=e}};A("X.parserNRRD",Ld);A("X.parserNRRD.prototype.parse",Ld.prototype.parse);function Md(){P.call(this);this._className="loader";this.Ab=q;this.Ib=0}C(Md,P);function Nd(a){if(!w(a.Ab))a.Ab=new I;return a.Ab}function Od(a){return!w(a.Ab)?o:!a.Ab.qd(r)}Md.prototype.xg=function(a){Pd(this,1.7);setTimeout(function(){a.S.file().va();a.bc();Nd(this).set(a.id(),o)}.bind(this),100)};function Pd(a,b){a.Ib+=b/Nd(a).aa()/3;if(1<a.Ib)a.Ib=1;var c=new Oc;c.le=a.Ib;a.dispatchEvent(c)}Md.prototype.Qe=function(){g(Error("Could not get the file."))};
Md.prototype.wg=function(a,b){Pd(this,1);setTimeout(function(){var c=b.file().path().split(".").pop().toLowerCase();"stl"==c?(c=new $c,lc(c,rc,this.dc.bind(this)),c.parse(b,a.response)):"vtk"==c?(c=new Id,lc(c,rc,this.dc.bind(this)),c.parse(b,a.response)):"trk"==c?(c=new Yc,lc(c,rc,this.dc.bind(this)),c.parse(b,a.response)):"fsm"==c?(c=new Jd,lc(c,rc,this.dc.bind(this)),c.parse(b,a.response)):"nrrd"==c&&(c=new Ld,lc(c,rc,this.dc.bind(this)),c.parse(b,a.response))}.bind(this),100)};
Md.prototype.dc=function(a){Pd(this,1);setTimeout(function(){var b=a.Ha;b.file().va();b.bc();Nd(this).set(b.id(),o)}.bind(this),100)};A("X.loader",Md);function Qd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Qd.prototype.c=function(){return new Qd(this.top,this.right,this.bottom,this.left)};Qd.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Qd.prototype.contains=function(a){return!this||!a?r:a instanceof Qd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Rd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}v=Rd.prototype;v.c=function(){return new Rd(this.left,this.top,this.width,this.height)};v.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
v.Le=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,o}return r};v.contains=function(a){return a instanceof Rd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
v.L=function(){return new ld(this.width,this.height)};var Sd;function Td(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=rb(arguments,1),e;e=c;for(var f=0,h=0;h<d.length;h++)0<=jb(e,d[h])||(e.push(d[h]),f++);e=f==d.length;a.className=c.join(" ");return e};var Ud=!D||db(9);!Pa&&!D||D&&db(9)||Pa&&G("1.9.1");D&&G("9");function Vd(a){return a?new Wd(Xd(a)):Sd||(Sd=new Wd)}function Yd(a){return y(a)?document.getElementById(a):a}function Zd(a,b){eb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in $d?a.setAttribute($d[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var $d={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function ae(a,b,c){return be(document,arguments)}
function be(a,b){var c=b[0],d=b[1];if(!Ud&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',wa(d.name),'"');if(d.type){c.push(' type="',wa(d.type),'"');var e={};ib(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)y(d)?c.className=d:ga(d)?Td.apply(q,[c].concat(d)):Zd(c,d);2<b.length&&ce(a,c,b);return c}
function ce(a,b,c){function d(c){c&&b.appendChild(y(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ha(f)&&!(ma(f)&&0<f.nodeType)?kb(de(f)?qb(f):f,d):d(f)}}function ee(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function fe(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function ge(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Xd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function de(a){if(a&&"number"==typeof a.length){if(ma(a))return"function"==typeof a.item||"string"==typeof a.item;if(la(a))return"function"==typeof a.item}return r}function Wd(a){this.t=a||ba.document||document}v=Wd.prototype;
v.Tb=Vd;v.e=function(a){return y(a)?this.t.getElementById(a):a};v.Wa=function(a,b,c){return be(this.t,arguments)};v.createElement=function(a){return this.t.createElement(a)};v.createTextNode=function(a){return this.t.createTextNode(a)};function he(a){return"CSS1Compat"==a.t.compatMode}function ie(a){var b=a.t,a=!E&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new U(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}v.appendChild=function(a,b){a.appendChild(b)};
v.contains=ge;function je(a,b){var c=Xd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,q))?c[b]||c.getPropertyValue(b):""}function ke(a,b){return a.currentStyle?a.currentStyle[b]:q}function le(a,b){return je(a,b)||ke(a,b)||a.style&&a.style[b]}function me(a){a=a?9==a.nodeType?a:Xd(a):document;return D&&!db(9)&&!he(Vd(a))?a.body:a.documentElement}
function ne(a){var b=a.getBoundingClientRect();if(D)a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop;return b}
function oe(a){if(D&&!db(8))return a.offsetParent;for(var b=Xd(a),c=le(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=le(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return q}
function pe(a){for(var b=new Qd(0,Infinity,Infinity,0),c=Vd(a),d=c.t.body,e=c.t.documentElement,f=!E&&"CSS1Compat"==c.t.compatMode?c.t.documentElement:c.t.body;a=oe(a);)if((!D||0!=a.clientWidth)&&(!E||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=le(a,"overflow")){var h=qe(a),i;i=a;if(Pa&&!G("1.9")){var j=parseFloat(je(i,"borderLeftWidth"));if(re(i))var p=i.offsetWidth-i.clientWidth-j-parseFloat(je(i,"borderRightWidth")),j=j+p;i=new U(j,parseFloat(je(i,"borderTopWidth")))}else i=new U(i.clientLeft,
i.clientTop);h.x+=i.x;h.y+=i.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.t.parentWindow||c.t.defaultView||window;e=c.document;E&&!G("500")&&!Qa?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new ld(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new ld(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:q}
function qe(a){var b,c=Xd(a),d=le(a,"position"),e=Pa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new U(0,0),h=me(c);if(a==h)return f;if(a.getBoundingClientRect)b=ne(a),a=ie(Vd(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(E&&"fixed"==le(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Oa||E&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=oe(b))&&b!=c.body&&b!=h;)if(f.x-=b.scrollLeft,!Oa||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function se(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function te(a){if("none"!=le(a,"display"))return ue(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=ue(a);b.display=c;b.position=e;b.visibility=d;return a}function ue(a){var b=a.offsetWidth,c=a.offsetHeight,d=E&&!b&&!c;return(!ea(b)||d)&&a.getBoundingClientRect?(a=ne(a),new ld(a.right-a.left,a.bottom-a.top)):new ld(b,c)}function ve(a,b){a.style.display=b?"":"none"}function re(a){return"rtl"==le(a,"direction")}
function we(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var xe={thin:2,medium:4,thick:6};function ye(a,b){if("none"==ke(a,b+"Style"))return 0;var c=ke(a,b+"Width");return c in xe?xe[c]:we(a,c)};function ze(a){this.ca=a;this.k=[]}C(ze,Lb);var Ge=[];function He(a,b,c,d,e){ga(c)||(Ge[0]=c,c=Ge);for(var f=0;f<c.length;f++)a.k.push(K(b,c[f],d||a,e||r,a.ca||a))}ze.prototype.Mc=function(){kb(this.k,nc);this.k.length=0};ze.prototype.s=function(){ze.A.s.call(this);this.Mc()};ze.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function Ie(){}(function(a){a.Be=function(){return a.qg||(a.qg=new a)}})(Ie);Ie.prototype.Fd=0;Ie.Be();function Je(a){this.$=a||Vd();this.Mg=Ke}C(Je,Sc);Je.prototype.pg=Ie.Be();var Ke=q;v=Je.prototype;v.Ie=q;v.Za=r;v.f=q;v.Mg=q;v.Ag=q;v.pb=q;v.mb=q;v.Ob=q;v.qh=r;v.e=t("f");v.Pd=function(a){this.pb&&this.pb!=a&&g(Error("Method not supported"));Je.A.Pd.call(this,a)};v.Tb=t("$");v.Wa=function(){this.f=this.$.createElement("div")};v.sb=function(a){this.tb(a)};
v.tb=function(a,b){this.Za&&g(Error("Component already rendered"));this.f||this.Wa();a?a.insertBefore(this.f,b||q):this.$.t.body.appendChild(this.f);(!this.pb||this.pb.Za)&&this.zc()};v.zc=function(){this.Za=o;Le(this,function(a){!a.Za&&a.e()&&a.zc()})};v.Rb=function(){Le(this,function(a){a.Za&&a.Rb()});this.Bc&&this.Bc.Mc();this.Za=r};
v.s=function(){Je.A.s.call(this);this.Za&&this.Rb();this.Bc&&(this.Bc.Z(),delete this.Bc);Le(this,function(a){a.Z()});!this.qh&&this.f&&ee(this.f);this.pb=this.Ag=this.f=this.Ob=this.mb=q};v.Xb=function(){return!!this.mb&&0!=this.mb.length};function Le(a,b){a.mb&&kb(a.mb,b,k)}
v.removeChild=function(a,b){if(a){var c=y(a)?a:a.Ie||(a.Ie=":"+(a.pg.Fd++).toString(36)),a=this.Ob&&c?(c in this.Ob?this.Ob[c]:k)||q:q;if(c&&a){var d=this.Ob;c in d&&delete d[c];ob(this.mb,a);b&&(a.Rb(),a.f&&ee(a.f));c=a;c==q&&g(Error("Unable to set parent component"));c.pb=q;Je.A.Pd.call(c,q)}}a||g(Error("Child is not in parent component"));return a};function Me(){}C(Me,Sc);v=Me.prototype;v.Td=0;v.ac=0;v.Ed=100;v.Ae=0;v.Sd=1;v.sg=r;v.Bg=r;v.Rc=function(a){a=Ne(this,a);if(this.Td!=a)this.Td=a+this.Ae>this.Ed?this.Ed-this.Ae:a<this.ac?this.ac:a,!this.sg&&!this.Bg&&this.dispatchEvent("change")};v.Ac=function(){return Ne(this,this.Td)};v.Wb=function(){return Ne(this,this.ac)};v.Vb=function(){return Ne(this,this.Ed)};function Ne(a,b){return a.Sd==q?b:a.ac+Math.round((b-a.ac)/a.Sd)*a.Sd};function Oe(a){Je.call(this,a);this.qb=new Me;K(this.qb,"change",this.mg,r,this)}C(Oe,Je);var Pe={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};v=Oe.prototype;v.Wa=function(){this.da=this.Tb().Wa("div","progress-bar-thumb");var a=Pe[this.kf];this.f=this.Tb().Wa("div",a,this.da);Qe(this);this.e().setAttribute("aria-valuemin",this.Wb());this.e().setAttribute("aria-valuemax",this.Vb())};
v.zc=function(){Oe.A.zc.call(this);D&&7>Va&&K(this.e(),"resize",this.Tc,r,this);this.Tc();var a=this.e();a.setAttribute("role","progressbar");a.ai="progressbar";this.e().setAttribute("aria-live","polite")};v.Rb=function(){Oe.A.Rb.call(this);Re(this)};function Re(a){D&&7>Va&&mc(a.e(),"resize",a.Tc,r,a)}v.Ac=function(){return this.qb.Ac()};v.Rc=function(a){this.qb.Rc(a);this.e()&&Qe(this)};function Qe(a){var b=a.Ac();a.e().setAttribute("aria-valuenow",b)}v.Wb=function(){return this.qb.Wb()};v.Vb=function(){return this.qb.Vb()};
v.kf="horizontal";v.mg=function(){this.Tc();this.dispatchEvent("change")};v.Tc=function(){if(this.da){var a=this.Wb(),b=this.Vb(),a=(this.Ac()-a)/(b-a),b=Math.round(100*a);"vertical"==this.kf?D&&7>Va?(this.da.style.top=0,this.da.style.height="100%",b=this.da.offsetHeight,a=Math.round(a*b),this.da.style.top=b-a+"px",this.da.style.height=a+"px"):(this.da.style.top=100-b+"%",this.da.style.height=b+"%"):this.da.style.width=b+"%"}};v.s=function(){Re(this);Oe.A.s.call(this);this.da=q;this.qb.Z()};function Se(a,b){w(a)||g(Error("No valid parent element."));w(b)||g(Error("Invalid initial value."));Oe.call(this);this._className="progressbar";this.Ia=a;this.nc=this.pa=q;this.Pa=[];this.Pa=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.Rc(b);this.Ad()}C(Se,Oe);
Se.prototype.Ad=function(){this.Ia.style.position="relative";var a=document.getElementsByTagName("head")[0],b=ae("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Pa[0]),d=document.createTextNode(this.Pa[1]),e=document.createTextNode(this.Pa[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.pa=b;this.sb(this.Ia);a=this.e();a.style.position="absolute";a.style.top=(this.Ia.clientHeight-5)/2;a.style.left=(this.Ia.clientWidth-100)/2};
Se.prototype.ye=function(){var a=this.e().style.top,b=this.e().style.left;ee(this.e());var c=new Se(this.Ia,100),d=c.e();d.style.position="absolute";d.style.top=a;d.style.left=b;(d.firstElementChild!=k?d.firstElementChild:fe(d.firstChild)).classList.add("progress-bar-thumb-done");this.nc=c};Se.prototype.Zb=function(){this.pa&&ee(this.pa);this.e()&&ee(this.e());this.nc&&ee(this.nc.e());this.nc=this.pa=q};A("X.progressbar",Se);A("X.progressbar.prototype.done",Se.prototype.ye);
A("X.progressbar.prototype.kill",Se.prototype.Zb);function Te(a,b,c,d,e){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!w(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid front direction."));(!w(c)||!(c instanceof Array)||3!=c.length)&&g(Error("Invalid up direction."));z(d)||g(Error("Invalid width."));z(e)||g(Error("Invalid height."));N.call(this);this._className="slice";this.o=a;this.Uc=b;this.Ua=c;this.Nb=d;this.ib=e;this.Ta=[0,1,0,0,1,1,1,1,1,0,0,0];this.qa()}C(Te,N);
Te.prototype.qa=function(){this.j.clear();var a=new O(this.Uc[0],this.Uc[1],this.Uc[2]),b=new O(this.Ua[0],this.Ua[1],this.Ua[2]),c=Rc(b,a),d=new O(this.o[0],this.o[1],this.o[2]),e=new O(1,1,1);if(1==a.x)e=new O(this.o[2],this.ib/2,this.Nb/2);else if(1==a.y)e=new O(this.Nb/2,this.o[2],this.ib/2),this.Ta=[0,0,1,0,0,1,0,1,1,1,1,0];else if(1==a.b)e=new O(this.Nb/2,this.ib/2,this.o[2]),this.Ta=[1,0,0,0,1,1,1,1,0,1,0,0];var f=Qc(c.c().w(),b.c().w()),f=new O(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var h=Qc(c.c().w(),
b),h=new O(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var i=Qc(c,b.c().w()),i=new O(i.x*e.x,i.y*e.y,i.b*e.b);i.add(d);var j=i,b=Qc(c,b),b=new O(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=h;this.j.add(f.x,f.y,f.b);this.j.add(h.x,h.y,h.b);this.j.add(i.x,i.y,i.b);this.j.add(j.x,j.y,j.b);this.j.add(b.x,b.y,b.b);this.j.add(d.x,d.y,d.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b)};A("X.slice",Te);function Ue(){P.call(this);this._className="shader";this.Mb="";this.Mb="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.zb="";this.zb="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform sampler2D textureSampler;\nuniform float objectOpacity;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   gl_FragColor = texture2D(textureSampler,   vec2(fragmentTexturePos.s,fragmentTexturePos.t));\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
C(Ue,P);var Ve={Oh:"vertexPosition",Nh:"vertexNormal",Mh:"vertexColor",Ph:"vertexTexturePos"},We={Qh:"view",Ah:"perspective",rh:"center",yh:"objectTransform",Jh:"useObjectColor",wh:"objectColor",Bh:"pointSize",xh:"objectOpacity",vh:"normal",Kh:"usePicking",Lh:"useTexture",Ih:"textureSampler"};Ue.prototype.nh=t("Mb");Ue.prototype.jg=t("zb");
Ue.prototype.Ef=function(){var a=Object.keys(We);Object.keys(Ve).every(function(a){a=eval("X.shaders.attributes."+a);return-1!=this.Mb.search(a)||-1!=this.zb.search(a)}.bind(this))||g(Error("Could not find all attributes in the shader sources."));a.every(function(a){a=eval("X.shaders.uniforms."+a);return-1!=this.Mb.search(a)||-1!=this.zb.search(a)}.bind(this))||g(Error("Could not find all uniforms in the shader sources."));return o};A("X.shaders",Ue);A("X.shaders.attributes",Ve);
A("X.shaders.uniforms",We);A("X.shaders.prototype.vertex",Ue.prototype.nh);A("X.shaders.prototype.fragment",Ue.prototype.jg);A("X.shaders.prototype.validate",Ue.prototype.Ef);D||Pa&&G("1.9.3");var Xe=ba.window;function Ye(a,b,c){la(a)?c&&(a=ta(a,c)):a&&"function"==typeof a.handleEvent?a=ta(a.handleEvent,a):g(Error("Invalid listener argument"));return 2147483647<b?-1:Xe.setTimeout(a,b||0)};function Ze(a,b){this.ca=new ze(this);this.Od(a||q);b&&this.ub(b)}C(Ze,Sc);v=Ze.prototype;v.f=q;v.Uf=o;v.ne=q;v.M=r;v.ah=r;v.Bd=-1;v.Oe=-1;v.og=r;v.eg=o;v.vb="toggle_display";v.ub=aa("vb");v.e=t("f");v.Od=function(a){this.M&&g(Error("Can not change this state of the popup while showing."));this.f=a};
v.J=function(a){this.ic&&this.ic.stop();this.Yb&&this.Yb.stop();if(a){if(!this.M&&this.Id()){this.f||g(Error("Caller must call setElement before trying to show the popup"));this.ka();a=Xd(this.f);this.og&&He(this.ca,a,"keydown",this.Dg,o);if(this.Uf)if(He(this.ca,a,"mousedown",this.Xe,o),D){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}He(this.ca,a,"mousedown",this.Xe,o);He(this.ca,a,
"deactivate",this.We)}else He(this.ca,a,"blur",this.We);"toggle_display"==this.vb?(this.f.style.visibility="visible",ve(this.f,o)):"move_offscreen"==this.vb&&this.ka();this.M=o;this.ic?(lc(this.ic,"end",this.hf,r,this),this.ic.play()):this.hf()}}else $e(this)};v.ka=ca;function $e(a,b){if(!a.M||!a.dispatchEvent({type:"beforehide",target:b}))return r;a.ca&&a.ca.Mc();a.Yb?(lc(a.Yb,"end",ua(a.qe,b),r,a),a.Yb.play()):a.qe(b);return o}
v.qe=function(a){if("toggle_display"==this.vb)this.ah?Ye(this.He,0,this):this.He();else if("move_offscreen"==this.vb)this.f.style.left="-200px",this.f.style.top="-200px";this.M=r;this.Jd(a)};v.He=function(){this.f.style.visibility="hidden";ve(this.f,r)};v.Id=function(){return this.dispatchEvent("beforeshow")};v.hf=function(){this.Bd=va();this.Oe=-1;this.dispatchEvent("show")};v.Jd=function(a){this.Oe=va();this.dispatchEvent({type:"hide",target:a})};
v.Xe=function(a){a=a.target;!ge(this.f,a)&&(!this.ne||ge(this.ne,a))&&!(150>va()-this.Bd)&&$e(this,a)};v.Dg=function(a){27==a.keyCode&&$e(this,a.target)&&(a.preventDefault(),a.stopPropagation())};v.We=function(a){if(this.eg){var b=Xd(this.f);if(D||Oa){if(a=b.activeElement,!a||ge(this.f,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>va()-this.Bd||$e(this)}};v.s=function(){Ze.A.s.call(this);this.ca.Z();Nb(this.ic);Nb(this.Yb);delete this.f;delete this.ca};function af(a){this.$=a||Vd();I.call(this)}C(af,I);v=af.prototype;v.Xf="goog-buttonset";v.ue=q;v.f=q;v.Wf=q;v.set=function(a,b,c,d){I.prototype.set.call(this,a,b);if(c)this.ue=a;if(d)this.Wf=a;return this};function bf(a,b,c,d){return a.set(b.key,b.caption,c,d)}v.sb=function(){if(this.f){this.f.innerHTML="";var a=Vd(this.f);vb(this,function(b,c){var d=a.Wa("button",{name:c},b);if(c==this.ue)d.className=this.Xf+"-default";this.f.appendChild(d)},this)}};v.e=t("f");v.Tb=t("$");
var cf={key:"ok",caption:"OK"},df={key:"cancel",caption:"Cancel"},ef={key:"yes",caption:"Yes"},ff={key:"no",caption:"No"},gf={key:"save",caption:"Save"},hf={key:"continue",caption:"Continue"};"undefined"!=typeof document&&(bf(new af,cf,o,o),bf(bf(new af,cf,o),df,r,o),bf(bf(new af,ef,o),ff,r,o),bf(bf(bf(new af,ef),ff,o),df,r,o),bf(bf(bf(new af,hf),gf),df,o,o));function jf(a){this.Va=a||kf}function kf(a,b){return""+a<""+b?-1:""+a>""+b?1:0}v=jf.prototype;v.O=q;v.Va=q;v.ua=q;v.ta=q;v.h=0;
v.add=function(a){if(this.O==q)return this.ta=this.ua=this.O=new lf(a),this.h=1,o;var b=r;mf(this,function(c){var d=q;if(0<this.Va(c.value,a)){if(d=c.left,c.left==q){var e=new lf(a,c);c.left=e;if(c==this.ua)this.ua=e;b=o;nf(this,c)}}else if(0>this.Va(c.value,a)&&(d=c.right,c.right==q)){e=new lf(a,c);c.right=e;if(c==this.ta)this.ta=e;b=o;nf(this,c)}return d});b&&(this.h+=1);return b};
v.remove=function(a){var b=q;mf(this,function(c){var d=q;if(0<this.Va(c.value,a))d=c.left;else if(0>this.Va(c.value,a))d=c.right;else if(b=c.value,c.left!=q||c.right!=q){var e=q,f;if(c.left!=q){f=of(this,c.left);if(f!=c.left){if(f.parent.right=f.left)f.left.parent=f.parent;f.left=c.left;f.left.parent=f;e=f.parent}f.parent=c.parent;f.right=c.right;if(f.right)f.right.parent=f;if(c==this.ta)this.ta=f}else{f=pf(this,c.right);if(f!=c.right){if(f.parent.left=f.right)f.right.parent=f.parent;f.right=c.right;
f.right.parent=f;e=f.parent}f.parent=c.parent;f.left=c.left;if(f.left)f.left.parent=f;if(c==this.ua)this.ua=f}qf(c)?c.parent.left=f:rf(c)?c.parent.right=f:this.O=f;nf(this,e?e:f)}else if(qf(c)){this.bi=1;c.parent.left=q;if(c==this.ua)this.ua=c.parent;nf(this,c.parent)}else if(rf(c)){c.parent.right=q;if(c==this.ta)this.ta=c.parent;nf(this,c.parent)}else this.clear();return d});if(b)this.h=this.O?this.h-1:0;return b};v.clear=function(){this.ta=this.ua=this.O=q;this.h=0};
v.contains=function(a){var b=r;mf(this,function(c){var d=q;0<this.Va(c.value,a)?d=c.left:0>this.Va(c.value,a)?d=c.right:b=o;return d});return b};v.aa=t("h");v.Wb=function(){return pf(this).value};v.Vb=function(){return of(this).value};v.ba=function(){var a=[];sf(this,function(b){a.push(b)});return a};
function sf(a,b){if(a.O){var c,d=c=pf(a);for(c=c.left?c.left:c;d!=q;)if(d.left!=q&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=d.right!=q&&d.right!=c?d.right:d.parent;c=e}}}function mf(a,b,c){for(c=c?c:a.O;c&&c!=q;)c=b.call(a,c)}
function nf(a,b){mf(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&tf(this,a.left),uf(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&uf(this,a.right),tf(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function tf(a,b){qf(b)?(b.parent.left=b.right,b.right.parent=b.parent):rf(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.O=b.right,a.O.parent=q);var c=b.right;b.right=b.right.left;if(b.right!=q)b.right.parent=b;c.left=b;b.parent=c}function uf(a,b){qf(b)?(b.parent.left=b.left,b.left.parent=b.parent):rf(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.O=b.left,a.O.parent=q);var c=b.left;b.left=b.left.right;if(b.left!=q)b.left.parent=b;c.right=b;b.parent=c}
function pf(a,b){if(!b)return a.ua;var c=b;mf(a,function(a){var b=q;if(a.left)b=c=a.left;return b},b);return c}function of(a,b){if(!b)return a.ta;var c=b;mf(a,function(a){var b=q;if(a.right)b=c=a.right;return b},b);return c}function lf(a,b){this.value=a;this.parent=b?b:q}lf.prototype.left=q;lf.prototype.right=q;lf.prototype.height=1;function rf(a){return!!a.parent&&a.parent.right==a}function qf(a){return!!a.parent&&a.parent.left==a};function vf(a,b,c){w(a)||g(Error("Invalid GL Buffer."));w(b)||g(Error("Invalid number of items."));w(c)||g(Error("Invalid item size."));P.call(this);this._className="buffer";this.K=a;this.oa=b;this.Sa=c}C(vf,P);vf.prototype.lg=t("K");vf.prototype.ug=t("oa");vf.prototype.vg=t("Sa");A("X.buffer",vf);A("X.buffer.prototype.glBuffer",vf.prototype.lg);A("X.buffer.prototype.itemCount",vf.prototype.ug);A("X.buffer.prototype.itemSize",vf.prototype.vg);function wf(a,b,c,d,e,f,h,i){var j,p=c.offsetParent;if(p){var l="HTML"==p.tagName||"BODY"==p.tagName;if(!l||"static"!=le(p,"position"))j=qe(p),l||(j=kd(j,new U(p.scrollLeft,p.scrollTop)))}p=qe(a);l=te(a);p=new Rd(p.x,p.y,l.width,l.height);(l=pe(a))&&p.Le(new Rd(l.left,l.top,l.right-l.left,l.bottom-l.top));var l=Vd(a),n=Vd(c);if(l.t!=n.t){var m=l.t.body,n=n.t.parentWindow||n.t.defaultView,s=new U(0,0),u=Xd(m)?Xd(m).parentWindow||Xd(m).defaultView:window,x=m;do{var B;if(u==n)B=qe(x);else{var F=x;B=
new U;if(1==F.nodeType)if(F.getBoundingClientRect)F=ne(F),B.x=F.left,B.y=F.top;else{var W=ie(Vd(F)),F=qe(F);B.x=F.x-W.x;B.y=F.y-W.y}else{var W=la(F.kg),L=F;F.targetTouches?L=F.targetTouches[0]:W&&F.ha.targetTouches&&(L=F.ha.targetTouches[0]);B.x=L.clientX;B.y=L.clientY}}s.x+=B.x;s.y+=B.y}while(u&&u!=n&&(x=u.frameElement)&&(u=u.parent));m=kd(s,qe(m));D&&!he(l)&&(m=kd(m,ie(l)));p.left+=m.x;p.top+=m.y}a=(b&4&&re(a)?b^2:b)&-5;b=new U(a&2?p.left+p.width:p.left,a&1?p.top+p.height:p.top);j&&(b=kd(b,j));
e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var J;if(h&&(J=pe(c))&&j)J.top-=j.y,J.right-=j.x,J.bottom-=j.y,J.left-=j.x;return xf(b,c,d,f,J,h,i)}
function xf(a,b,c,d,e,f,h){var a=a.c(),i=0,j=(c&4&&re(b)?c^2:c)&-5,c=te(b),h=h?h.c():c.c();if(d||0!=j)j&2?a.x-=h.width+(d?d.right:0):d&&(a.x+=d.left),j&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){i=a;d=0;if(65==(f&65)&&(i.x<e.left||i.x>=e.right))f&=-2;if(132==(f&132)&&(i.y<e.top||i.y>=e.bottom))f&=-5;if(i.x<e.left&&f&1)i.x=e.left,d|=1;if(i.x<e.left&&i.x+h.width>e.right&&f&16)h.width=Math.max(h.width-(i.x+h.width-e.right),0),d|=4;if(i.x+h.width>e.right&&f&1)i.x=Math.max(e.right-h.width,
e.left),d|=1;f&2&&(d|=(i.x<e.left?16:0)|(i.x+h.width>e.right?32:0));if(i.y<e.top&&f&4)i.y=e.top,d|=2;if(i.y>=e.top&&i.y+h.height>e.bottom&&f&32)h.height=Math.max(h.height-(i.y+h.height-e.bottom),0),d|=8;if(i.y+h.height>e.bottom&&f&4)i.y=Math.max(e.bottom-h.height,e.top),d|=2;f&8&&(d|=(i.y<e.top?64:0)|(i.y+h.height>e.bottom?128:0));i=d}else i=256;if(i&496)return i}f=a;e=Pa&&(Ia||Ta)&&G("1.9");f instanceof U?(a=f.x,f=f.y):(a=f,f=k);b.style.left=se(a,e);b.style.top=se(f,e);if(!md(c,h))a=he(Vd(Xd(b))),
D&&(!a||!G("8"))?(c=b.style,a?(D?(a=we(b,ke(b,"paddingLeft")),e=we(b,ke(b,"paddingRight")),f=we(b,ke(b,"paddingTop")),d=we(b,ke(b,"paddingBottom")),a=new Qd(f,e,d,a)):(a=je(b,"paddingLeft"),e=je(b,"paddingRight"),f=je(b,"paddingTop"),d=je(b,"paddingBottom"),a=new Qd(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),D?(e=ye(b,"borderLeft"),f=ye(b,"borderRight"),d=ye(b,"borderTop"),b=ye(b,"borderBottom"),b=new Qd(d,f,b,e)):(e=je(b,"borderLeftWidth"),f=je(b,"borderRightWidth"),d=je(b,"borderTopWidth"),
b=je(b,"borderBottomWidth"),b=new Qd(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=h.width-b.left-a.left-a.right-b.right,c.pixelHeight=h.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=h.width,c.pixelHeight=h.height)):(b=b.style,Pa?b.MozBoxSizing="border-box":E?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(h.width,0)+"px",b.height=Math.max(h.height,0)+"px");return i};function yf(){}yf.prototype.ka=function(){};function zf(a,b){this.element=a;this.re=b}C(zf,yf);zf.prototype.ka=function(a,b,c){wf(this.element,this.re,a,b,k,c)};function Af(a,b){this.rd=a instanceof U?a:new U(a,b)}C(Af,yf);Af.prototype.ka=function(a,b,c,d){wf(me(a),0,a,b,this.rd,c,q,d)};function Bf(a,b){this.Jg=4;this.Nd=b||k;Ze.call(this,a)}C(Bf,Ze);Bf.prototype.Pc=function(a){this.Nd=a||k;this.M&&this.ka()};Bf.prototype.ka=function(){if(this.Nd){var a=!this.M&&"move_offscreen"!=this.vb,b=this.e();if(a)b.style.visibility="hidden",ve(b,o);this.Nd.ka(b,this.Jg,this.Zh);a&&ve(b,r)}};function Cf(a,b,c){this.$=c||(a?Vd(Yd(a)):Vd());Bf.call(this,this.$.Wa("div",{style:"position:absolute;display:none;"}));this.sd=new U(1,1);this.Ya=new Ib;a&&Df(this,a);if(b!=q)if(a=this.e(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Xd(a).createTextNode(b))}}C(Cf,Bf);var Ef=[];v=Cf.prototype;v.H=q;v.className="goog-tooltip";
v.uf=500;v.ng=0;v.Tb=t("$");function Df(a,b){b=Yd(b);a.Ya.add(b);K(b,"mouseover",a.Ee,r,a);K(b,"mouseout",a.Cc,r,a);K(b,"mousemove",a.De,r,a);K(b,"focus",a.Ce,r,a);K(b,"blur",a.Cc,r,a)}v.detach=function(a){if(a)a=Yd(a),Ff(this,a),this.Ya.remove(a);else{for(var b=this.Ya.ba(),c=0;a=b[c];c++)Ff(this,a);this.Ya.clear()}};function Ff(a,b){mc(b,"mouseover",a.Ee,r,a);mc(b,"mouseout",a.Cc,r,a);mc(b,"mousemove",a.De,r,a);mc(b,"focus",a.Ce,r,a);mc(b,"blur",a.Cc,r,a)}
v.Od=function(a){var b=this.e();b&&ee(b);Cf.A.Od.call(this,a);if(a)b=this.$.t.body,b.insertBefore(a,b.lastChild)};v.Id=function(){if(!Ze.prototype.Id.call(this))return r;if(this.anchor)for(var a,b=0;a=Ef[b];b++)ge(a.e(),this.anchor)||a.J(r);0<=jb(Ef,this)||Ef.push(this);a=this.e();a.className=this.className;Gf(this);K(a,"mouseover",this.Ge,r,this);K(a,"mouseout",this.Fe,r,this);Hf(this);return o};
v.Jd=function(){ob(Ef,this);for(var a=this.e(),b,c=0;b=Ef[c];c++)b.anchor&&ge(a,b.anchor)&&b.J(r);this.mf&&If(this.mf);mc(a,"mouseover",this.Ge,r,this);mc(a,"mouseout",this.Fe,r,this);this.anchor=k;if(0==(this.wa?this.M?4:1:this.nb?3:this.M?2:0))this.Oc=r;Ze.prototype.Jd.call(this)};v.Ue=function(a,b){if(this.anchor==a&&this.Ya.contains(this.anchor))if(this.Oc||!this.$h){if(this.J(r),!this.M)this.anchor=a,this.Pc(b||Jf(this,0)),this.J(o)}else this.anchor=k;this.wa=k};
v.zg=function(a){this.nb=k;a==this.anchor&&(this.H==q||this.H!=this.e()&&!this.Ya.contains(this.H))&&(!this.oe||!this.oe.H)&&this.J(r)};function Kf(a,b){var c=ie(a.$);a.sd.x=b.clientX+c.x;a.sd.y=b.clientY+c.y}v.Ee=function(a){var b=Lf(this,a.target);this.H=b;Gf(this);if(b!=this.anchor){this.anchor=b;if(!this.wa)this.wa=Ye(ta(this.Ue,this,b,k),this.uf);Mf(this);Kf(this,a)}};function Lf(a,b){try{for(;b&&!a.Ya.contains(b);)b=b.parentNode;return b}catch(c){return q}}
v.De=function(a){Kf(this,a);this.Oc=o};v.Ce=function(a){this.H=a=Lf(this,a.target);this.Oc=o;if(this.anchor!=a){this.anchor=a;var b=Jf(this,1);Gf(this);if(!this.wa)this.wa=Ye(ta(this.Ue,this,a,b),this.uf);Mf(this)}};function Jf(a,b){if(0==b){var c=a.sd.c();return new Nf(c)}return new Of(a.H)}function Mf(a){if(a.anchor)for(var b,c=0;b=Ef[c];c++)if(ge(b.e(),a.anchor))b.oe=a,a.mf=b}
v.Cc=function(a){var b=Lf(this,a.target),c=Lf(this,a.relatedTarget);if(b!=c){if(b==this.H)this.H=q;Hf(this);this.Oc=r;this.M&&(!a.relatedTarget||!ge(this.e(),a.relatedTarget))?If(this):this.anchor=k}};v.Ge=function(){var a=this.e();if(this.H!=a)Gf(this),this.H=a};v.Fe=function(a){var b=this.e();if(this.H==b&&(!a.relatedTarget||!ge(b,a.relatedTarget)))this.H=q,If(this)};function Hf(a){if(a.wa)Xe.clearTimeout(a.wa),a.wa=k}
function If(a){if(2==(a.wa?a.M?4:1:a.nb?3:a.M?2:0))a.nb=Ye(ta(a.zg,a,a.anchor),a.ng)}function Gf(a){if(a.nb)Xe.clearTimeout(a.nb),a.nb=k}v.s=function(){this.J(r);Hf(this);this.detach();this.e()&&ee(this.e());this.H=q;delete this.$;Cf.A.s.call(this)};function Nf(a,b){Af.call(this,a,b)}C(Nf,Af);Nf.prototype.ka=function(a,b,c){b=me(a);b=pe(b);c=c?new Qd(c.top+10,c.right,c.bottom,c.left+10):new Qd(10,0,0,10);xf(this.rd,a,4,c,b,9)&496&&xf(this.rd,a,4,c,b,5)};function Of(a){zf.call(this,a,3)}C(Of,zf);
Of.prototype.ka=function(a,b,c){var d=new U(10,0);wf(this.element,this.re,a,b,d,c,9)&496&&wf(this.element,2,a,1,d,c,5)};function Pf(a){this.f=a;this.Pe=K(this.f,Pa?"DOMMouseScroll":"mousewheel",this)}C(Pf,Sc);
Pf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.ha;if("mousewheel"==a.type){c=1;if(D||E&&(Ja||G("532.0")))c=40;d=E&&Ia&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ea(a.wheelDeltaX)?(b=E&&Ia&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=E&&Ia&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ea(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;z(this.Se)&&(b=Math.min(Math.max(b,-this.Se),this.Se));z(this.Te)&&(c=Math.min(Math.max(c,
-this.Te),this.Te));b=new Rf(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Z()}};Pf.prototype.s=function(){Pf.A.s.call(this);nc(this.Pe);delete this.Pe};function Rf(a,b,c,d){b&&this.ia(b,k);this.type="mousewheel";this.detail=a;this.Wh=c;this.td=d}C(Rf,bc);D||E&&G("525");function Sf(a){(!w(a)||!(a instanceof Element))&&g(Error("Could not add interactor to the given element."));P.call(this);this._className="interactor";this.gb=a;this.dd=this.$d=this.Zd=this.ae=this.Yd=this.be=q;this.cd=o;this.Kb=this.Eb=this.jb=r;this.Zc=new Gc(0,0);this.config={MOUSEWHEEL_ENABLED:o,MOUSECLICKS_ENABLED:o,KEYBOARD_ENABLED:o,HOVERING_ENABLED:o,CONTEXTMENU_ENABLED:r}}C(Sf,P);v=Sf.prototype;
v.ia=function(){this.config.MOUSEWHEEL_ENABLED?(this.dd=new Pf(this.gb),this.be=K(this.dd,"mousewheel",this.df.bind(this))):(nc(this.be),this.dd=q);this.config.MOUSEWHEEL_ENABLED?(this.Yd=K(this.gb,"mousedown",this.$e.bind(this)),this.ae=K(this.gb,"mouseup",this.cf.bind(this))):(nc(this.Yd),nc(this.ae));this.gb.oncontextmenu=this.config.CONTEXTMENU_ENABLED?q:function(){return r};window.onkeydown=this.config.KEYBOARD_ENABLED?this.Kd.bind(this):q;nc(this.Zd);nc(this.$d);this.Zd=K(this.gb,"mousemove",
this.af.bind(this));this.$d=K(this.gb,"mouseout",this.bf.bind(this))};v.$e=function(a){if(0==a.button)this.jb=o;else if(1==a.button)this.Eb=o;else if(2==a.button)this.Kb=o;Tf(this);a.preventDefault()};v.cf=function(a){if(0==a.button)this.jb=r;else if(1==a.button)this.Eb=r;else if(2==a.button)this.Kb=r;Tf(this);a.preventDefault()};v.bf=function(a){this.cd=r;if(this.config.KEYBOARD_ENABLED)window.onkeydown=q;this.Kb=this.Eb=this.jb=r;Tf(this);this.Zc=new Gc(0,0);a.preventDefault()};
v.af=function(a){this.dispatchEvent("mouseup");this.cd=o;if(this.config.KEYBOARD_ENABLED&&window.onkeydown==q)window.onkeydown=this.Kd.bind(this);a.preventDefault();var b=a.shiftKey,c=new Gc(a.offsetX,a.offsetY),a=this.Zc.la(c);this.Zc=c.c();if(this.config.HOVERING_ENABLED)(0<Math.abs(a.x)||0<Math.abs(a.y)||this.Eb||this.jb||this.Kb)&&Tf(this),this.Vc=setTimeout(function(){Tf(this);var a=new Kc;a.uc=c.x;a.vc=c.y;this.dispatchEvent(a);this.Vc=q}.bind(this),300);if(2>Math.abs(a.x))a.x=0;if(2>Math.abs(a.y))a.y=
0;if(0!=a.Gc())if(this.jb&&!b)b=new Hc,b.fb=a,b.Kf=0,this.dispatchEvent(b);else if(this.Eb||this.jb&&b){b=new Fc;if(5<a.x)a.x=5;else if(-5>a.x)a.x=-5;if(5<a.y)a.y=5;else if(-5>a.y)a.y=-5;b.fb=a;this.dispatchEvent(b)}else if(this.Kb)b=new Ic,b.Ra=0<a.y,b.za=r,this.dispatchEvent(b)};function Tf(a){a.Vc&&clearTimeout(a.Vc);a.dispatchEvent(new Lc)}v.df=function(a){Tf(this);a.preventDefault();var b=new Ic;if(!w(a.td))a.td=0;b.Ra=0>a.td;b.za=o;this.dispatchEvent(b)};
v.Kd=function(a){if(this.cd){Tf(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;if(82==f&&!b&&!c&&!d&&!e)a.preventDefault(),a=new Mc,this.dispatchEvent(a);else if(37<=f&&40>=f&&(a.preventDefault(),a=e?new Fc:b?new Ic:new Hc)){c=new Gc(0,0);if(37==f){if(c.x=5,b)a.Ra=o,a.za=r}else if(39==f){if(c.x=-5,b)a.Ra=r,a.za=r}else if(38==f){if(c.y=5,b)a.Ra=o,a.za=o}else if(40==f&&(c.y=-5,b))a.Ra=r,a.za=o;a.fb=c;this.dispatchEvent(a)}}};A("X.interactor",Sf);
A("X.interactor.prototype.init",Sf.prototype.ia);A("X.interactor.prototype.onMouseDown",Sf.prototype.$e);A("X.interactor.prototype.onMouseUp",Sf.prototype.cf);A("X.interactor.prototype.onMouseMovementOutside",Sf.prototype.bf);A("X.interactor.prototype.onMouseMovementInside",Sf.prototype.af);A("X.interactor.prototype.onMouseWheel",Sf.prototype.df);A("X.interactor.prototype.onKey",Sf.prototype.Kd);function Uf(a,b,c,d){w(a)||g(Error("No valid parent element."));(!z(b)||!z(c))&&g(Error("Invalid coordinates."));(!w(d)||!(d instanceof Sf))&&g(Error("Invalid interactor."));Cf.call(this);this._className="caption";this.Ia=a;this.uc=b;this.vc=c;this.pc=d;this.pa=q;this.Pa=[];this.Pa=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];lc(d,Dc,this.Zb.bind(this));this.Ad()}C(Uf,Cf);
Uf.prototype.Ad=function(){this.Ia.style.position="relative";var a=document.getElementsByTagName("head")[0],b=ae("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Pa[0]);a.appendChild(b);b.appendChild(c);this.pa=b;this.Pc(new Af(this.uc,this.vc));this.J(o);Df(this,this.Ia);this.e().classList.add("x-tooltip")};Uf.prototype.Zb=function(){this.J(r);this.pa&&ee(this.pa);this.e()&&ee(this.e());this.pa=q};A("X.caption",Uf);A("X.caption.prototype.kill",Uf.prototype.Zb);function Z(a,b){(!z(a)||!z(b))&&g(Error("A camera needs valid width and height values."));P.call(this);this._className="camera";this.Mf=45;this.qc=new O(0,0,100);this.oc=new O(0,0,0);this.Ua=new O(0,1,0);var c=Float32Array,d;d=a/b;var e=1*Math.tan(this.Mf*Math.PI/360),f=-e;d=new Y([[2/(e*d-f*d),0,(e*d+f*d)/(e*d-f*d),0],[0,2/(e-f),(e+f)/(e-f),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]]);this.de=new c(d.z());this.m=Vf(this,this.qc,this.oc);this.hb=new Float32Array(this.m.z())}C(Z,P);v=Z.prototype;
v.Hd=function(a){(!w(a)||!(a instanceof Sf))&&g(Error("Could not observe the interactor."));K(a,wc,this.ef.bind(this));K(a,xc,this.gf.bind(this));K(a,yc,this.jf.bind(this))};v.jf=function(a){a instanceof Ic||g(Error("Received no valid zoom event."));a.Ra?this.Ff(a.za):this.Gf(a.za)};v.ef=function(a){a instanceof Fc||g(Error("Received no valid pan event."));this.lf(a.fb)};v.gf=function(a){a instanceof Hc||g(Error("Received no valid rotate event."));this.rotate(a.fb)};v.Gg=t("de");v.view=t("m");
v.position=t("qc");v.Pc=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The position was invalid."));this.qc=new O(a,b,c);this.reset()};v.reset=function(){this.m=Vf(this,this.qc,this.oc);this.hb=new Float32Array(this.m.z())};v.focus=t("oc");v.Sg=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The focus was invalid."));this.oc=new O(a,b,c);this.reset()};v.mh=t("Ua");v.Zg=function(a,b,c){(!z(a)||!z(b)||!z(c))&&g(Error("The up-vector was invalid."));this.Ua=new O(a,b,c);this.reset()};
v.lf=function(a){a instanceof Gc||g(Error("Invalid distance vector for pan operation."));a=new O(-a.x,a.y,0);a=wd(4).translate(a);this.m=new Y(a.multiply(this.m));this.hb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};
v.rotate=function(a){a instanceof Array&&2==a.length?a=new Gc(a[0],a[1]):a instanceof Gc||g(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=wd(4),d=new O(parseFloat(td(this.m,0,0)),parseFloat(td(this.m,0,1)),parseFloat(td(this.m,0,2))),b=c.rotate(b,new O(parseFloat(td(this.m,1,0)),parseFloat(td(this.m,1,1)),parseFloat(td(this.m,1,2)))),a=c.rotate(a,d);this.m=new Y(this.m.multiply(a.multiply(b)));this.hb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};
v.Ff=function(a){var b=20;w(a)&&!a&&(b=1);a=new O(0,0,b);a=wd(4).translate(a);this.m=new Y(a.multiply(this.m));this.hb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};v.Gf=function(a){var b=30;w(a)&&!a&&(b=1);a=new O(0,0,-b);a=wd(4).translate(a);this.m=new Y(a.multiply(this.m));this.hb=new Float32Array(this.m.z());this.dispatchEvent(new Jc)};
function Vf(a,b,c){(!(b instanceof O)||!(c instanceof O))&&g(Error("3D vectors required for calculating the view."));var d=wd(4),c=new O(b.x-c.x,b.y-c.y,b.b-c.b),c=c.normalize(),a=a.Ua.c();a.Pb(c)&&(a.b+=1.0E-6);var e=Rc(a,c),a=Rc(c,e),e=e.normalize(),a=a.normalize();V(d,0,0,e.x);V(d,0,1,e.y);V(d,0,2,e.b);V(d,0,3,0);V(d,1,0,a.x);V(d,1,1,a.y);V(d,1,2,a.b);V(d,1,3,0);V(d,2,0,c.x);V(d,2,1,c.y);V(d,2,2,c.b);V(d,2,3,0);V(d,3,0,0);V(d,3,1,0);V(d,3,2,0);V(d,3,3,1);b=b.c();return d.translate(b.w())}
A("X.camera",Z);A("X.camera.prototype.observe",Z.prototype.Hd);A("X.camera.prototype.onZoom",Z.prototype.jf);A("X.camera.prototype.onPan",Z.prototype.ef);A("X.camera.prototype.onRotate",Z.prototype.gf);A("X.camera.prototype.perspective",Z.prototype.Gg);A("X.camera.prototype.view",Z.prototype.view);A("X.camera.prototype.position",Z.prototype.position);A("X.camera.prototype.setPosition",Z.prototype.Pc);A("X.camera.prototype.focus",Z.prototype.focus);A("X.camera.prototype.setFocus",Z.prototype.Sg);
A("X.camera.prototype.up",Z.prototype.mh);A("X.camera.prototype.setUp",Z.prototype.Zg);A("X.camera.prototype.pan",Z.prototype.lf);A("X.camera.prototype.rotate",Z.prototype.rotate);A("X.camera.prototype.zoomIn",Z.prototype.Ff);A("X.camera.prototype.zoomOut",Z.prototype.Gf);A("X.camera.prototype.observe",Z.prototype.Hd);function $(a){w(a)||g(Error("An ID to a valid container (<div>..) is required."));a=Yd(a);window.console.log(a);window.console.log(a.clientWidth);window.console.log(a.clientHeight);(!(ma(a)&&1==a.nodeType)||0==a.clientWidth||0==a.clientHeight)&&g(Error("Could not find the given container or it has an undefined size."));P.call(this);this._className="renderer";this.eb=a;this.Nb=this.eb.clientWidth;this.ib=this.eb.clientHeight;this.pc=this.ea=this.hd=this.Qf=this.a=this.Oa=q;this.kb=new jf(Hd);this.Tf=
[];this.Db=this.Hb=this.Cb=this.Gb=this.Bb=this.Fb=q;this.o=[0,0,0];this.ee=q;this.ya=new I;this.F=new I;this.Lb=new I;this.ed=new I;this.mc=new I;this.tc=new I;this.kd=new I;this.ga=this.$c=q;this.ad=r;this.config={PROGRESSBAR_ENABLED:o,PICKING_ENABLED:o,ORDERING_ENABLED:o,STATISTICS_ENABLED:r};window.console.log("XTK Release 2 -- 2/12/12 -- http://www.goXTK.com")}C($,P);v=$.prototype;v.width=t("Nb");v.height=t("ib");v.canvas=function(){if(!w(this.Oa))this.Oa=ae("canvas");return this.Oa};v.$f=t("eb");
v.Vf=t("ea");v.rg=t("pc");v.sa=function(){if(!w(this.$c))this.$c=new Md,K(this.sa(),Bc,this.ff.bind(this));return this.$c};v.ff=function(a){this.ga&&this.ga.Rc(100*a.le)};v.Ze=function(a){w(a)&&a instanceof Nc&&Wf(this,a.Ha)};v.Ye=function(a){if(w(a)&&a instanceof Kc){var b=a.uc,c=a.vc;if((a=this.get(this.nf(b,c)))&&a.caption())b=new Uf(this.eb,b+10,c+10,this.pc),a=a.caption(),b.e().innerHTML=a}};v.Lg=function(){this.Db=this.Hb=this.Cb=this.Gb=this.Bb=this.Fb=q;this.o=[0,0,0]};
function Xf(a){if(a.config.PROGRESSBAR_ENABLED&&a.ga&&!a.ge)a.ga.ye(),a.ge=Ye(function(){this.ge=q;if(this.ga)this.ga.Zb(),this.ga=q;this.sb()}.bind(a),700)}v.qf=function(){this.ea.reset();this.tb(r,r)};
v.ia=function(){var a=this.canvas();a.width=this.width();a.height=this.height();this.eb.appendChild(a);try{var b=a.getContext("experimental-webgl");b||g(Error())}catch(c){alert("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."),g(Error("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."))}try{if(b.clearColor(0,0,0,0),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.enable(b.DEPTH_TEST),
b.depthFunc(b.LEQUAL),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.config.PICKING_ENABLED){var d=b.createFramebuffer(),e=b.createRenderbuffer(),f=b.createTexture();b.bindTexture(b.TEXTURE_2D,f);b.texImage2D(b.TEXTURE_2D,0,b.RGB,this.width(),this.height(),0,b.RGB,b.UNSIGNED_BYTE,q);b.bindFramebuffer(b.FRAMEBUFFER,d);b.bindRenderbuffer(b.RENDERBUFFER,e);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,this.width(),this.height());b.bindRenderbuffer(b.RENDERBUFFER,q);b.framebufferTexture2D(b.FRAMEBUFFER,
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,f,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,e);b.bindFramebuffer(b.FRAMEBUFFER,q);this.ee=d}}catch(h){g(Error("Exception while accessing GL Context!\n"+h))}d=new Sf(a);d.ia();K(d,Ac,this.qf.bind(this));K(d,Cc,this.Ye.bind(this));e=new Z(this.width(),this.height());e.Hd(d);K(e,zc,this.tb.bind(this,r,r));this.Oa=a;this.a=b;this.ea=e;this.pc=d;this.me(new Ue)};
v.me=function(a){(!w(this.Oa)||!w(this.a)||!w(this.ea))&&g(Error("Renderer was not initialized properly."));(!w(a)||!(a instanceof Ue))&&g(Error("Could not add shaders."));a.Ef();var b=this.a.createShader(this.a.FRAGMENT_SHADER),c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.zb);this.a.shaderSource(c,a.Mb);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||g(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));
this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||g(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));var d=this.a.createProgram();this.a.attachShader(d,c);this.a.attachShader(d,b);this.a.linkProgram(d);this.a.getProgramParameter(d,this.a.LINK_STATUS)||g(Error("Could not create shader program!\n"+this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(d)));this.a.useProgram(d);this.hd=d;Object.keys(Ve).forEach(function(a){a=eval("X.shaders.attributes."+
a);this.ya.set(a,this.a.getAttribLocation(this.hd,a));this.a.enableVertexAttribArray(this.ya.get(a))}.bind(this));Object.keys(We).forEach(function(a){a=eval("X.shaders.uniforms."+a);this.F.set(a,this.a.getUniformLocation(this.hd,a))}.bind(this));this.Qf=a};v.add=function(a){this.Tf.push(a);Wf(this,a)};
function Wf(a,b){(!w(a.Oa)||!w(a.a)||!w(a.ea))&&g(Error("Renderer was not initialized properly."));(!w(b)||!(b instanceof N))&&g(Error("Illegal object."));var c=r;a.get(b.id())&&(c=o);qc(b)||K(b,rc,a.Ze.bind(a));var d=b.id(),e=b.j,f=b.l,h=b.V,i=b.S,j=b.file(),p=b.transform();if(w(i)&&w(i.file())&&i.file().d)c=a.sa(),w(b.S)||g(Error("Internal error during texture loading.")),d=new Image,i=b.S.file().path(),d.src=i,b.S.Xd=d,lc(d,"load",c.xg.bind(c,b)),Nd(c).set(b.id(),r),Pd(c,0.3);else if(w(j)&&j.d)c=
a.sa(),w(b.file())||g(Error("Internal error during file loading.")),b.j.clear(),b.l.clear(),d=b.file().path(),i=d.split(".").pop(),i=i.toUpperCase(),"TRK"==i||"STL"==i||"FSM"==i||"VTK"==i||"NRRD"==i||g(Error("The "+i+" file format is not supported.")),i=new XMLHttpRequest,K(i,"abort",c.Qe.bind(c,i,b)),K(i,"error",c.Qe.bind(c,i,b)),K(i,"load",c.wg.bind(c,i,b)),i.open("GET",d,o),i.overrideMimeType("text/plain; charset=x-user-defined"),i.setRequestHeader("Content-Type","text/plain"),i.send(q),Nd(c).set(b.id(),
r);else{if(b.d&&b.Xb()){for(var j=b.children(),l=j.length,n=0,n=0;n<l;n++)Wf(a,j[n]);b.va()}if(0!=e.Y()){for(j=0;a.ad;)j++;a.ad=o;if(e.d||p.d){l=p.g;j=l.cc(new O(e.Ea,e.Fa,e.Ga));l=l.cc(new O(e.Ba,e.Ca,e.Da));if(a.Fb===q||j.x<a.Fb)a.Fb=j.x;if(a.Bb===q||l.x>a.Bb)a.Bb=l.x;if(a.Gb===q||j.y<a.Gb)a.Gb=j.y;if(a.Cb===q||l.y>a.Cb)a.Cb=l.y;if(a.Hb===q||j.b<a.Hb)a.Hb=j.b;if(a.Db===q||l.b>a.Db)a.Db=l.b;a.o=[(a.Fb+a.Bb)/2,(a.Gb+a.Cb)/2,(a.Hb+a.Db)/2];p.va()}c&&e.d&&(p=a.Lb.get(d),w(p)&&a.a.isBuffer(p.K)&&a.a.deleteBuffer(p.K));
p=q;!c||e.d?(p=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,p),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(e.all()),a.a.STATIC_DRAW),p=new vf(p,e.Y(),3),e.va()):p=a.Lb.get(d);Pd(a.sa(),0.3);c&&f.d&&(j=a.Lb.get(d),w(j)&&a.a.isBuffer(j.K)&&a.a.deleteBuffer(j.K));j=q;!c||f.d?(j=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,j),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(f.all()),a.a.STATIC_DRAW),j=new vf(j,f.Y(),3),f.va()):j=a.ed.get(d);Pd(a.sa(),0.3);c&&h.d&&(f=a.mc.get(d),w(f)&&
a.a.isBuffer(f.K)&&a.a.deleteBuffer(f.K));f=q;0<h.length()&&(!c||h.d?(h.length()!=e.length()&&g(Error("Mismatch between points and point colors.")),e=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,e),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h.all()),a.a.STATIC_DRAW),f=new vf(e,h.Y(),3),h.va()):f=a.mc.get(d));Pd(a.sa(),0.3);c&&w(i)&&i.d&&(h=a.tc.get(d),w(h)&&a.a.isBuffer(h.K)&&a.a.deleteBuffer(h.K));h=q;if(w(i))!c||i.d?(h=b.Ta,w(h)||g(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),
e=a.a.createTexture(),e.zd=i.zd(),a.kd.set(i.id(),e),a.a.pixelStorei(a.a.UNPACK_FLIP_Y_WEBGL,r),a.a.bindTexture(a.a.TEXTURE_2D,e),i.Jb?(a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,i.sc,i.rc,0,a.a.RGBA,a.a.UNSIGNED_BYTE,i.Jb),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_S,a.a.CLAMP_TO_EDGE),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_T,a.a.CLAMP_TO_EDGE)):a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,a.a.RGBA,a.a.UNSIGNED_BYTE,e.zd),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.LINEAR),
a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.LINEAR),a.a.bindTexture(a.a.TEXTURE_2D,q),e=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,e),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h),a.a.STATIC_DRAW),h=new vf(e,h.length,2),i.va()):h=a.tc.get(d);Pd(a.sa(),0.1);!c&&!a.kb.add(b)&&g(Error("Could not add object to this renderer."));a.Lb.set(d,p);a.ed.set(d,j);a.mc.set(d,f);a.tc.set(d,h);a.ad=r}}}
v.sb=function(){(!this.Oa||!this.a||!this.ea)&&g(Error("The renderer was not initialized properly."));if(!w(this.fe))if(Od(this.sa()))this.ga?(Xf(this),eval("this.onShowtime()")):this.tb(r,o);else{if(this.config.PROGRESSBAR_ENABLED&&!this.ga)this.ga=new Se(this.eb,0);this.fe=Ye(function(){this.fe=q;this.sb()}.bind(this),100)}};v.Eg=function(){};v.get=function(a){w(a)||g(Error("Invalid object id."));for(var b=this.kb.ba(),c=0,d=b.length,c=0;c<d;c++)if(b[c].id()==a)return b[c];return q};
v.nf=function(a,b){if(this.config.PICKING_ENABLED){this.tb(o,r);var c=new Uint8Array(4);this.a.readPixels(a,this.ib-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);var d=Math.round(10*(c[0]/255)),e=Math.round(10*(c[1]/255)),c=Math.round(10*(c[2]/255));return 100*d+10*e+c}return-1};
v.tb=function(a,b){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.ee):this.a.bindFramebuffer(this.a.FRAMEBUFFER,q);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var c=this.ea.de,d=this.ea.hb;this.a.uniformMatrix4fv(this.F.get("perspective"),r,c);this.a.uniformMatrix4fv(this.F.get("view"),r,d);c=this.o;this.a.uniform3f(this.F.get("center"),parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]));if(this.config.ORDERING_ENABLED){var e=r,c=this.kb.ba(),d=c.length,f;for(f=0;f<d;++f){var h=
c[f];if(1!=h.opacity()){var e=h.j.lc,e=new O(e[0],e[1],e[2]),h=h.transform().g.cc(e),i=this.ea.view().cc(h),j=this.ea.focus(),h=j.x-i.x,e=j.y-i.y,i=j.b-i.b;c[f].yc=Math.sqrt(h*h+e*e+i*i);e=o}}if(e){this.kb.clear();for(f=0;f<d;++f)this.kb.add(c[f])}}if(c=!a&&w(b)&&b&&this.config.STATISTICS_ENABLED)var p=0,l=0,n=0,m=0;d=this.kb.ba();f=d.length;for(h=0;h<f;++h)if(e=d[h]){if(e.Wd()){var j=e.id(),s=e.Dd(),i=this.Lb.get(j),u=this.ed.get(j),x=this.mc.get(j),B=this.tc.get(j);this.a.bindBuffer(this.a.ARRAY_BUFFER,
i.K);this.a.vertexAttribPointer(this.ya.get("vertexPosition"),i.Sa,this.a.FLOAT,r,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,u.K);this.a.vertexAttribPointer(this.ya.get("vertexNormal"),u.Sa,this.a.FLOAT,r,0,0);a?this.a.uniform1i(this.F.get("usePicking"),o):this.a.uniform1i(this.F.get("usePicking"),r);w(x)&&!a&&!s?(this.a.uniform1i(this.F.get("useObjectColor"),r),this.a.bindBuffer(this.a.ARRAY_BUFFER,x.K),this.a.vertexAttribPointer(this.ya.get("vertexColor"),x.Sa,this.a.FLOAT,r,0,0)):(u=o,s&&!a&&(window.console.log("magicmode"),
u=r),window.console.log("useObjectColor:",u),this.a.uniform1i(this.F.get("useObjectColor"),u),s=e.color(),window.console.log("objectColor:",s),a&&(999<j&&g(Error("Id out of bounds.")),s=Math.floor(0.01*j),u=Math.floor(0.1*j)-10*s,s=[s/10,u/10,(j-100*s-10*u)/10]),this.a.uniform3f(this.F.get("objectColor"),parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2])),this.a.vertexAttribPointer(this.ya.get("vertexColor"),i.Sa,this.a.FLOAT,r,0,0));this.a.uniform1f(this.F.get("objectOpacity"),parseFloat(e.opacity()));
w(e.S)&&w(B)&&!a?(this.a.uniform1i(this.F.get("useTexture"),o),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.kd.get(e.S.id())),this.a.uniform1i(this.F.get("textureSampler"),0),this.a.bindBuffer(this.a.ARRAY_BUFFER,B.K),this.a.vertexAttribPointer(this.ya.get("vertexTexturePos"),B.Sa,this.a.FLOAT,r,0,0)):(this.a.uniform1i(this.F.get("useTexture"),r),this.a.vertexAttribPointer(this.ya.get("vertexTexturePos"),i.Sa,this.a.FLOAT,r,0,0));this.a.uniformMatrix4fv(this.F.get("objectTransform"),
r,yd(e.transform()));j=1;"POINTS"==e.type()&&(j=e.Md());this.a.uniform1f(this.F.get("pointSize"),j);j=-1;e.type()==Ed?(j=this.a.TRIANGLES,c&&(l+=i.oa/3)):e.type()==Zc?(this.a.lineWidth(e.lineWidth()),j=this.a.LINES,c&&(n+=i.oa/2)):"POINTS"==e.type()?(j=this.a.POINTS,c&&(m+=i.oa)):"TRIANGLE_STRIPS"==e.type()?(j=this.a.TRIANGLE_STRIP,c&&(l+=i.oa/3)):"POLYGONS"==e.type()&&(j=0==i.oa%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,c&&(l+=i.oa/3));c&&(p+=i.oa);this.a.drawArrays(j,0,i.oa)}}else g(Error("Could not retrieve object for (re-)drawing!"));
c&&(p="Objects: "+f+" | "+("Vertices: "+p+" | ")+("Triangles: "+Math.round(l)+" | "),p=p+("Lines: "+n+" | ")+("Points: "+m+" | ")+("Textures: "+this.kd.aa()),window.console.log(p))};A("X.renderer",$);A("X.renderer.prototype.width",$.prototype.width);A("X.renderer.prototype.height",$.prototype.height);A("X.renderer.prototype.canvas",$.prototype.canvas);A("X.renderer.prototype.container",$.prototype.$f);A("X.renderer.prototype.camera",$.prototype.Vf);A("X.renderer.prototype.interactor",$.prototype.rg);
A("X.renderer.prototype.loader",$.prototype.sa);A("X.renderer.prototype.onProgress",$.prototype.ff);A("X.renderer.prototype.onModified",$.prototype.Ze);A("X.renderer.prototype.onHover",$.prototype.Ye);A("X.renderer.prototype.resetBoundingBox",$.prototype.Lg);A("X.renderer.prototype.resetViewAndRender",$.prototype.qf);A("X.renderer.prototype.init",$.prototype.ia);A("X.renderer.prototype.addShaders",$.prototype.me);A("X.renderer.prototype.add",$.prototype.add);A("X.renderer.prototype.onShowtime",$.prototype.Eg);
A("X.renderer.prototype.get",$.prototype.get);A("X.renderer.prototype.pick",$.prototype.nf);A("X.renderer.prototype.render",$.prototype.sb);function Yf(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new R(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));h.push(new S(c.$a(e.xa(d)),e))}this.i=[];for(var a=a||{},c=new R(a.od||[0,0,0]),d=a.ja||1,e=a.Qd||16,a=a.bh||8,f=[],h,i=0;i<e;i++)for(var j=0;j<a;j++)h=[],b(i/e,j/a),0<j&&b((i+1)/e,j/a),j<a-1&&b((i+1)/e,(j+1)/a),b(i/e,(j+1)/a),f.push(new hd(h));return jd(f)}C(Yf,T);A("CSG.sphere",Yf);function Zf(a,b){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));z(b)||g(Error("Invalid radius."));N.call(this);this._className="Sphere";this.o=a;this.gd=b;this.jd=32;this.Rf=16;this.qa()}C(Zf,N);Zf.prototype.qa=function(){Gd(this,new Yf({od:this.o,ja:this.gd,Qd:this.jd,bh:this.Rf}))};A("X.sphere",Zf);function $f(){N.call(this);this._className="volume";this.o=[0,0,0];this.fa=[10,10,10];this.G=[1,1,1];this.Yc=this._indexZ=this.Xc=this._indexY=this.Wc=this._indexX=0;this.he=new N;this.ie=new N;this.je=new N}C($f,N);
$f.prototype.qa=function(){this.children().length=0;this.children().push(this.he);this.children().push(this.ie);this.children().push(this.je);for(var a=0,a=0;3>a;a++){for(var b=(this.fa[a]-1)/2,c=b,d=0,d=0;d<this.fa[a];d++){var e=-b*this.G[a]+d*this.G[a],f=[[e,this.o[1],this.o[2]],[this.o[0],e,this.o[2]],[this.o[0],this.o[1],e]],e=this.children()[a].children(),h=0,i=0;0==a?(h=this.fa[2]*this.G[2]-this.G[2],i=this.fa[1]*this.G[1]-this.G[1]):1==a?(h=this.fa[0]*this.G[0]-this.G[0],i=this.fa[2]*this.G[2]-
this.G[2]):2==a&&(h=this.fa[0]*this.G[0]-this.G[0],i=this.fa[1]*this.G[1]-this.G[1]);f=new Te(f[a],[[1,0,0],[0,1,0],[0,0,1]][a],[[0,1,0],[0,0,-1],[0,1,0]][a],h,i);f.J(d==c);e.push(f)}if(0==a)this.Wc=this._indexX=c;else if(1==a)this.Xc=this._indexY=c;else if(2==a)this.Yc=this._indexZ=c}this.d=o};
$f.prototype.bc=function(){for(var a=0,a=0;3>a;a++){var b=0,c=0;if(0==a)b=this._indexX,c=this.Wc,this.Wc=this._indexX;else if(1==a)b=this._indexY,c=this.Xc,this.Xc=this._indexY;else if(2==a)b=this._indexZ,c=this.Yc,this.Yc=this._indexZ;this.children()[a].children()[parseInt(c,10)].J(r);this.children()[a].children()[parseInt(b,10)].J(o)}$f.A.bc.call(this)};$f.prototype.cg=t("fa");A("X.volume",$f);A("X.volume.prototype.dimensions",$f.prototype.cg);A("X.volume.prototype.modified",$f.prototype.bc);function ag(a){function b(a,b,d){b=2*b*Math.PI;b=j.xa(Math.cos(b)).$a(p.xa(Math.sin(b)));a=c.$a(e.xa(a)).$a(b.xa(f));d=b.xa(1-Math.abs(d)).$a(h.xa(d));return new S(a,d)}this.i=[];for(var a=a||{},c=new R(a.start||[0,-1,0]),d=new R(a.end||[0,1,0]),e=d.ob(c),f=a.ja||1,a=a.Qd||16,h=e.wb(),i=0.5<Math.abs(h.y()),j=(new R(i,!i,0)).xc(h).wb(),p=j.xc(h).wb(),i=new S(c,h.Hc()),d=new S(d,h.wb()),l=[],n=0;n<a;n++){var m=n/a,s=(n+1)/a;l.push(new hd([i,b(0,m,-1),b(0,s,-1)]));l.push(new hd([b(0,s,0),b(0,m,0),b(1,
m,0),b(1,s,0)]));l.push(new hd([d,b(1,s,1),b(1,m,1)]))}return jd(l)}C(ag,T);A("CSG.cylinder",ag);function bg(a,b,c){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid start position."));(!w(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid end position."));z(c)||g(Error("Invalid radius."));N.call(this);this._className="cylinder";this.Sf=a;this.Lf=b;this.gd=c;this.jd=32;this.qa()}C(bg,N);bg.prototype.qa=function(){Gd(this,new ag({start:this.Sf,end:this.Lf,ja:this.gd,Qd:this.jd}))};A("X.cylinder",bg);function cg(a){this.i=[];var a=a||{},b=new R(a.od||[0,0,0]),c=!a.ja?[1,1,1]:a.ja.length?a.ja:[a.ja,a.ja,a.ja];return jd([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new hd(a[0].map(function(e){e=new R(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new S(e,new R(a[1]))}))}))}C(cg,T);A("CSG.cube",cg);function dg(a,b,c,d){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!z(b)||!z(c)||!z(d))&&g(Error("Invalid radii."));N.call(this);this._className="cube";this.o=a;this.Nf=b;this.Of=c;this.Pf=d;this.Ta=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];this.qa()}C(dg,N);dg.prototype.qa=function(){Gd(this,new cg({od:this.o,ja:[this.Nf,this.Of,this.Pf]}))};A("X.cube",dg);
